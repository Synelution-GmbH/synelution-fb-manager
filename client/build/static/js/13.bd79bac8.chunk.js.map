{"version":3,"sources":["ui/components/Icons/Icon.jsx","ui/components/Icons/custom-icons.jsx","services/socket-provider.js","services/clients-api.js","services/posts-api.js","router/Nav/GetNotified.jsx","utils.js","router/Nav/index.jsx","router/index.js","AuthenticatedApp.jsx"],"names":["library","add","faEye","faEyeSlash","faTimesCircle","faSmile","faInstagram","faFacebook","faCopy","faClipboardCheck","faPlus","faCloudUploadAlt","faSearch","faSave","faTrashAlt","faPlay","faPause","faBell","faBellSlash","faCheckCircle","icon","iconName","prefix","faLink","faGlobeAmericas","faPen","faImage","AwesomeIcon","props","defaultProps","socket","io","SocketContext","createContext","useSocket","useContext","SocketProvider","Provider","value","postClient","data","axios","post","headers","then","getClients","get","getPosts","key","client","type","from","to","createPost","args","deletePost","id","delete","putPost","put","options","userVisibleOnly","applicationServerKey","base64String","base64","repeat","length","replace","rawData","window","atob","outputArray","Uint8Array","i","charCodeAt","urlBase64ToUint8Array","GetNotified","user","useAuth","useState","enabled","setEnabled","useEffect","a","console","log","Notification","permission","navigator","serviceWorker","ready","registration","pushManager","getSubscription","handleClick","Promise","resolve","reject","requestPermission","catch","e","alert","subscribe","subscription","role","Button","onClick","startIcon","useStyles","makeStyles","theme","appBar","marginBottom","background","palette","primary","main","transition","extensionLink","chrome","firefox","Nav","logout","dateParams","useRouteMatch","classes","params","AppBar","position","className","Box","p","clone","Grid","container","justify","alignItems","Link","component","RouterLink","color","style","marginRight","width","open","InstallTrigger","Avatar","username","slice","toUpperCase","Dashboard","React","lazy","Posts","ClientView","MainRouter","fallback","path","exact","Component","AuthenticatedApp"],"mappings":"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","file":"static/js/13.bd79bac8.chunk.js","sourcesContent":["import React from 'react';\r\nimport PropTypes from 'prop-types';\r\n\r\nimport { library } from '@fortawesome/fontawesome-svg-core';\r\nimport { FontAwesomeIcon } from '@fortawesome/react-fontawesome';\r\n\r\nimport {\r\n  faEye,\r\n  faEyeSlash,\r\n  faTimesCircle,\r\n  faSmile,\r\n  faCopy,\r\n  faClipboardCheck,\r\n  faPlus,\r\n  faCloudUploadAlt,\r\n  faSearch,\r\n  faSave,\r\n  faTrashAlt,\r\n  faPlay,\r\n  faPause,\r\n  faBell,\r\n  faBellSlash,\r\n  faCheckCircle,\r\n  faLink,\r\n  faGlobeAmericas,\r\n  faPen,\r\n  faImage,\r\n} from '@fortawesome/free-solid-svg-icons';\r\n\r\nimport { faInstagram, faFacebook } from '@fortawesome/free-brands-svg-icons';\r\nimport { faChevronRight, faChevronLeft } from './custom-icons';\r\n\r\nlibrary.add(\r\n  faEye,\r\n  faEyeSlash,\r\n  faTimesCircle,\r\n  faSmile,\r\n  faInstagram,\r\n  faFacebook,\r\n  faCopy,\r\n  faClipboardCheck,\r\n  faPlus,\r\n  faCloudUploadAlt,\r\n  faSearch,\r\n  faSave,\r\n  faTrashAlt,\r\n  faPlay,\r\n  faPause,\r\n  faBell,\r\n  faBellSlash,\r\n  faCheckCircle,\r\n  faChevronRight,\r\n  faChevronLeft,\r\n  faLink,\r\n  faGlobeAmericas,\r\n  faPen,\r\n  faImage\r\n);\r\n\r\nexport const AwesomeIcon = ({ ...props }) => {\r\n  return <FontAwesomeIcon {...props} icon={[props.prefix, props.icon]} />;\r\n};\r\n\r\nAwesomeIcon.propTypes = {\r\n  icon: PropTypes.string.isRequired,\r\n  prefix: PropTypes.string,\r\n};\r\n\r\nAwesomeIcon.defaultProps = {\r\n  prefix: 'fas',\r\n};\r\n","export const faChevronRight = {\r\n  icon: [\r\n    256,\r\n    512,\r\n    [],\r\n    'f054',\r\n    'M17.525 36.465l-7.071 7.07c-4.686 4.686-4.686 12.284 0 16.971L205.947 256 10.454 451.494c-4.686 4.686-4.686 12.284 0 16.971l7.071 7.07c4.686 4.686 12.284 4.686 16.97 0l211.051-211.05c4.686-4.686 4.686-12.284 0-16.971L34.495 36.465c-4.686-4.687-12.284-4.687-16.97 0z',\r\n  ],\r\n  iconName: 'chevron-right',\r\n  prefix: 'fas',\r\n};\r\nexport const faChevronLeft = {\r\n  icon: [\r\n    256,\r\n    512,\r\n    [],\r\n    'f053',\r\n    'M238.475 475.535l7.071-7.07c4.686-4.686 4.686-12.284 0-16.971L50.053 256 245.546 60.506c4.686-4.686 4.686-12.284 0-16.971l-7.071-7.07c-4.686-4.686-12.284-4.686-16.97 0L10.454 247.515c-4.686 4.686-4.686 12.284 0 16.971l211.051 211.05c4.686 4.686 12.284 4.686 16.97-.001z',\r\n  ],\r\n  iconName: 'chevron-left',\r\n  prefix: 'fas',\r\n};\r\n","import React, { createContext, useContext } from 'react';\r\nimport io from 'socket.io-client';\r\n\r\nvar socket = io();\r\nconst SocketContext = createContext(socket);\r\nexport const useSocket = () => useContext(SocketContext);\r\n\r\nexport const SocketProvider = (props) => {\r\n  return (\r\n    <>\r\n      <SocketContext.Provider value={socket} {...props} />\r\n    </>\r\n  );\r\n};\r\n","import axios from 'axios';\r\n\r\nexport const postClient = (data) =>\r\n  axios\r\n    .post('/clients', data, {\r\n      headers: { 'content-type': 'multipart/form-data' },\r\n    })\r\n    .then(({ data }) => data);\r\nexport const getClients = () => axios.get('clients').then(({ data }) => data);\r\n","import axios from 'axios';\r\n\r\nexport const getPosts = (key, { client, type, from, to }) =>\r\n  axios.get(`/posts/${client}/${type}/${from}/${to}/`).then(({ data }) => data);\r\n\r\nexport const createPost = ({ client, ...args }) => {\r\n  return axios.post(`/posts/${client}`, { ...args }).then(({ data }) => data);\r\n};\r\nexport const deletePost = (id) => {\r\n  return axios.delete(`/posts/${id}`).then(({ data }) => data);\r\n};\r\nexport const putPost = ({ id, data }) =>\r\n  axios.put(`/posts/${id}`, data).then(({ data }) => data);\r\n","import { Button } from '@material-ui/core';\r\nimport React, { useEffect, useState } from 'react';\r\nimport { useAuth } from 'services';\r\nimport { urlBase64ToUint8Array } from 'utils';\r\nimport axios from 'axios';\r\nimport { AwesomeIcon } from 'ui/components/Icons/Icon';\r\n\r\nconst options = {\r\n  userVisibleOnly: true,\r\n  applicationServerKey: urlBase64ToUint8Array(\r\n    'BODI-sL_suVRxxD-ek-DvGQ2yBNTa1pyKpdxpc2jrk_g1C3BJhhn56gNYRPkSKdx1E0k354xlu-v_29PnVEeGKU'\r\n  ),\r\n};\r\nconst requestPermission = () =>\r\n  new Promise((resolve, reject) => {\r\n    // Let's check if the browser supports notifications\r\n    if (!('Notification' in window)) {\r\n      alert('This browser does not support desktop notification');\r\n    }\r\n\r\n    // Let's check whether notification permissions have already been granted\r\n    else if (Notification.permission === 'granted') {\r\n      resolve('granted');\r\n    }\r\n\r\n    // Otherwise, we need to ask the user for permission\r\n    else {\r\n      Notification.requestPermission()\r\n        .then(function (permission) {\r\n          console.log(permission);\r\n          // If the user accepts, let's create a notification\r\n          if (permission === 'granted') {\r\n            new Notification('Thanks you will be notified!');\r\n            resolve('granted');\r\n          }\r\n        })\r\n        .catch((e) => {\r\n          console.log(e);\r\n          reject('denied');\r\n        });\r\n    }\r\n\r\n    // At last, if the user has denied notifications, and you\r\n    // want to be respectful there is no need to bother them any more.\r\n  });\r\n\r\nexport const GetNotified = (props) => {\r\n  const { user } = useAuth();\r\n  const [enabled, setEnabled] = useState();\r\n\r\n  useEffect(() => {\r\n    (async function () {\r\n      console.log('hi');\r\n      if (Notification.permission !== 'granted') return;\r\n      const registration = await navigator.serviceWorker.ready;\r\n      console.log(registration);\r\n      const subscription = await registration.pushManager.getSubscription();\r\n      if (subscription) return setEnabled(true);\r\n    })();\r\n  }, []);\r\n  const handleClick = async () => {\r\n    try {\r\n      await requestPermission();\r\n      const registration = await navigator.serviceWorker.ready;\r\n      console.log('registering push');\r\n      const subscription = await registration.pushManager.subscribe(options);\r\n      console.log('Registered push');\r\n      axios.post('/subscription', subscription);\r\n    } catch (e) {\r\n      console.log(e);\r\n    }\r\n  };\r\n\r\n  return user.role === 'proofreader' ? (\r\n    <Button\r\n      {...props}\r\n      onClick={handleClick}\r\n      startIcon={<AwesomeIcon icon={enabled ? 'bell' : 'bell-slash'} />}\r\n    >\r\n      {enabled ? 'notifications enabled' : 'enable notifications'}\r\n    </Button>\r\n  ) : null;\r\n};\r\n","export function urlBase64ToUint8Array(base64String) {\r\n  const padding = '='.repeat((4 - (base64String.length % 4)) % 4);\r\n  const base64 = (base64String + padding).replace(/-/g, '+').replace(/_/g, '/');\r\n\r\n  const rawData = window.atob(base64);\r\n  const outputArray = new Uint8Array(rawData.length);\r\n\r\n  for (let i = 0; i < rawData.length; ++i) {\r\n    outputArray[i] = rawData.charCodeAt(i);\r\n  }\r\n  return outputArray;\r\n}\r\n","import React from 'react';\r\nimport {\r\n  AppBar,\r\n  Avatar,\r\n  Box,\r\n  Button,\r\n  Grid,\r\n  Link,\r\n  makeStyles,\r\n} from '@material-ui/core';\r\nimport { useAuth } from 'services/auth-provider';\r\nimport { Link as RouterLink, useRouteMatch } from 'react-router-dom';\r\nimport { GetNotified } from './GetNotified';\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n  appBar: ({ type }) => ({\r\n    marginBottom: '1rem',\r\n    background: type ? theme.palette[type] : theme.palette.primary.main,\r\n    transition: '0.3s',\r\n  }),\r\n}));\r\n\r\nconst extensionLink = {\r\n  chrome:\r\n    'https://chrome.google.com/webstore/detail/grammar-and-spell-checker/oldceeleldhonbafppcapldpdifcinji',\r\n  firefox:\r\n    'https://addons.mozilla.org/en-GB/firefox/addon/languagetool/?utm_source=external-ltp-homepage',\r\n};\r\n\r\nconst getBrowser = () => {\r\n  var isFirefox = typeof InstallTrigger !== 'undefined';\r\n  if (isFirefox) return 'firefox';\r\n  return 'chrome';\r\n};\r\nexport const Nav = () => {\r\n  const { logout, user } = useAuth();\r\n  let dateParams = useRouteMatch('/:client/posts/:type');\r\n\r\n  const classes = useStyles({ type: dateParams && dateParams.params.type });\r\n  return (\r\n    <AppBar position=\"static\" className={classes.appBar}>\r\n      <Box p={1} clone>\r\n        <Grid container justify=\"space-between\" alignItems=\"center\">\r\n          <div>\r\n            <Link\r\n              component={RouterLink}\r\n              to=\"/\"\r\n              color=\"inherit\"\r\n              style={{ marginRight: '8px' }}\r\n            >\r\n              Dashboard\r\n            </Link>\r\n          </div>\r\n          <Grid container style={{ width: 'auto' }} justify=\"flex-end\">\r\n            <GetNotified color=\"inherit\" />\r\n            <Button\r\n              onClick={() => window.open(extensionLink[getBrowser()], '_blank')}\r\n              color=\"inherit\"\r\n            >\r\n              Install Spellchecker\r\n            </Button>\r\n            <Button onClick={logout} color=\"inherit\">\r\n              Logout\r\n            </Button>\r\n            <Avatar>{user.username.slice(0, 1).toUpperCase()}</Avatar>\r\n          </Grid>\r\n        </Grid>\r\n      </Box>\r\n    </AppBar>\r\n  );\r\n};\r\n","import React, { Component, Suspense } from 'react';\r\nimport { Switch, Route } from 'react-router-dom';\r\n\r\nimport { Nav } from './Nav';\r\n// import { Footer } from './Footer';\r\n\r\nconst Dashboard = React.lazy(() => import('../pages/Dashboard'));\r\nconst Posts = React.lazy(() => import('../pages/Posts'));\r\nconst ClientView = React.lazy(() => import('pages/ClientView'));\r\n\r\nexport default class MainRouter extends Component {\r\n  render() {\r\n    return (\r\n      <>\r\n        <Nav />\r\n\r\n        <Suspense fallback={null}>\r\n          <div className=\"main-content\">\r\n            <Switch>\r\n              <Route path=\"/:client/posts/:type\" component={Posts} />\r\n              {/* /from/:from/to/:to */}\r\n              <Route exact path=\"/preview/:id\" component={ClientView} />\r\n              <Route exact path=\"/\" component={Dashboard} />\r\n            </Switch>\r\n            {/* <Footer /> */}\r\n          </div>\r\n        </Suspense>\r\n      </>\r\n    );\r\n  }\r\n}\r\n","import React from 'react';\r\nimport { SocketProvider } from 'services/socket-provider';\r\nimport MainRouter from './router';\r\n\r\nconst AuthenticatedApp = () => {\r\n  return (\r\n    <SocketProvider>\r\n      <MainRouter />\r\n    </SocketProvider>\r\n  );\r\n};\r\nexport default AuthenticatedApp;\r\n"],"sourceRoot":""}