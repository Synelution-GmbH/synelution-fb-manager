{"version":3,"sources":["../node_modules/@babel/runtime/helpers/classCallCheck.js","../node_modules/@babel/runtime/helpers/createClass.js","../node_modules/@babel/runtime/helpers/possibleConstructorReturn.js","../node_modules/@babel/runtime/helpers/getPrototypeOf.js","../node_modules/@babel/runtime/helpers/inherits.js","../../src/index.ts","../node_modules/scroll-into-view-if-needed/es/index.js","../../../../node_modules/@babel/runtime/helpers/esm/defineProperty.js","../../../../node_modules/@babel/runtime/helpers/esm/objectWithoutPropertiesLoose.js","../../../../node_modules/@babel/runtime/helpers/esm/objectWithoutProperties.js","../../src/utils/key.ts","../../src/utils/weak-maps.ts","../../src/utils/dom.ts","../../src/plugin/react-editor.ts","../../src/hooks/use-focused.ts","../../src/hooks/use-editor.tsx","../../src/hooks/use-slate.tsx","../../src/components/slate.tsx","../../src/hooks/use-read-only.ts","../../src/hooks/use-selected.ts","../../src/plugin/with-react.ts","../../src/components/string.tsx","../../src/components/leaf.tsx","../../src/hooks/use-isomorphic-layout-effect.ts","../../src/components/text.tsx","../../src/components/element.tsx","../../src/components/children.tsx","../../src/utils/environment.ts","../../src/utils/hotkeys.ts","../../src/components/editable.tsx","../node_modules/@babel/runtime/helpers/defineProperty.js","../node_modules/@babel/runtime/helpers/assertThisInitialized.js","../node_modules/dayjs/dayjs.min.js","../node_modules/slate/node_modules/is-plain-object/index.es.js","../../src/utils/string.ts","../../src/interfaces/editor.ts","../../src/interfaces/element.ts","../../src/interfaces/location.ts","../../src/interfaces/node.ts","../../src/interfaces/operation.ts","../../src/interfaces/path.ts","../../src/interfaces/path-ref.ts","../../src/interfaces/point.ts","../../src/interfaces/point-ref.ts","../../src/interfaces/range.ts","../../src/interfaces/range-ref.ts","../../src/interfaces/text.ts","../../src/transforms/node.ts","../../src/transforms/index.ts","../../src/transforms/general.ts","../../src/transforms/selection.ts","../../src/transforms/text.ts","../../src/create-editor.ts","../node_modules/@babel/runtime/helpers/extends.js","../node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createForOfIteratorHelper.js","../node_modules/lodash/isObject.js","../node_modules/emoji-mart/dist-es/utils/data.js","../node_modules/emoji-mart/dist-es/polyfills/stringFromCodePoint.js","../node_modules/emoji-mart/dist-es/utils/index.js","../node_modules/emoji-mart/dist-es/utils/store.js","../node_modules/emoji-mart/dist-es/utils/emoji-index/nimble-emoji-index.js","../node_modules/emoji-mart/dist-es/utils/emoji-index/emoji-index.js","../node_modules/emoji-mart/dist-es/utils/frequently.js","../node_modules/emoji-mart/dist-es/svgs/index.js","../node_modules/emoji-mart/dist-es/utils/shared-props.js","../node_modules/emoji-mart/dist-es/components/anchors.js","../node_modules/emoji-mart/dist-es/utils/shared-default-props.js","../node_modules/emoji-mart/dist-es/components/emoji/nimble-emoji.js","../node_modules/emoji-mart/dist-es/components/not-found.js","../node_modules/emoji-mart/dist-es/components/category.js","../node_modules/emoji-mart/dist-es/components/skins.js","../node_modules/emoji-mart/dist-es/components/skins-emoji.js","../node_modules/emoji-mart/dist-es/components/skins-dot.js","../node_modules/emoji-mart/dist-es/components/preview.js","../node_modules/emoji-mart/dist-es/components/search.js","../node_modules/emoji-mart/dist-es/components/picker/nimble-picker.js","../node_modules/emoji-mart/dist-es/components/picker/picker.js","../node_modules/emoji-mart/dist-es/components/emoji/emoji.js","../node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/toConsumableArray.js","../node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/arrayWithoutHoles.js","../node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/iterableToArray.js","../node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/nonIterableSpread.js","../node_modules/slate-history/node_modules/is-plain-object/index.es.js","../../src/history.ts","../../src/history-editor.ts","../../src/with-history.ts","../node_modules/@babel/runtime/helpers/typeof.js","../node_modules/lodash/_root.js","../node_modules/lodash/_Symbol.js","../node_modules/@babel/runtime/helpers/setPrototypeOf.js","../node_modules/lodash/throttle.js","../node_modules/lodash/debounce.js","../node_modules/lodash/now.js","../node_modules/lodash/_freeGlobal.js","../node_modules/lodash/toNumber.js","../node_modules/lodash/isSymbol.js","../node_modules/lodash/_baseGetTag.js","../node_modules/lodash/_getRawTag.js","../node_modules/lodash/_objectToString.js","../node_modules/lodash/isObjectLike.js","../node_modules/direction/index.js","../node_modules/is-hotkey/lib/index.js","../node_modules/esrever/esrever.js","../node_modules/webpack/buildin/module.js","../../src/env.ts","../../src/types-internal.ts","../../src/extends.ts","../../src/common.ts","../../src/scope.ts","../../src/finalize.ts","../../src/patches.ts","../../src/proxy.ts","../../src/es5.ts","../../src/map.ts","../../src/set.ts","../../node_modules/tslib/tslib.es6.js","../../src/immer.ts","../node_modules/@material-ui/lab/esm/internal/svg-icons/SuccessOutlined.js","../node_modules/@material-ui/lab/esm/internal/svg-icons/ReportProblemOutlined.js","../node_modules/@material-ui/lab/esm/internal/svg-icons/ErrorOutline.js","../node_modules/@material-ui/lab/esm/internal/svg-icons/InfoOutlined.js","../node_modules/@material-ui/lab/esm/internal/svg-icons/Close.js","../node_modules/@material-ui/lab/esm/Alert/Alert.js","../node_modules/@material-ui/core/esm/ClickAwayListener/ClickAwayListener.js","../node_modules/@material-ui/core/esm/SnackbarContent/SnackbarContent.js","../node_modules/@material-ui/core/esm/Snackbar/Snackbar.js"],"names":["module","exports","instance","Constructor","TypeError","_defineProperties","target","props","i","length","descriptor","enumerable","configurable","writable","Object","defineProperty","key","protoProps","staticProps","prototype","_typeof","assertThisInitialized","self","call","_getPrototypeOf","o","setPrototypeOf","getPrototypeOf","__proto__","subClass","superClass","create","constructor","value","isElement","el","nodeType","canOverflow","overflow","skipOverflowHiddenElements","isScrollable","clientHeight","scrollHeight","clientWidth","scrollWidth","style","getComputedStyle","overflowY","overflowX","frame","ownerDocument","defaultView","frameElement","e","alignNearest","scrollingEdgeStart","scrollingEdgeEnd","scrollingSize","scrollingBorderStart","scrollingBorderEnd","elementEdgeStart","elementEdgeEnd","elementSize","options","windowWithViewport","window","scrollMode","block","inline","boundary","checkBoundary","node","scrollingElement","document","documentElement","frames","cursor","parentNode","push","body","viewportWidth","visualViewport","width","innerWidth","viewportHeight","height","innerHeight","viewportX","scrollX","pageXOffset","viewportY","scrollY","pageYOffset","getBoundingClientRect","targetHeight","targetWidth","targetTop","top","targetRight","right","targetBottom","bottom","targetLeft","left","targetBlock","targetInline","computations","index","frameStyle","borderLeft","parseInt","borderLeftWidth","borderTop","borderTopWidth","borderRight","borderRightWidth","borderBottom","borderBottomWidth","blockScroll","inlineScroll","scrollbarWidth","offsetWidth","scrollbarHeight","offsetHeight","Math","max","scrollLeft","scrollTop","min","isOptionsObject","keys","scrollIntoView","targetIsDetached","contains","behavior","compute","computeOptions","getOptions","actions","canSmoothScroll","forEach","_ref","scroll","defaultBehavior","_defineProperty","obj","_objectWithoutProperties","source","excluded","sourceKeys","indexOf","objectWithoutPropertiesLoose","getOwnPropertySymbols","sourceSymbolKeys","propertyIsEnumerable","n","Key","NODE_TO_INDEX","NODE_TO_PARENT","EDITOR_TO_ELEMENT","ELEMENT_TO_NODE","KEY_TO_ELEMENT","NODE_TO_ELEMENT","NODE_TO_KEY","IS_READ_ONLY","IS_FOCUSED","EDITOR_TO_ON_CHANGE","PLACEHOLDER_SYMBOL","Symbol","isDOMElement","isDOMNode","isDOMText","getEditableChild","childNodes","child","triedForward","triedBackward","isDOMComment","direction","ReactEditor","findKey","findPath","path","parent","Editor","Error","JSON","isFocused","isReadOnly","blur","focus","preventScroll","deselect","selection","domSelection","Transforms","hasDOMNode","editable","editorEl","targetEl","err","insertData","editor","setFragmentData","toDOMNode","domNode","toDOMPoint","point","at","offset","start","Array","text","attr","end","domPoint","toDOMRange","isBackward","Range","domAnchor","domFocus","domRange","isStartAtZeroWidth","startNode","startEl","isEndAtZeroWidth","endNode","endEl","toSlateNode","domEl","findEventRange","event","clientX","clientY","x","y","rect","isPrev","edge","position","toSlatePoint","isLast","normalizeDOMPoint","nearestNode","textNode","voidNode","leafNode","range","contents","removals","slateNode","toSlateRange","anchorNode","anchorOffset","focusNode","focusOffset","isCollapsed","anchor","FocusedContext","createContext","EditorContext","useEditor","useContext","SlateContext","Slate","useState","context","useMemo","onContextChange","useCallback","onChange","setKey","useEffect","ReadOnlyContext","SelectedContext","withReact","op","matches","Path","apply","data","startVoid","endVoid","attach","r","zw","isNewline","span","fragment","string","encoded","encodeURIComponent","div","getPlainText","display","decoded","decodeURIComponent","parsed","lines","split","always","ReactDOM","String","parentPath","Node","leaf","React","isTrailing","isLineBreak","TextString","ZeroWidthString","MemoizedLeaf","renderLeaf","children","contentEditable","pointerEvents","verticalAlign","maxWidth","whiteSpace","opacity","userSelect","fontStyle","fontWeight","textDecoration","attributes","next","prev","Text","DefaultLeaf","useIsomorphicLayoutEffect","MemoizedText","ref","useRef","leaves","SlateText","MemoizedElement","renderElement","p","readOnly","isInline","decorate","decorations","element","dir","getDirection","Tag","color","outline","isRangeListEqual","DefaultElement","list","another","other","Children","isLeafBlock","Element","sel","ds","d","id","IS_APPLE","navigator","test","IS_FIREFOX","IS_SAFARI","IS_EDGE_LEGACY","HOTKEYS","bold","compose","moveBackward","moveForward","moveWordBackward","moveWordForward","deleteBackward","deleteForward","extendBackward","extendForward","italic","splitBlock","undo","APPLE_HOTKEYS","moveLineBackward","moveLineForward","deleteLineBackward","deleteLineForward","deleteWordBackward","deleteWordForward","extendLineBackward","extendLineForward","redo","transposeCharacter","WINDOWS_HOTKEYS","generic","apple","windows","isGeneric","isKeyHotkey","isApple","isWindows","isBold","isCompose","isMoveBackward","isMoveForward","isDeleteBackward","isDeleteForward","isDeleteLineBackward","isDeleteLineForward","isDeleteWordBackward","isDeleteWordForward","isExtendBackward","isExtendForward","isExtendLineBackward","isExtendLineForward","isItalic","isMoveLineBackward","isMoveLineForward","isMoveWordBackward","isMoveWordForward","isRedo","isSplitBlock","isTransposeCharacter","isUndo","HAS_BEFORE_INPUT_SUPPORT","Editable","onDOMBeforeInput","as","Component","useSlate","state","isComposing","isUpdatingSelection","latestElement","hasDomSelection","editorElement","hasDomSelectionInEditor","newDomRange","leafEl","setTimeout","hasEditableTarget","isDOMEventHandled","type","inputType","unit","onDOMSelectionChange","throttle","activeElement","anchorNodeSelectable","isTargetInsideVoid","focusNodeSelectable","placeholder","role","undefined","spellCheck","autoCorrect","autoCapitalize","suppressContentEditableWarning","wordWrap","onBeforeInput","isEventHandled","onBlur","relatedTarget","onClick","hasTarget","onCompositionEnd","onCompositionStart","onCopy","onCut","onDragOver","onDragStart","onDrop","onFocus","onKeyDown","nativeEvent","Hotkeys","reverse","onPaste","isPlainTextOnlyPaste","defaultDecorate","handler","ReferenceError","t","s","u","a","f","h","c","name","weekdays","months","$","join","l","z","utcOffset","abs","floor","m","date","year","month","clone","add","ceil","M","w","D","ms","Q","toLowerCase","replace","S","v","args","arguments","g","locale","$L","utc","$u","$x","$offset","this","parse","$d","Date","NaN","match","substring","UTC","init","$y","getFullYear","$M","getMonth","$D","getDate","$W","getDay","$H","getHours","$m","getMinutes","$s","getSeconds","$ms","getMilliseconds","$utils","isValid","toString","isSame","startOf","endOf","isAfter","isBefore","$g","set","unix","valueOf","getTime","toDate","slice","$locale","weekStart","$set","daysInMonth","get","Number","round","subtract","format","substr","meridiem","YY","YYYY","MM","MMM","monthsShort","MMMM","DD","dd","weekdaysMin","ddd","weekdaysShort","dddd","H","HH","hh","A","mm","ss","SSS","Z","getTimezoneOffset","diff","toJSON","toISOString","toUTCString","extend","isDayjs","en","Ls","isObjectObject","val","isArray","isPlainObject","ctor","prot","hasOwnProperty","DIRTY_PATHS","FLUSHING","NORMALIZING","PATH_REFS","POINT_REFS","RANGE_REFS","SPACE","PUNCTUATION","CHAMELEON","getCharacterDistance","charCode","isSurrogate","modifier","isModifier","isBMPEmoji","isVariationSelector","getWordDistance","started","char","rest","isWordCharacter","remaining","code","SURROGATE_START","above","voids","mode","addMark","after","distance","before","deleteFragment","edges","first","hasBlocks","hasInlines","hasTexts","insertBreak","insertFragment","insertNode","insertText","isBlock","isEditor","Operation","isEnd","Point","isEdge","isEmpty","isNormalizing","isStart","isVoid","last","levels","marks","isText","from","universal","Span","to","iterable","pass","isLower","hit","emit","normalize","force","getDirtyPaths","allPaths","entry","depth","pathRef","affinity","current","unref","pathRefs","refs","pointRef","pointRefs","available","isNewBlock","advance","reverseText","isFirst","previous","rangeRef","rangeRefs","removeMark","transform","createDraft","prevPath","newPath","truePath","newParent","newIndex","result","newProperties","properties","newNode","finishDraft","isDraft","unhangRange","endBlock","blockPath","skip","void","withoutNormalizing","fn","isElementList","isSpan","ancestor","root","childPath","common","descendant","produce","has","isNode","isNodeList","visited","nextIndex","isNodeOperation","isOperation","isOperationList","isSelectionOperation","isTextOperation","inverse","ancestors","paths","av","compare","endsAfter","bs","bv","endsAt","endsBefore","equals","isAncestor","isChild","isCommon","isDescendant","isParent","isPath","isSibling","relative","operation","onp","copy","PathRef","isPoint","PointRef","includes","isAfterStart","isBeforeEnd","intersection","isExpanded","isForward","isRange","affinityAnchor","affinityFocus","RangeRef","loose","isTextList","middle","off","NodeTransforms","insertNodes","hanging","select","nodes","isAtEnd","liftNodes","matchPath","parentNodeEntry","toPath","splitPath","mergeNodes","commonPath","isPreviousSibling","emptyAncestor","emptyRef","prevNode","moveNodes","toRef","targets","removeNodes","depths","setNodes","splitMode","k","splitNodes","deleteRange","beforeRef","voidMatch","afterPath","voidPath","afterRef","lowestPath","highestPath","unsetNodes","unwrapNodes","wrapNodes","commonNodeEntry","wrapperPath","lastPath","wrapper","commonNode","collapse","move","opts","setPoint","setSelection","oldProps","newProps","delete","furthestVoid","startBlock","isAcrossBlocks","isSingleText","startRef","endRef","inlineElementMatch","blockMatch","isBlockStart","isBlockEnd","mergeStart","mergeEnd","matcher","starts","middles","ends","starting","isInlineStart","isInlineEnd","middleRef","createEditor","operations","dirtyPaths","oldDirtyPaths","newDirtyPaths","Promise","getFragment","normalizeNode","shouldHaveInlines","descendants","previousPath","oldAncestors","newAncestors","nextPath","_extends","assign","_createForOfIteratorHelper","iterator","F","done","_e","it","normalCompletion","didErr","step","_e2","mapping","unified","non_qualified","has_img_apple","has_img_google","has_img_twitter","has_img_facebook","keywords","sheet","emoticons","short_names","added_in","buildSearch","emoji","search","addToSearch","strings","uncompress","compressed","emojis","unshift","sheet_x","sheet_y","toFixed","_String","fromCodePoint","highSurrogate","lowSurrogate","MAX_SIZE","codeUnits","codePoint","isFinite","RangeError","fromCharCode","COLONS_REGEX","SKINS","unifiedToNative","codePoints","map","concat","stringFromCodePoint","sanitize","skin_tone","skin_variations","custom","customCategory","imageUrl","colons","skin","getSanitizedData","getData","emojiData","aliases","variations","stringify","skinKey","variationData","shift","uniq","arr","reduce","acc","item","intersect","b","uniqA","uniqB","filter","deepMerge","originalValue","getter","setter","NAMESPACE","isLocalStorageSupported","localStorage","update","setNamespace","namespace","setHandlers","handlers","NimbleEmojiIndex","_classCallCheck","originalPool","customEmojisList","buildIndex","_createClass","_this","_loop","emoticon","skinTone","pool","_this2","emojiId","_this3","clearCustomEmojis","_this4","emojisToShowFilter","maxResults","include","exclude","_ref$custom","addCustomToPool","store","results","values","allResults","categories","category","isIncluded","isExcluded","customIsIncluded","customIsExcluded","aPool","aIndex","charIndex","_char","scores","sub","subIndex","score","sort","aScore","bScore","localeCompare","emojiIndex","frequently","initialized","DEFAULTS","defaults","perLine","quantity","frequentlyKeys","sliced","pop","activity","createElement","xmlns","viewBox","rx","flags","foods","nature","objects","people","places","recent","symbols","EmojiPropTypes","PropTypes","object","isRequired","onOver","func","onLeave","fallback","backgroundImageFn","bool","forceSize","tooltip","useButton","oneOf","sheetSize","sheetColumns","number","sheetRows","size","oneOfType","PickerPropTypes","onSelect","onSkinChange","emojiSize","i18n","title","showPreview","showSkinTones","emojiTooltip","theme","arrayOf","autoFocus","enableFrequentEmojiSort","shape","spriteUrl","skinEmoji","notFound","notFoundEmoji","icons","Anchors","_React$PureComponent","_possibleConstructorReturn","defaultCategory","selected","handleClick","bind","_assertThisInitialized","_inherits","currentTarget","getAttribute","_this$props","onAnchorClick","_this$props2","className","categorieslabel","isSelected","iconId","startsWith","backgroundColor","PureComponent","propTypes","array","defaultProps","EmojiDefaultProps","PickerDefaultProps","defaultSkin","ownKeys","enumerableOnly","sym","getOwnPropertyDescriptor","_objectSpread","getOwnPropertyDescriptors","defineProperties","_getData","_getPosition","_getData2","multiplyX","multiplyY","_getSanitizedData","_isNumeric","isNaN","parseFloat","NimbleEmoji","nativeEmoji","label","Boolean","fontSize","wordBreak","backgroundImage","backgroundSize","backgroundPosition","backgroundRepeat","html","_convertStyleToCSS","_handleClick","onMouseEnter","_handleOver","onMouseLeave","_handleLeave","NotFound","emojiProps","notfound","Category","_React$Component","setContainerRef","setLabelRef","margin","minMargin","memoizeSize","nextProps","nextState","_native","hasStickyPosition","nextPerLine","nextNative","nextHasStickyPosition","nextEmojis","nextEmojiProps","nextSkin","nextSize","nextSet","shouldUpdate","container","maxMargin","parentElement","_this$container$getBo","parentTop","labelHeight","frequentlyUsed","getEmojis","_this$props3","labelStyles","labelSpanStyles","containerStyles","Skins","opened","setState","SkinsEmoji","_Skins","skinToneNodes","skintext","SkinsDot","handleKeyDown","keyCode","preventDefault","visible","skintones","tabIndex","Preview","skinsProps","idleEmoji","_emojiData$emoticons","knownEmoticons","listedEmoticons","short_name","Search","icon","isSearching","setRef","clear","handleKeyUp","handleChange","doIdleTask","requestIdleCallback","running","throttleIdleTask","input","onSearch","_this$state","inputId","htmlFor","onKeyUp","disabled","I18N","1","2","3","4","5","6","NimblePicker","CUSTOM","RECENT_CATEGORY","SEARCH_CATEGORY","firstRender","allCategories","customCategories","customCategoriesCreated","customEmoji","hideRecent","categoryIndex","newEmojis","newCategory","includeRecent","excludeRecent","setAnchorsRef","handleAnchorClick","setSearchRef","handleSearch","setScrollRef","handleScroll","handleScrollPaint","handleEmojiOver","handleEmojiLeave","handleEmojiClick","handleEmojiSelect","setPreviewRef","handleSkinChange","handleDarkMatchMediaChange","testStickyPosition","firstRenderTimeout","updateCategoriesSize","clearTimeout","leaveTimeout","darkMatchMedia","removeListener","stickyTestElement","prefix","matchMedia","addListener","media","preview","component","categoryRefs","forceUpdate","requestAnimationFrame","updateDisplay","waitingForPaint","activeCategory","scrollingDown","minTop","ii","active","anchors","categoryName","scrollToComponent","newState","handled","appendChild","removeChild","measureScrollbar","getPreferredTheme","onScroll","getCategories","setCategoryRef","Picker","Emoji","_toConsumableArray","arrayLikeToArray","iter","unsupportedIterableToArray","History","SAVING","MERGING","HistoryEditor","isHistoryEditor","isMerging","isSaving","withoutMerging","withoutSaving","withHistory","undos","redos","history","batch","inverseOps","lastBatch","lastOp","overwrite","shouldOverwrite","save","merge","shouldSave","shouldMerge","shouldClear","freeGlobal","require","freeSelf","Function","_setPrototypeOf","debounce","isObject","wait","leading","trailing","now","toNumber","nativeMax","nativeMin","lastArgs","lastThis","maxWait","timerId","lastCallTime","lastInvokeTime","maxing","invokeFunc","time","thisArg","leadingEdge","timerExpired","shouldInvoke","timeSinceLastCall","trailingEdge","timeWaiting","remainingWait","debounced","isInvoking","cancel","flush","global","isSymbol","reTrim","reIsBadHex","reIsBinary","reIsOctal","freeParseInt","isBinary","baseGetTag","isObjectLike","getRawTag","objectToString","symToStringTag","toStringTag","objectProto","nativeObjectToString","isOwn","tag","unmasked","rtl","ltr","LTR","RegExp","IS_MAC","platform","MODIFIERS","alt","control","meta","ALIASES","break","cmd","command","ctl","ctrl","del","down","esc","ins","mod","opt","option","return","space","spacebar","up","win","CODES","backspace","tab","enter","pause","capslock","escape","pageup","pagedown","home","arrowleft","arrowup","arrowright","arrowdown","insert","numlock","scrolllock","'","isHotkey","hotkey","parseHotkey","check","some","compareHotkey","byKey","ret","_iteratorNormalCompletion","_didIteratorError","_iteratorError","_step","_iterator","optional","endsWith","toKeyName","which","toKeyCode","expected","actual","toUpperCase","charCodeAt","default","isCodeHotkey","freeExports","regexSymbolWithCombiningMarks","regexSurrogatePair","esrever","$0","$1","$2","charAt","define","webpackPolyfill","deprecate","hasSymbol","hasMap","Map","hasSet","Set","NOTHING","_a","DRAFTABLE","DRAFT_STATE","iteratorSymbol","extendStatics","__extends","__","isDraftable","proto","isMap","isSet","Archtype","ProxyType","Reflect","each","getArchtype","thing","die","prop","is","latest","shallowCopy","base","invokeGetters","desc","freeze","deep","dontMutateFrozenCollections","ImmerScope","scope","revoke","draft","processResult","immer","baseDraft","isReplaced","finalize","maybeFreeze","finalizeTree","assigned","copy_1","basePath","patches","inversePatches","origValue","assignedValue","generatePatchesFromAssigned","_b","delta","replaceCount","generateArrayPatches","generateSetPatches","generatePatches","finalizeProperty","childValue","isDraftProp","parentValue","isSetMember","rootPath","rootState","propOrOldValue","objectTraps","drafts","peek","baseValue","prepareCopy","markChanged","deleteProperty","owner","arrayTraps","willFinalizeES5","markChangesSweep","markChangesRecursively","markChangedES5","hasArrayChanges","createES5Proxy","clonePotentialDraft","descriptors","assertUnrevoked","proxyProperty","isEnumerable","modified","finalizing","finalized","revoked","isManual","createHiddenProperty","hasObjectChanges","state_1","DraftMap","cb","DraftSet","applyPatches","patch","deepClonePatchValue","cloned","__spreadArrays","il","j","jl","configDefaults","useProxies","Proxy","autoFreeze","process","verifyMinified","onAssign","onDelete","config","produceWithPatches","Immer","recipe","defaultBase_1","self_1","patchListener","scope_1","proxy","createProxy","hasError","error","arg1","arg2","proxyMap","proxySet","traps","createSvgIcon","defaultIconMapping","success","SuccessOutlinedIcon","warning","ReportProblemOutlinedIcon","ErrorOutlineIcon","info","InfoOutlinedIcon","CloseIcon","Alert","action","classes","_props$closeText","closeText","_props$iconMapping","iconMapping","onClose","_props$role","_props$severity","severity","_props$variant","variant","Paper","square","elevation","clsx","capitalize","message","IconButton","withStyles","getColor","palette","darken","lighten","getBackgroundColor","typography","body2","borderRadius","padding","standardSuccess","main","standardInfo","standardWarning","standardError","outlinedSuccess","border","outlinedInfo","outlinedWarning","outlinedError","filledSuccess","fontWeightMedium","filledInfo","filledWarning","filledError","marginRight","alignItems","marginLeft","paddingLeft","mapEventPropToEvent","eventProp","ClickAwayListener","_props$disableReactTr","disableReactTree","_props$mouseEvent","mouseEvent","onClickAway","_props$touchEvent","touchEvent","movedRef","nodeRef","mountedRef","syntheticEventRef","handleOwnRef","handleRef","useForkRef","handleClickAway","useEventCallback","insideReactTree","clickedRootScrollbar","insideDOM","composedPath","createHandleSynthetic","handlerName","childrenPropsHandler","childrenProps","mappedTouchEvent","doc","handleTouchMove","addEventListener","removeEventListener","mappedMouseEvent","SnackbarContent","emphasis","emphasize","background","getContrastText","flexWrap","flexGrow","breakpoints","minWidth","Snackbar","_props$anchorOrigin","anchorOrigin","vertical","horizontal","_props$autoHideDurati","autoHideDuration","ClickAwayListenerProps","ContentProps","_props$disableWindowB","disableWindowBlurListener","onEnter","onEntered","onEntering","onExit","onExited","onExiting","open","resumeHideDuration","_props$TransitionComp","TransitionComponent","Grow","_props$transitionDura","transitionDuration","duration","enteringScreen","exit","leavingScreen","TransitionProps","timerAutoHide","_React$useState","exited","setExited","handleClose","setAutoHideTimer","autoHideDurationParam","handlePause","handleResume","appear","in","createChainedFunction","timeout","top1","bottom1","justifyContent","top3","bottom3","right3","left3","center","zIndex","snackbar","anchorOriginTopCenter","anchorOriginBottomCenter","anchorOriginTopRight","anchorOriginBottomRight","anchorOriginTopLeft","anchorOriginBottomLeft","flip"],"mappings":"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","file":"static/js/2.0286cc32.chunk.js","sourcesContent":["function _classCallCheck(instance, Constructor) {\n  if (!(instance instanceof Constructor)) {\n    throw new TypeError(\"Cannot call a class as a function\");\n  }\n}\n\nmodule.exports = _classCallCheck;","function _defineProperties(target, props) {\n  for (var i = 0; i < props.length; i++) {\n    var descriptor = props[i];\n    descriptor.enumerable = descriptor.enumerable || false;\n    descriptor.configurable = true;\n    if (\"value\" in descriptor) descriptor.writable = true;\n    Object.defineProperty(target, descriptor.key, descriptor);\n  }\n}\n\nfunction _createClass(Constructor, protoProps, staticProps) {\n  if (protoProps) _defineProperties(Constructor.prototype, protoProps);\n  if (staticProps) _defineProperties(Constructor, staticProps);\n  return Constructor;\n}\n\nmodule.exports = _createClass;","var _typeof = require(\"../helpers/typeof\");\n\nvar assertThisInitialized = require(\"./assertThisInitialized\");\n\nfunction _possibleConstructorReturn(self, call) {\n  if (call && (_typeof(call) === \"object\" || typeof call === \"function\")) {\n    return call;\n  }\n\n  return assertThisInitialized(self);\n}\n\nmodule.exports = _possibleConstructorReturn;","function _getPrototypeOf(o) {\n  module.exports = _getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf : function _getPrototypeOf(o) {\n    return o.__proto__ || Object.getPrototypeOf(o);\n  };\n  return _getPrototypeOf(o);\n}\n\nmodule.exports = _getPrototypeOf;","var setPrototypeOf = require(\"./setPrototypeOf\");\n\nfunction _inherits(subClass, superClass) {\n  if (typeof superClass !== \"function\" && superClass !== null) {\n    throw new TypeError(\"Super expression must either be null or a function\");\n  }\n\n  subClass.prototype = Object.create(superClass && superClass.prototype, {\n    constructor: {\n      value: subClass,\n      writable: true,\n      configurable: true\n    }\n  });\n  if (superClass) setPrototypeOf(subClass, superClass);\n}\n\nmodule.exports = _inherits;","import {\n\tIProduce,\n\tIProduceWithPatches,\n\tImmer,\n\tDraft,\n\tImmutable\n} from \"./internal\"\n\nexport {\n\tDraft,\n\tImmutable,\n\tPatch,\n\tPatchListener,\n\toriginal,\n\tisDraft,\n\tisDraftable,\n\tNOTHING as nothing,\n\tDRAFTABLE as immerable\n} from \"./internal\"\n\nconst immer = new Immer()\n\n/**\n * The `produce` function takes a value and a \"recipe function\" (whose\n * return value often depends on the base state). The recipe function is\n * free to mutate its first argument however it wants. All mutations are\n * only ever applied to a __copy__ of the base state.\n *\n * Pass only a function to create a \"curried producer\" which relieves you\n * from passing the recipe function every time.\n *\n * Only plain objects and arrays are made mutable. All other objects are\n * considered uncopyable.\n *\n * Note: This function is __bound__ to its `Immer` instance.\n *\n * @param {any} base - the initial state\n * @param {Function} producer - function that receives a proxy of the base state as first argument and which can be freely modified\n * @param {Function} patchListener - optional function that will be called with all the patches produced here\n * @returns {any} a new state, or the initial state if nothing was modified\n */\nexport const produce: IProduce = immer.produce\nexport default produce\n\n/**\n * Like `produce`, but `produceWithPatches` always returns a tuple\n * [nextState, patches, inversePatches] (instead of just the next state)\n */\nexport const produceWithPatches: IProduceWithPatches = immer.produceWithPatches.bind(\n\timmer\n)\n\n/**\n * Pass true to automatically freeze all copies created by Immer.\n *\n * By default, auto-freezing is disabled in production.\n */\nexport const setAutoFreeze = immer.setAutoFreeze.bind(immer)\n\n/**\n * Pass true to use the ES2015 `Proxy` class when creating drafts, which is\n * always faster than using ES5 proxies.\n *\n * By default, feature detection is used, so calling this is rarely necessary.\n */\nexport const setUseProxies = immer.setUseProxies.bind(immer)\n\n/**\n * Apply an array of Immer patches to the first argument.\n *\n * This function is a producer, which means copy-on-write is in effect.\n */\nexport const applyPatches = immer.applyPatches.bind(immer)\n\n/**\n * Create an Immer draft from the given base state, which may be a draft itself.\n * The draft can be modified until you finalize it with the `finishDraft` function.\n */\nexport const createDraft = immer.createDraft.bind(immer)\n\n/**\n * Finalize an Immer draft from a `createDraft` call, returning the base state\n * (if no changes were made) or a modified copy. The draft must *not* be\n * mutated afterwards.\n *\n * Pass a function as the 2nd argument to generate Immer patches based on the\n * changes that were made.\n */\nexport const finishDraft = immer.finishDraft.bind(immer)\n\n/**\n * This function is actually a no-op, but can be used to cast an immutable type\n * to an draft type and make TypeScript happy\n *\n * @param value\n */\nexport function castDraft<T>(value: T): Draft<T> {\n\treturn value as any\n}\n\n/**\n * This function is actually a no-op, but can be used to cast a mutable type\n * to an immutable type and make TypeScript happy\n * @param value\n */\nexport function castImmutable<T>(value: T): Immutable<T> {\n\treturn value as any\n}\n\nexport {Immer}\n","import compute from 'compute-scroll-into-view';\n\nfunction isOptionsObject(options) {\n  return options === Object(options) && Object.keys(options).length !== 0;\n}\n\nfunction defaultBehavior(actions, behavior) {\n  if (behavior === void 0) {\n    behavior = 'auto';\n  }\n\n  var canSmoothScroll = ('scrollBehavior' in document.body.style);\n  actions.forEach(function (_ref) {\n    var el = _ref.el,\n        top = _ref.top,\n        left = _ref.left;\n\n    if (el.scroll && canSmoothScroll) {\n      el.scroll({\n        top: top,\n        left: left,\n        behavior: behavior\n      });\n    } else {\n      el.scrollTop = top;\n      el.scrollLeft = left;\n    }\n  });\n}\n\nfunction getOptions(options) {\n  if (options === false) {\n    return {\n      block: 'end',\n      inline: 'nearest'\n    };\n  }\n\n  if (isOptionsObject(options)) {\n    return options;\n  }\n\n  return {\n    block: 'start',\n    inline: 'nearest'\n  };\n}\n\nfunction scrollIntoView(target, options) {\n  var targetIsDetached = !target.ownerDocument.documentElement.contains(target);\n\n  if (isOptionsObject(options) && typeof options.behavior === 'function') {\n    return options.behavior(targetIsDetached ? [] : compute(target, options));\n  }\n\n  if (targetIsDetached) {\n    return;\n  }\n\n  var computeOptions = getOptions(options);\n  return defaultBehavior(compute(target, computeOptions), computeOptions.behavior);\n}\n\nexport default scrollIntoView;","export default function _defineProperty(obj, key, value) {\n  if (key in obj) {\n    Object.defineProperty(obj, key, {\n      value: value,\n      enumerable: true,\n      configurable: true,\n      writable: true\n    });\n  } else {\n    obj[key] = value;\n  }\n\n  return obj;\n}","export default function _objectWithoutPropertiesLoose(source, excluded) {\n  if (source == null) return {};\n  var target = {};\n  var sourceKeys = Object.keys(source);\n  var key, i;\n\n  for (i = 0; i < sourceKeys.length; i++) {\n    key = sourceKeys[i];\n    if (excluded.indexOf(key) >= 0) continue;\n    target[key] = source[key];\n  }\n\n  return target;\n}","import objectWithoutPropertiesLoose from \"./objectWithoutPropertiesLoose\";\nexport default function _objectWithoutProperties(source, excluded) {\n  if (source == null) return {};\n  var target = objectWithoutPropertiesLoose(source, excluded);\n  var key, i;\n\n  if (Object.getOwnPropertySymbols) {\n    var sourceSymbolKeys = Object.getOwnPropertySymbols(source);\n\n    for (i = 0; i < sourceSymbolKeys.length; i++) {\n      key = sourceSymbolKeys[i];\n      if (excluded.indexOf(key) >= 0) continue;\n      if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue;\n      target[key] = source[key];\n    }\n  }\n\n  return target;\n}","/**\n * An auto-incrementing identifier for keys.\n */\n\nlet n = 0\n\n/**\n * A class that keeps track of a key string. We use a full class here because we\n * want to be able to use them as keys in `WeakMap` objects.\n */\n\nexport class Key {\n  id: string\n\n  constructor() {\n    this.id = `${n++}`\n  }\n}\n","import { Editor, Path, PathRef, PointRef, RangeRef } from '..'\n\nexport const DIRTY_PATHS: WeakMap<Editor, Path[]> = new WeakMap()\nexport const FLUSHING: WeakMap<Editor, boolean> = new WeakMap()\nexport const NORMALIZING: WeakMap<Editor, boolean> = new WeakMap()\nexport const PATH_REFS: WeakMap<Editor, Set<PathRef>> = new WeakMap()\nexport const POINT_REFS: WeakMap<Editor, Set<PointRef>> = new WeakMap()\nexport const RANGE_REFS: WeakMap<Editor, Set<RangeRef>> = new WeakMap()\n","/**\n * Types.\n */\n\n// COMPAT: This is required to prevent TypeScript aliases from doing some very\n// weird things for Slate's types with the same name as globals. (2019/11/27)\n// https://github.com/microsoft/TypeScript/issues/35002\nimport DOMNode = globalThis.Node\nimport DOMComment = globalThis.Comment\nimport DOMElement = globalThis.Element\nimport DOMText = globalThis.Text\nimport DOMRange = globalThis.Range\nimport DOMSelection = globalThis.Selection\nimport DOMStaticRange = globalThis.StaticRange\nexport {\n  DOMNode,\n  DOMComment,\n  DOMElement,\n  DOMText,\n  DOMRange,\n  DOMSelection,\n  DOMStaticRange,\n}\n\nexport type DOMPoint = [Node, number]\n\n/**\n * Check if a DOM node is a comment node.\n */\n\nexport const isDOMComment = (value: any): value is DOMComment => {\n  return isDOMNode(value) && value.nodeType === 8\n}\n\n/**\n * Check if a DOM node is an element node.\n */\n\nexport const isDOMElement = (value: any): value is DOMElement => {\n  return isDOMNode(value) && value.nodeType === 1\n}\n\n/**\n * Check if a value is a DOM node.\n */\n\nexport const isDOMNode = (value: any): value is DOMNode => {\n  return value instanceof Node\n}\n\n/**\n * Check if a DOM node is an element node.\n */\n\nexport const isDOMText = (value: any): value is DOMText => {\n  return isDOMNode(value) && value.nodeType === 3\n}\n\n/**\n * Checks whether a paste event is a plaintext-only event.\n */\n\nexport const isPlainTextOnlyPaste = (event: ClipboardEvent) => {\n  return (\n    event.clipboardData &&\n    event.clipboardData.getData('text/plain') !== '' &&\n    event.clipboardData.types.length === 1\n  )\n}\n\n/**\n * Normalize a DOM point so that it always refers to a text node.\n */\n\nexport const normalizeDOMPoint = (domPoint: DOMPoint): DOMPoint => {\n  let [node, offset] = domPoint\n\n  // If it's an element node, its offset refers to the index of its children\n  // including comment nodes, so try to find the right text child node.\n  if (isDOMElement(node) && node.childNodes.length) {\n    const isLast = offset === node.childNodes.length\n    const direction = isLast ? 'backward' : 'forward'\n    const index = isLast ? offset - 1 : offset\n    node = getEditableChild(node, index, direction)\n\n    // If the node has children, traverse until we have a leaf node. Leaf nodes\n    // can be either text nodes, or other void DOM nodes.\n    while (isDOMElement(node) && node.childNodes.length) {\n      const i = isLast ? node.childNodes.length - 1 : 0\n      node = getEditableChild(node, i, direction)\n    }\n\n    // Determine the new offset inside the text node.\n    offset = isLast && node.textContent != null ? node.textContent.length : 0\n  }\n\n  // Return the node and offset.\n  return [node, offset]\n}\n\n/**\n * Get the nearest editable child at `index` in a `parent`, preferring\n * `direction`.\n */\n\nexport const getEditableChild = (\n  parent: DOMElement,\n  index: number,\n  direction: 'forward' | 'backward'\n): DOMNode => {\n  const { childNodes } = parent\n  let child = childNodes[index]\n  let i = index\n  let triedForward = false\n  let triedBackward = false\n\n  // While the child is a comment node, or an element node with no children,\n  // keep iterating to find a sibling non-void, non-comment node.\n  while (\n    isDOMComment(child) ||\n    (isDOMElement(child) && child.childNodes.length === 0) ||\n    (isDOMElement(child) && child.getAttribute('contenteditable') === 'false')\n  ) {\n    if (triedForward && triedBackward) {\n      break\n    }\n\n    if (i >= childNodes.length) {\n      triedForward = true\n      i = index - 1\n      direction = 'backward'\n      continue\n    }\n\n    if (i < 0) {\n      triedBackward = true\n      i = index + 1\n      direction = 'forward'\n      continue\n    }\n\n    child = childNodes[i]\n    i += direction === 'forward' ? 1 : -1\n  }\n\n  return child\n}\n\n/**\n * Get a plaintext representation of the content of a node, accounting for block\n * elements which get a newline appended.\n *\n * The domNode must be attached to the DOM.\n */\n\nexport const getPlainText = (domNode: DOMNode) => {\n  let text = ''\n\n  if (isDOMText(domNode) && domNode.nodeValue) {\n    return domNode.nodeValue\n  }\n\n  if (isDOMElement(domNode)) {\n    for (const childNode of Array.from(domNode.childNodes)) {\n      text += getPlainText(childNode)\n    }\n\n    const display = getComputedStyle(domNode).getPropertyValue('display')\n\n    if (display === 'block' || display === 'list' || domNode.tagName === 'BR') {\n      text += '\\n'\n    }\n  }\n\n  return text\n}\n","import { Editor, Node, Path, Point, Range, Transforms, Descendant } from 'slate'\n\nimport { Key } from '../utils/key'\nimport {\n  EDITOR_TO_ELEMENT,\n  ELEMENT_TO_NODE,\n  IS_FOCUSED,\n  IS_READ_ONLY,\n  KEY_TO_ELEMENT,\n  NODE_TO_INDEX,\n  NODE_TO_KEY,\n  NODE_TO_PARENT,\n} from '../utils/weak-maps'\nimport {\n  DOMElement,\n  DOMNode,\n  DOMPoint,\n  DOMRange,\n  DOMSelection,\n  DOMStaticRange,\n  isDOMElement,\n  normalizeDOMPoint,\n} from '../utils/dom'\n\n/**\n * A React and DOM-specific version of the `Editor` interface.\n */\n\nexport interface ReactEditor extends Editor {\n  insertData: (data: DataTransfer) => void\n  setFragmentData: (data: DataTransfer) => void\n}\n\nexport const ReactEditor = {\n  /**\n   * Find a key for a Slate node.\n   */\n\n  findKey(editor: ReactEditor, node: Node): Key {\n    let key = NODE_TO_KEY.get(node)\n\n    if (!key) {\n      key = new Key()\n      NODE_TO_KEY.set(node, key)\n    }\n\n    return key\n  },\n\n  /**\n   * Find the path of Slate node.\n   */\n\n  findPath(editor: ReactEditor, node: Node): Path {\n    const path: Path = []\n    let child = node\n\n    while (true) {\n      const parent = NODE_TO_PARENT.get(child)\n\n      if (parent == null) {\n        if (Editor.isEditor(child)) {\n          return path\n        } else {\n          break\n        }\n      }\n\n      const i = NODE_TO_INDEX.get(child)\n\n      if (i == null) {\n        break\n      }\n\n      path.unshift(i)\n      child = parent\n    }\n\n    throw new Error(\n      `Unable to find the path for Slate node: ${JSON.stringify(node)}`\n    )\n  },\n\n  /**\n   * Check if the editor is focused.\n   */\n\n  isFocused(editor: ReactEditor): boolean {\n    return !!IS_FOCUSED.get(editor)\n  },\n\n  /**\n   * Check if the editor is in read-only mode.\n   */\n\n  isReadOnly(editor: ReactEditor): boolean {\n    return !!IS_READ_ONLY.get(editor)\n  },\n\n  /**\n   * Blur the editor.\n   */\n\n  blur(editor: ReactEditor): void {\n    const el = ReactEditor.toDOMNode(editor, editor)\n    IS_FOCUSED.set(editor, false)\n\n    if (window.document.activeElement === el) {\n      el.blur()\n    }\n  },\n\n  /**\n   * Focus the editor.\n   */\n\n  focus(editor: ReactEditor): void {\n    const el = ReactEditor.toDOMNode(editor, editor)\n    IS_FOCUSED.set(editor, true)\n\n    if (window.document.activeElement !== el) {\n      el.focus({ preventScroll: true })\n    }\n  },\n\n  /**\n   * Deselect the editor.\n   */\n\n  deselect(editor: ReactEditor): void {\n    const { selection } = editor\n    const domSelection = window.getSelection()\n\n    if (domSelection && domSelection.rangeCount > 0) {\n      domSelection.removeAllRanges()\n    }\n\n    if (selection) {\n      Transforms.deselect(editor)\n    }\n  },\n\n  /**\n   * Check if a DOM node is within the editor.\n   */\n\n  hasDOMNode(\n    editor: ReactEditor,\n    target: DOMNode,\n    options: { editable?: boolean } = {}\n  ): boolean {\n    const { editable = false } = options\n    const editorEl = ReactEditor.toDOMNode(editor, editor)\n    let targetEl\n\n    // COMPAT: In Firefox, reading `target.nodeType` will throw an error if\n    // target is originating from an internal \"restricted\" element (e.g. a\n    // stepper arrow on a number input). (2018/05/04)\n    // https://github.com/ianstormtaylor/slate/issues/1819\n    try {\n      targetEl = (isDOMElement(target)\n        ? target\n        : target.parentElement) as HTMLElement\n    } catch (err) {\n      if (\n        !err.message.includes('Permission denied to access property \"nodeType\"')\n      ) {\n        throw err\n      }\n    }\n\n    if (!targetEl) {\n      return false\n    }\n\n    return (\n      targetEl.closest(`[data-slate-editor]`) === editorEl &&\n      (!editable ||\n        targetEl.isContentEditable ||\n        !!targetEl.getAttribute('data-slate-zero-width'))\n    )\n  },\n\n  /**\n   * Insert data from a `DataTransfer` into the editor.\n   */\n\n  insertData(editor: ReactEditor, data: DataTransfer): void {\n    editor.insertData(data)\n  },\n\n  /**\n   * Sets data from the currently selected fragment on a `DataTransfer`.\n   */\n\n  setFragmentData(editor: ReactEditor, data: DataTransfer): void {\n    editor.setFragmentData(data)\n  },\n\n  /**\n   * Find the native DOM element from a Slate node.\n   */\n\n  toDOMNode(editor: ReactEditor, node: Node): HTMLElement {\n    const domNode = Editor.isEditor(node)\n      ? EDITOR_TO_ELEMENT.get(editor)\n      : KEY_TO_ELEMENT.get(ReactEditor.findKey(editor, node))\n\n    if (!domNode) {\n      throw new Error(\n        `Cannot resolve a DOM node from Slate node: ${JSON.stringify(node)}`\n      )\n    }\n\n    return domNode\n  },\n\n  /**\n   * Find a native DOM selection point from a Slate point.\n   */\n\n  toDOMPoint(editor: ReactEditor, point: Point): DOMPoint {\n    const [node] = Editor.node(editor, point.path)\n    const el = ReactEditor.toDOMNode(editor, node)\n    let domPoint: DOMPoint | undefined\n\n    // If we're inside a void node, force the offset to 0, otherwise the zero\n    // width spacing character will result in an incorrect offset of 1\n    if (Editor.void(editor, { at: point })) {\n      point = { path: point.path, offset: 0 }\n    }\n\n    // For each leaf, we need to isolate its content, which means filtering\n    // to its direct text and zero-width spans. (We have to filter out any\n    // other siblings that may have been rendered alongside them.)\n    const selector = `[data-slate-string], [data-slate-zero-width]`\n    const texts = Array.from(el.querySelectorAll(selector))\n    let start = 0\n\n    for (const text of texts) {\n      const domNode = text.childNodes[0] as HTMLElement\n\n      if (domNode == null || domNode.textContent == null) {\n        continue\n      }\n\n      const { length } = domNode.textContent\n      const attr = text.getAttribute('data-slate-length')\n      const trueLength = attr == null ? length : parseInt(attr, 10)\n      const end = start + trueLength\n\n      if (point.offset <= end) {\n        const offset = Math.min(length, Math.max(0, point.offset - start))\n        domPoint = [domNode, offset]\n        break\n      }\n\n      start = end\n    }\n\n    if (!domPoint) {\n      throw new Error(\n        `Cannot resolve a DOM point from Slate point: ${JSON.stringify(point)}`\n      )\n    }\n\n    return domPoint\n  },\n\n  /**\n   * Find a native DOM range from a Slate `range`.\n   */\n\n  toDOMRange(editor: ReactEditor, range: Range): DOMRange {\n    const { anchor, focus } = range\n    const isBackward = Range.isBackward(range)\n    const domAnchor = ReactEditor.toDOMPoint(editor, anchor)\n    const domFocus = Range.isCollapsed(range)\n      ? domAnchor\n      : ReactEditor.toDOMPoint(editor, focus)\n\n    const domRange = window.document.createRange()\n    const [startNode, startOffset] = isBackward ? domFocus : domAnchor\n    const [endNode, endOffset] = isBackward ? domAnchor : domFocus\n\n    // A slate Point at zero-width Leaf always has an offset of 0 but a native DOM selection at\n    // zero-width node has an offset of 1 so we have to check if we are in a zero-width node and\n    // adjust the offset accordingly.\n    const startEl = (isDOMElement(startNode)\n      ? startNode\n      : startNode.parentElement) as HTMLElement\n    const isStartAtZeroWidth = !!startEl.getAttribute('data-slate-zero-width')\n    const endEl = (isDOMElement(endNode)\n      ? endNode\n      : endNode.parentElement) as HTMLElement\n    const isEndAtZeroWidth = !!endEl.getAttribute('data-slate-zero-width')\n\n    domRange.setStart(startNode, isStartAtZeroWidth ? 1 : startOffset)\n    domRange.setEnd(endNode, isEndAtZeroWidth ? 1 : endOffset)\n    return domRange\n  },\n\n  /**\n   * Find a Slate node from a native DOM `element`.\n   */\n\n  toSlateNode(editor: ReactEditor, domNode: DOMNode): Node {\n    let domEl = isDOMElement(domNode) ? domNode : domNode.parentElement\n\n    if (domEl && !domEl.hasAttribute('data-slate-node')) {\n      domEl = domEl.closest(`[data-slate-node]`)\n    }\n\n    const node = domEl ? ELEMENT_TO_NODE.get(domEl as HTMLElement) : null\n\n    if (!node) {\n      throw new Error(`Cannot resolve a Slate node from DOM node: ${domEl}`)\n    }\n\n    return node\n  },\n\n  /**\n   * Get the target range from a DOM `event`.\n   */\n\n  findEventRange(editor: ReactEditor, event: any): Range {\n    if ('nativeEvent' in event) {\n      event = event.nativeEvent\n    }\n\n    const { clientX: x, clientY: y, target } = event\n\n    if (x == null || y == null) {\n      throw new Error(`Cannot resolve a Slate range from a DOM event: ${event}`)\n    }\n\n    const node = ReactEditor.toSlateNode(editor, event.target)\n    const path = ReactEditor.findPath(editor, node)\n\n    // If the drop target is inside a void node, move it into either the\n    // next or previous node, depending on which side the `x` and `y`\n    // coordinates are closest to.\n    if (Editor.isVoid(editor, node)) {\n      const rect = target.getBoundingClientRect()\n      const isPrev = editor.isInline(node)\n        ? x - rect.left < rect.left + rect.width - x\n        : y - rect.top < rect.top + rect.height - y\n\n      const edge = Editor.point(editor, path, {\n        edge: isPrev ? 'start' : 'end',\n      })\n      const point = isPrev\n        ? Editor.before(editor, edge)\n        : Editor.after(editor, edge)\n\n      if (point) {\n        const range = Editor.range(editor, point)\n        return range\n      }\n    }\n\n    // Else resolve a range from the caret position where the drop occured.\n    let domRange\n    const { document } = window\n\n    // COMPAT: In Firefox, `caretRangeFromPoint` doesn't exist. (2016/07/25)\n    if (document.caretRangeFromPoint) {\n      domRange = document.caretRangeFromPoint(x, y)\n    } else {\n      const position = document.caretPositionFromPoint(x, y)\n\n      if (position) {\n        domRange = document.createRange()\n        domRange.setStart(position.offsetNode, position.offset)\n        domRange.setEnd(position.offsetNode, position.offset)\n      }\n    }\n\n    if (!domRange) {\n      throw new Error(`Cannot resolve a Slate range from a DOM event: ${event}`)\n    }\n\n    // Resolve a Slate range from the DOM range.\n    const range = ReactEditor.toSlateRange(editor, domRange)\n    return range\n  },\n\n  /**\n   * Find a Slate point from a DOM selection's `domNode` and `domOffset`.\n   */\n\n  toSlatePoint(editor: ReactEditor, domPoint: DOMPoint): Point {\n    const [nearestNode, nearestOffset] = normalizeDOMPoint(domPoint)\n    const parentNode = nearestNode.parentNode as DOMElement\n    let textNode: DOMElement | null = null\n    let offset = 0\n\n    if (parentNode) {\n      const voidNode = parentNode.closest('[data-slate-void=\"true\"]')\n      let leafNode = parentNode.closest('[data-slate-leaf]')\n      let domNode: DOMElement | null = null\n\n      // Calculate how far into the text node the `nearestNode` is, so that we\n      // can determine what the offset relative to the text node is.\n      if (leafNode) {\n        textNode = leafNode.closest('[data-slate-node=\"text\"]')!\n        const range = window.document.createRange()\n        range.setStart(textNode, 0)\n        range.setEnd(nearestNode, nearestOffset)\n        const contents = range.cloneContents()\n        const removals = [\n          ...contents.querySelectorAll('[data-slate-zero-width]'),\n          ...contents.querySelectorAll('[contenteditable=false]'),\n        ]\n\n        removals.forEach(el => {\n          el!.parentNode!.removeChild(el)\n        })\n\n        // COMPAT: Edge has a bug where Range.prototype.toString() will\n        // convert \\n into \\r\\n. The bug causes a loop when slate-react\n        // attempts to reposition its cursor to match the native position. Use\n        // textContent.length instead.\n        // https://developer.microsoft.com/en-us/microsoft-edge/platform/issues/10291116/\n        offset = contents.textContent!.length\n        domNode = textNode\n      } else if (voidNode) {\n        // For void nodes, the element with the offset key will be a cousin, not an\n        // ancestor, so find it by going down from the nearest void parent.\n\n        leafNode = voidNode.querySelector('[data-slate-leaf]')!\n        textNode = leafNode.closest('[data-slate-node=\"text\"]')!\n        domNode = leafNode\n        offset = domNode.textContent!.length\n      }\n\n      // COMPAT: If the parent node is a Slate zero-width space, editor is\n      // because the text node should have no characters. However, during IME\n      // composition the ASCII characters will be prepended to the zero-width\n      // space, so subtract 1 from the offset to account for the zero-width\n      // space character.\n      if (\n        domNode &&\n        offset === domNode.textContent!.length &&\n        parentNode.hasAttribute('data-slate-zero-width')\n      ) {\n        offset--\n      }\n    }\n\n    if (!textNode) {\n      throw new Error(\n        `Cannot resolve a Slate point from DOM point: ${domPoint}`\n      )\n    }\n\n    // COMPAT: If someone is clicking from one Slate editor into another,\n    // the select event fires twice, once for the old editor's `element`\n    // first, and then afterwards for the correct `element`. (2017/03/03)\n    const slateNode = ReactEditor.toSlateNode(editor, textNode!)\n    const path = ReactEditor.findPath(editor, slateNode)\n    return { path, offset }\n  },\n\n  /**\n   * Find a Slate range from a DOM range or selection.\n   */\n\n  toSlateRange(\n    editor: ReactEditor,\n    domRange: DOMRange | DOMStaticRange | DOMSelection\n  ): Range {\n    const el =\n      domRange instanceof Selection\n        ? domRange.anchorNode\n        : domRange.startContainer\n    let anchorNode\n    let anchorOffset\n    let focusNode\n    let focusOffset\n    let isCollapsed\n\n    if (el) {\n      if (domRange instanceof Selection) {\n        anchorNode = domRange.anchorNode\n        anchorOffset = domRange.anchorOffset\n        focusNode = domRange.focusNode\n        focusOffset = domRange.focusOffset\n        isCollapsed = domRange.isCollapsed\n      } else {\n        anchorNode = domRange.startContainer\n        anchorOffset = domRange.startOffset\n        focusNode = domRange.endContainer\n        focusOffset = domRange.endOffset\n        isCollapsed = domRange.collapsed\n      }\n    }\n\n    if (\n      anchorNode == null ||\n      focusNode == null ||\n      anchorOffset == null ||\n      focusOffset == null\n    ) {\n      throw new Error(\n        `Cannot resolve a Slate range from DOM range: ${domRange}`\n      )\n    }\n\n    const anchor = ReactEditor.toSlatePoint(editor, [anchorNode, anchorOffset])\n    const focus = isCollapsed\n      ? anchor\n      : ReactEditor.toSlatePoint(editor, [focusNode, focusOffset])\n\n    return { anchor, focus }\n  },\n}\n","import { createContext, useContext } from 'react'\n\n/**\n * A React context for sharing the `focused` state of the editor.\n */\n\nexport const FocusedContext = createContext(false)\n\n/**\n * Get the current `focused` state of the editor.\n */\n\nexport const useFocused = (): boolean => {\n  return useContext(FocusedContext)\n}\n","import { createContext, useContext } from 'react'\n\nimport { ReactEditor } from '../plugin/react-editor'\n\n/**\n * A React context for sharing the editor object.\n */\n\nexport const EditorContext = createContext<ReactEditor | null>(null)\n\n/**\n * Get the current editor object from the React context.\n */\n\nexport const useEditor = () => {\n  const editor = useContext(EditorContext)\n\n  if (!editor) {\n    throw new Error(\n      `The \\`useEditor\\` hook must be used inside the <Slate> component's context.`\n    )\n  }\n\n  return editor\n}\n","import { createContext, useContext } from 'react'\n\nimport { ReactEditor } from '../plugin/react-editor'\n\n/**\n * A React context for sharing the editor object, in a way that re-renders the\n * context whenever changes occur.\n */\n\nexport const SlateContext = createContext<[ReactEditor] | null>(null)\n\n/**\n * Get the current editor object from the React context.\n */\n\nexport const useSlate = () => {\n  const context = useContext(SlateContext)\n\n  if (!context) {\n    throw new Error(\n      `The \\`useSlate\\` hook must be used inside the <SlateProvider> component's context.`\n    )\n  }\n\n  const [editor] = context\n  return editor\n}\n","import React, { useMemo, useState, useCallback, useEffect } from 'react'\nimport { Node } from 'slate'\n\nimport { ReactEditor } from '../plugin/react-editor'\nimport { FocusedContext } from '../hooks/use-focused'\nimport { EditorContext } from '../hooks/use-editor'\nimport { SlateContext } from '../hooks/use-slate'\nimport { EDITOR_TO_ON_CHANGE } from '../utils/weak-maps'\n\n/**\n * A wrapper around the provider to handle `onChange` events, because the editor\n * is a mutable singleton so it won't ever register as \"changed\" otherwise.\n */\n\nexport const Slate = (props: {\n  editor: ReactEditor\n  value: Node[]\n  children: React.ReactNode\n  onChange: (value: Node[]) => void\n  [key: string]: unknown\n}) => {\n  const { editor, children, onChange, value, ...rest } = props\n  const [key, setKey] = useState(0)\n  const context: [ReactEditor] = useMemo(() => {\n    editor.children = value\n    Object.assign(editor, rest)\n    return [editor]\n  }, [key, value, ...Object.values(rest)])\n\n  const onContextChange = useCallback(() => {\n    onChange(editor.children)\n    setKey(key + 1)\n  }, [key, onChange])\n\n  EDITOR_TO_ON_CHANGE.set(editor, onContextChange)\n\n  useEffect(() => {\n    return () => {\n      EDITOR_TO_ON_CHANGE.set(editor, () => {})\n    }\n  }, [])\n\n  return (\n    <SlateContext.Provider value={context}>\n      <EditorContext.Provider value={editor}>\n        <FocusedContext.Provider value={ReactEditor.isFocused(editor)}>\n          {children}\n        </FocusedContext.Provider>\n      </EditorContext.Provider>\n    </SlateContext.Provider>\n  )\n}\n","import { createContext, useContext } from 'react'\n\n/**\n * A React context for sharing the `readOnly` state of the editor.\n */\n\nexport const ReadOnlyContext = createContext(false)\n\n/**\n * Get the current `readOnly` state of the editor.\n */\n\nexport const useReadOnly = (): boolean => {\n  return useContext(ReadOnlyContext)\n}\n","import { createContext, useContext } from 'react'\n\n/**\n * A React context for sharing the `selected` state of an element.\n */\n\nexport const SelectedContext = createContext(false)\n\n/**\n * Get the current `selected` state of an element.\n */\n\nexport const useSelected = (): boolean => {\n  return useContext(SelectedContext)\n}\n","import ReactDOM from 'react-dom'\nimport { Editor, Node, Path, Operation, Transforms, Range } from 'slate'\n\nimport { ReactEditor } from './react-editor'\nimport { Key } from '../utils/key'\nimport { EDITOR_TO_ON_CHANGE, NODE_TO_KEY } from '../utils/weak-maps'\nimport { isDOMText, getPlainText } from '../utils/dom'\n\n/**\n * `withReact` adds React and DOM specific behaviors to the editor.\n */\n\nexport const withReact = <T extends Editor>(editor: T) => {\n  const e = editor as T & ReactEditor\n  const { apply, onChange } = e\n\n  e.apply = (op: Operation) => {\n    const matches: [Path, Key][] = []\n\n    switch (op.type) {\n      case 'insert_text':\n      case 'remove_text':\n      case 'set_node': {\n        for (const [node, path] of Editor.levels(e, { at: op.path })) {\n          const key = ReactEditor.findKey(e, node)\n          matches.push([path, key])\n        }\n\n        break\n      }\n\n      case 'insert_node':\n      case 'remove_node':\n      case 'merge_node':\n      case 'split_node': {\n        for (const [node, path] of Editor.levels(e, {\n          at: Path.parent(op.path),\n        })) {\n          const key = ReactEditor.findKey(e, node)\n          matches.push([path, key])\n        }\n\n        break\n      }\n\n      case 'move_node': {\n        // TODO\n        break\n      }\n    }\n\n    apply(op)\n\n    for (const [path, key] of matches) {\n      const [node] = Editor.node(e, path)\n      NODE_TO_KEY.set(node, key)\n    }\n  }\n\n  e.setFragmentData = (data: DataTransfer) => {\n    const { selection } = e\n\n    if (!selection) {\n      return\n    }\n\n    const [start, end] = Range.edges(selection)\n    const startVoid = Editor.void(e, { at: start.path })\n    const endVoid = Editor.void(e, { at: end.path })\n\n    if (Range.isCollapsed(selection) && !startVoid) {\n      return\n    }\n\n    // Create a fake selection so that we can add a Base64-encoded copy of the\n    // fragment to the HTML, to decode on future pastes.\n    const domRange = ReactEditor.toDOMRange(e, selection)\n    let contents = domRange.cloneContents()\n    let attach = contents.childNodes[0] as HTMLElement\n\n    // Make sure attach is non-empty, since empty nodes will not get copied.\n    contents.childNodes.forEach(node => {\n      if (node.textContent && node.textContent.trim() !== '') {\n        attach = node as HTMLElement\n      }\n    })\n\n    // COMPAT: If the end node is a void node, we need to move the end of the\n    // range from the void node's spacer span, to the end of the void node's\n    // content, since the spacer is before void's content in the DOM.\n    if (endVoid) {\n      const [voidNode] = endVoid\n      const r = domRange.cloneRange()\n      const domNode = ReactEditor.toDOMNode(e, voidNode)\n      r.setEndAfter(domNode)\n      contents = r.cloneContents()\n    }\n\n    // COMPAT: If the start node is a void node, we need to attach the encoded\n    // fragment to the void node's content node instead of the spacer, because\n    // attaching it to empty `<div>/<span>` nodes will end up having it erased by\n    // most browsers. (2018/04/27)\n    if (startVoid) {\n      attach = contents.querySelector('[data-slate-spacer]')! as HTMLElement\n    }\n\n    // Remove any zero-width space spans from the cloned DOM so that they don't\n    // show up elsewhere when pasted.\n    Array.from(contents.querySelectorAll('[data-slate-zero-width]')).forEach(\n      zw => {\n        const isNewline = zw.getAttribute('data-slate-zero-width') === 'n'\n        zw.textContent = isNewline ? '\\n' : ''\n      }\n    )\n\n    // Set a `data-slate-fragment` attribute on a non-empty node, so it shows up\n    // in the HTML, and can be used for intra-Slate pasting. If it's a text\n    // node, wrap it in a `<span>` so we have something to set an attribute on.\n    if (isDOMText(attach)) {\n      const span = document.createElement('span')\n      // COMPAT: In Chrome and Safari, if we don't add the `white-space` style\n      // then leading and trailing spaces will be ignored. (2017/09/21)\n      span.style.whiteSpace = 'pre'\n      span.appendChild(attach)\n      contents.appendChild(span)\n      attach = span\n    }\n\n    const fragment = e.getFragment()\n    const string = JSON.stringify(fragment)\n    const encoded = window.btoa(encodeURIComponent(string))\n    attach.setAttribute('data-slate-fragment', encoded)\n    data.setData('application/x-slate-fragment', encoded)\n\n    // Add the content to a <div> so that we can get its inner HTML.\n    const div = document.createElement('div')\n    div.appendChild(contents)\n    div.setAttribute('hidden', 'true')\n    document.body.appendChild(div)\n    data.setData('text/html', div.innerHTML)\n    data.setData('text/plain', getPlainText(div))\n    document.body.removeChild(div)\n  }\n\n  e.insertData = (data: DataTransfer) => {\n    const fragment = data.getData('application/x-slate-fragment')\n\n    if (fragment) {\n      const decoded = decodeURIComponent(window.atob(fragment))\n      const parsed = JSON.parse(decoded) as Node[]\n      Transforms.insertFragment(e, parsed)\n      return\n    }\n\n    const text = data.getData('text/plain')\n\n    if (text) {\n      const lines = text.split(/\\r\\n|\\r|\\n/)\n      let split = false\n\n      for (const line of lines) {\n        if (split) {\n          Transforms.splitNodes(e, { always: true })\n        }\n\n        Transforms.insertText(e, line)\n        split = true\n      }\n    }\n  }\n\n  e.onChange = () => {\n    // COMPAT: React doesn't batch `setState` hook calls, which means that the\n    // children and selection can get out of sync for one render pass. So we\n    // have to use this unstable API to ensure it batches them. (2019/12/03)\n    // https://github.com/facebook/react/issues/14259#issuecomment-439702367\n    ReactDOM.unstable_batchedUpdates(() => {\n      const onContextChange = EDITOR_TO_ON_CHANGE.get(e)\n\n      if (onContextChange) {\n        onContextChange()\n      }\n\n      onChange()\n    })\n  }\n\n  return e\n}\n","import React from 'react'\nimport { Editor, Text, Path, Element, Node } from 'slate'\n\nimport { ReactEditor, useEditor } from '..'\n\n/**\n * Leaf content strings.\n */\n\nconst String = (props: {\n  isLast: boolean\n  leaf: Text\n  parent: Element\n  text: Text\n}) => {\n  const { isLast, leaf, parent, text } = props\n  const editor = useEditor()\n  const path = ReactEditor.findPath(editor, text)\n  const parentPath = Path.parent(path)\n\n  // COMPAT: Render text inside void nodes with a zero-width space.\n  // So the node can contain selection but the text is not visible.\n  if (editor.isVoid(parent)) {\n    return <ZeroWidthString length={Node.string(parent).length} />\n  }\n\n  // COMPAT: If this is the last text node in an empty block, render a zero-\n  // width space that will convert into a line break when copying and pasting\n  // to support expected plain text.\n  if (\n    leaf.text === '' &&\n    parent.children[parent.children.length - 1] === text &&\n    !editor.isInline(parent) &&\n    Editor.string(editor, parentPath) === ''\n  ) {\n    return <ZeroWidthString isLineBreak />\n  }\n\n  // COMPAT: If the text is empty, it's because it's on the edge of an inline\n  // node, so we render a zero-width space so that the selection can be\n  // inserted next to it still.\n  if (leaf.text === '') {\n    return <ZeroWidthString />\n  }\n\n  // COMPAT: Browsers will collapse trailing new lines at the end of blocks,\n  // so we need to add an extra trailing new lines to prevent that.\n  if (isLast && leaf.text.slice(-1) === '\\n') {\n    return <TextString isTrailing text={leaf.text} />\n  }\n\n  return <TextString text={leaf.text} />\n}\n\n/**\n * Leaf strings with text in them.\n */\n\nconst TextString = (props: { text: string; isTrailing?: boolean }) => {\n  const { text, isTrailing = false } = props\n  return (\n    <span data-slate-string>\n      {text}\n      {isTrailing ? '\\n' : null}\n    </span>\n  )\n}\n\n/**\n * Leaf strings without text, render as zero-width strings.\n */\n\nconst ZeroWidthString = (props: { length?: number; isLineBreak?: boolean }) => {\n  const { length = 0, isLineBreak = false } = props\n  return (\n    <span\n      data-slate-zero-width={isLineBreak ? 'n' : 'z'}\n      data-slate-length={length}\n    >\n      {'\\uFEFF'}\n      {isLineBreak ? <br /> : null}\n    </span>\n  )\n}\n\nexport default String\n","import React from 'react'\nimport { Text, Element } from 'slate'\n\nimport String from './string'\nimport { PLACEHOLDER_SYMBOL } from '../utils/weak-maps'\nimport { RenderLeafProps } from './editable'\n\n/**\n * Individual leaves in a text node with unique formatting.\n */\n\nconst Leaf = (props: {\n  isLast: boolean\n  leaf: Text\n  parent: Element\n  renderLeaf?: (props: RenderLeafProps) => JSX.Element\n  text: Text\n}) => {\n  const {\n    leaf,\n    isLast,\n    text,\n    parent,\n    renderLeaf = (props: RenderLeafProps) => <DefaultLeaf {...props} />,\n  } = props\n\n  let children = (\n    <String isLast={isLast} leaf={leaf} parent={parent} text={text} />\n  )\n\n  if (leaf[PLACEHOLDER_SYMBOL]) {\n    children = (\n      <React.Fragment>\n        <span\n          contentEditable={false}\n          style={{\n            pointerEvents: 'none',\n            display: 'inline-block',\n            verticalAlign: 'text-top',\n            width: '0',\n            maxWidth: '100%',\n            whiteSpace: 'nowrap',\n            opacity: '0.333',\n            userSelect: 'none',\n            fontStyle: 'normal',\n            fontWeight: 'normal',\n            textDecoration: 'none',\n          }}\n        >\n          {leaf.placeholder as React.ReactNode}\n        </span>\n        {children}\n      </React.Fragment>\n    )\n  }\n\n  // COMPAT: Having the `data-` attributes on these leaf elements ensures that\n  // in certain misbehaving browsers they aren't weirdly cloned/destroyed by\n  // contenteditable behaviors. (2019/05/08)\n  const attributes: {\n    'data-slate-leaf': true\n  } = {\n    'data-slate-leaf': true,\n  }\n\n  return renderLeaf({ attributes, children, leaf, text })\n}\n\nconst MemoizedLeaf = React.memo(Leaf, (prev, next) => {\n  return (\n    next.parent === prev.parent &&\n    next.isLast === prev.isLast &&\n    next.renderLeaf === prev.renderLeaf &&\n    next.text === prev.text &&\n    Text.matches(next.leaf, prev.leaf)\n  )\n})\n\n/**\n * The default custom leaf renderer.\n */\n\nexport const DefaultLeaf = (props: RenderLeafProps) => {\n  const { attributes, children } = props\n  return <span {...attributes}>{children}</span>\n}\n\nexport default MemoizedLeaf\n","import { useLayoutEffect, useEffect } from 'react'\n\n/**\n * Prevent warning on SSR by falling back to useEffect when window is not defined\n */\nexport const useIsomorphicLayoutEffect =\n  typeof window !== 'undefined' ? useLayoutEffect : useEffect\n","import React, { useRef } from 'react'\nimport { Range, Element, Text as SlateText } from 'slate'\n\nimport Leaf from './leaf'\nimport { ReactEditor, useEditor } from '..'\nimport { RenderLeafProps } from './editable'\nimport { useIsomorphicLayoutEffect } from '../hooks/use-isomorphic-layout-effect'\nimport {\n  KEY_TO_ELEMENT,\n  NODE_TO_ELEMENT,\n  ELEMENT_TO_NODE,\n} from '../utils/weak-maps'\n\n/**\n * Text.\n */\n\nconst Text = (props: {\n  decorations: Range[]\n  isLast: boolean\n  parent: Element\n  renderLeaf?: (props: RenderLeafProps) => JSX.Element\n  text: SlateText\n}) => {\n  const { decorations, isLast, parent, renderLeaf, text } = props\n  const editor = useEditor()\n  const ref = useRef<HTMLSpanElement>(null)\n  const leaves = SlateText.decorations(text, decorations)\n  const key = ReactEditor.findKey(editor, text)\n  const children = []\n\n  for (let i = 0; i < leaves.length; i++) {\n    const leaf = leaves[i]\n\n    children.push(\n      <Leaf\n        isLast={isLast && i === leaves.length - 1}\n        key={`${key.id}-${i}`}\n        leaf={leaf}\n        text={text}\n        parent={parent}\n        renderLeaf={renderLeaf}\n      />\n    )\n  }\n\n  // Update element-related weak maps with the DOM element ref.\n  useIsomorphicLayoutEffect(() => {\n    if (ref.current) {\n      KEY_TO_ELEMENT.set(key, ref.current)\n      NODE_TO_ELEMENT.set(text, ref.current)\n      ELEMENT_TO_NODE.set(ref.current, text)\n    } else {\n      KEY_TO_ELEMENT.delete(key)\n      NODE_TO_ELEMENT.delete(text)\n    }\n  })\n\n  return (\n    <span data-slate-node=\"text\" ref={ref}>\n      {children}\n    </span>\n  )\n}\n\nconst MemoizedText = React.memo(Text, (prev, next) => {\n  return (\n    next.parent === prev.parent &&\n    next.isLast === prev.isLast &&\n    next.renderLeaf === prev.renderLeaf &&\n    next.text === prev.text\n  )\n})\n\nexport default MemoizedText\n","import React, { useRef } from 'react'\nimport getDirection from 'direction'\nimport { Editor, Node, Range, NodeEntry, Element as SlateElement } from 'slate'\n\nimport Text from './text'\nimport Children from './children'\nimport { ReactEditor, useEditor, useReadOnly } from '..'\nimport { SelectedContext } from '../hooks/use-selected'\nimport { useIsomorphicLayoutEffect } from '../hooks/use-isomorphic-layout-effect'\nimport {\n  NODE_TO_ELEMENT,\n  ELEMENT_TO_NODE,\n  NODE_TO_PARENT,\n  NODE_TO_INDEX,\n  KEY_TO_ELEMENT,\n} from '../utils/weak-maps'\nimport { RenderElementProps, RenderLeafProps } from './editable'\n\n/**\n * Element.\n */\n\nconst Element = (props: {\n  decorate: (entry: NodeEntry) => Range[]\n  decorations: Range[]\n  element: SlateElement\n  renderElement?: (props: RenderElementProps) => JSX.Element\n  renderLeaf?: (props: RenderLeafProps) => JSX.Element\n  selection: Range | null\n}) => {\n  const {\n    decorate,\n    decorations,\n    element,\n    renderElement = (p: RenderElementProps) => <DefaultElement {...p} />,\n    renderLeaf,\n    selection,\n  } = props\n  const ref = useRef<HTMLElement>(null)\n  const editor = useEditor()\n  const readOnly = useReadOnly()\n  const isInline = editor.isInline(element)\n  const key = ReactEditor.findKey(editor, element)\n\n  let children: JSX.Element | null = (\n    <Children\n      decorate={decorate}\n      decorations={decorations}\n      node={element}\n      renderElement={renderElement}\n      renderLeaf={renderLeaf}\n      selection={selection}\n    />\n  )\n\n  // Attributes that the developer must mix into the element in their\n  // custom node renderer component.\n  const attributes: {\n    'data-slate-node': 'element'\n    'data-slate-void'?: true\n    'data-slate-inline'?: true\n    contentEditable?: false\n    dir?: 'rtl'\n    ref: any\n  } = {\n    'data-slate-node': 'element',\n    ref,\n  }\n\n  if (isInline) {\n    attributes['data-slate-inline'] = true\n  }\n\n  // If it's a block node with inline children, add the proper `dir` attribute\n  // for text direction.\n  if (!isInline && Editor.hasInlines(editor, element)) {\n    const text = Node.string(element)\n    const dir = getDirection(text)\n\n    if (dir === 'rtl') {\n      attributes.dir = dir\n    }\n  }\n\n  // If it's a void node, wrap the children in extra void-specific elements.\n  if (Editor.isVoid(editor, element)) {\n    attributes['data-slate-void'] = true\n\n    if (!readOnly && isInline) {\n      attributes.contentEditable = false\n    }\n\n    const Tag = isInline ? 'span' : 'div'\n    const [[text]] = Node.texts(element)\n\n    children = readOnly ? null : (\n      <Tag\n        data-slate-spacer\n        style={{\n          height: '0',\n          color: 'transparent',\n          outline: 'none',\n          position: 'absolute',\n        }}\n      >\n        <Text decorations={[]} isLast={false} parent={element} text={text} />\n      </Tag>\n    )\n\n    NODE_TO_INDEX.set(text, 0)\n    NODE_TO_PARENT.set(text, element)\n  }\n\n  // Update element-related weak maps with the DOM element ref.\n  useIsomorphicLayoutEffect(() => {\n    if (ref.current) {\n      KEY_TO_ELEMENT.set(key, ref.current)\n      NODE_TO_ELEMENT.set(element, ref.current)\n      ELEMENT_TO_NODE.set(ref.current, element)\n    } else {\n      KEY_TO_ELEMENT.delete(key)\n      NODE_TO_ELEMENT.delete(element)\n    }\n  })\n\n  return (\n    <SelectedContext.Provider value={!!selection}>\n      {renderElement({ attributes, children, element })}\n    </SelectedContext.Provider>\n  )\n}\n\nconst MemoizedElement = React.memo(Element, (prev, next) => {\n  return (\n    prev.decorate === next.decorate &&\n    prev.element === next.element &&\n    prev.renderElement === next.renderElement &&\n    prev.renderLeaf === next.renderLeaf &&\n    isRangeListEqual(prev.decorations, next.decorations) &&\n    (prev.selection === next.selection ||\n      (!!prev.selection &&\n        !!next.selection &&\n        Range.equals(prev.selection, next.selection)))\n  )\n})\n\n/**\n * The default element renderer.\n */\n\nexport const DefaultElement = (props: RenderElementProps) => {\n  const { attributes, children, element } = props\n  const editor = useEditor()\n  const Tag = editor.isInline(element) ? 'span' : 'div'\n  return (\n    <Tag {...attributes} style={{ position: 'relative' }}>\n      {children}\n    </Tag>\n  )\n}\n\n/**\n * Check if a list of ranges is equal to another.\n *\n * PERF: this requires the two lists to also have the ranges inside them in the\n * same order, but this is an okay constraint for us since decorations are\n * kept in order, and the odd case where they aren't is okay to re-render for.\n */\n\nconst isRangeListEqual = (list: Range[], another: Range[]): boolean => {\n  if (list.length !== another.length) {\n    return false\n  }\n\n  for (let i = 0; i < list.length; i++) {\n    const range = list[i]\n    const other = another[i]\n\n    if (!Range.equals(range, other)) {\n      return false\n    }\n  }\n\n  return true\n}\n\nexport default MemoizedElement\n","import React from 'react'\nimport { Editor, Range, Element, NodeEntry, Ancestor, Descendant } from 'slate'\n\nimport ElementComponent from './element'\nimport TextComponent from './text'\nimport { ReactEditor } from '..'\nimport { useEditor } from '../hooks/use-editor'\nimport { NODE_TO_INDEX, NODE_TO_PARENT } from '../utils/weak-maps'\nimport { RenderElementProps, RenderLeafProps } from './editable'\n\n/**\n * Children.\n */\n\nconst Children = (props: {\n  decorate: (entry: NodeEntry) => Range[]\n  decorations: Range[]\n  node: Ancestor\n  renderElement?: (props: RenderElementProps) => JSX.Element\n  renderLeaf?: (props: RenderLeafProps) => JSX.Element\n  selection: Range | null\n}) => {\n  const {\n    decorate,\n    decorations,\n    node,\n    renderElement,\n    renderLeaf,\n    selection,\n  } = props\n  const editor = useEditor()\n  const path = ReactEditor.findPath(editor, node)\n  const children = []\n  const isLeafBlock =\n    Element.isElement(node) &&\n    !editor.isInline(node) &&\n    Editor.hasInlines(editor, node)\n\n  for (let i = 0; i < node.children.length; i++) {\n    const p = path.concat(i)\n    const n = node.children[i] as Descendant\n    const key = ReactEditor.findKey(editor, n)\n    const range = Editor.range(editor, p)\n    const sel = selection && Range.intersection(range, selection)\n    const ds = decorate([n, p])\n\n    for (const dec of decorations) {\n      const d = Range.intersection(dec, range)\n\n      if (d) {\n        ds.push(d)\n      }\n    }\n\n    if (Element.isElement(n)) {\n      children.push(\n        <ElementComponent\n          decorate={decorate}\n          decorations={ds}\n          element={n}\n          key={key.id}\n          renderElement={renderElement}\n          renderLeaf={renderLeaf}\n          selection={sel}\n        />\n      )\n    } else {\n      children.push(\n        <TextComponent\n          decorations={ds}\n          key={key.id}\n          isLast={isLeafBlock && i === node.children.length - 1}\n          parent={node}\n          renderLeaf={renderLeaf}\n          text={n}\n        />\n      )\n    }\n\n    NODE_TO_INDEX.set(n, i)\n    NODE_TO_PARENT.set(n, node)\n  }\n\n  return <React.Fragment>{children}</React.Fragment>\n}\n\nexport default Children\n","export const IS_IOS =\n  typeof navigator !== 'undefined' &&\n  typeof window !== 'undefined' &&\n  /iPad|iPhone|iPod/.test(navigator.userAgent) &&\n  !window.MSStream\n\nexport const IS_APPLE =\n  typeof navigator !== 'undefined' && /Mac OS X/.test(navigator.userAgent)\n\nexport const IS_FIREFOX =\n  typeof navigator !== 'undefined' &&\n  /^(?!.*Seamonkey)(?=.*Firefox).*/i.test(navigator.userAgent)\n\nexport const IS_SAFARI =\n  typeof navigator !== 'undefined' &&\n  /Version\\/[\\d\\.]+.*Safari/.test(navigator.userAgent)\n\n// \"modern\" Edge was released at 79.x\nexport const IS_EDGE_LEGACY =\n  typeof navigator !== 'undefined' &&\n  /Edge?\\/(?:[0-6][0-9]|[0-7][0-8])/i.test(navigator.userAgent)\n","import { isKeyHotkey } from 'is-hotkey'\nimport { IS_APPLE } from './environment'\n\n/**\n * Hotkey mappings for each platform.\n */\n\nconst HOTKEYS = {\n  bold: 'mod+b',\n  compose: ['down', 'left', 'right', 'up', 'backspace', 'enter'],\n  moveBackward: 'left',\n  moveForward: 'right',\n  moveWordBackward: 'ctrl+left',\n  moveWordForward: 'ctrl+right',\n  deleteBackward: 'shift?+backspace',\n  deleteForward: 'shift?+delete',\n  extendBackward: 'shift+left',\n  extendForward: 'shift+right',\n  italic: 'mod+i',\n  splitBlock: 'shift?+enter',\n  undo: 'mod+z',\n}\n\nconst APPLE_HOTKEYS = {\n  moveLineBackward: 'opt+up',\n  moveLineForward: 'opt+down',\n  moveWordBackward: 'opt+left',\n  moveWordForward: 'opt+right',\n  deleteBackward: ['ctrl+backspace', 'ctrl+h'],\n  deleteForward: ['ctrl+delete', 'ctrl+d'],\n  deleteLineBackward: 'cmd+shift?+backspace',\n  deleteLineForward: ['cmd+shift?+delete', 'ctrl+k'],\n  deleteWordBackward: 'opt+shift?+backspace',\n  deleteWordForward: 'opt+shift?+delete',\n  extendLineBackward: 'opt+shift+up',\n  extendLineForward: 'opt+shift+down',\n  redo: 'cmd+shift+z',\n  transposeCharacter: 'ctrl+t',\n}\n\nconst WINDOWS_HOTKEYS = {\n  deleteWordBackward: 'ctrl+shift?+backspace',\n  deleteWordForward: 'ctrl+shift?+delete',\n  redo: ['ctrl+y', 'ctrl+shift+z'],\n}\n\n/**\n * Create a platform-aware hotkey checker.\n */\n\nconst create = (key: string) => {\n  const generic = HOTKEYS[key]\n  const apple = APPLE_HOTKEYS[key]\n  const windows = WINDOWS_HOTKEYS[key]\n  const isGeneric = generic && isKeyHotkey(generic)\n  const isApple = apple && isKeyHotkey(apple)\n  const isWindows = windows && isKeyHotkey(windows)\n\n  return (event: KeyboardEvent) => {\n    if (isGeneric && isGeneric(event)) return true\n    if (IS_APPLE && isApple && isApple(event)) return true\n    if (!IS_APPLE && isWindows && isWindows(event)) return true\n    return false\n  }\n}\n\n/**\n * Hotkeys.\n */\n\nexport default {\n  isBold: create('bold'),\n  isCompose: create('compose'),\n  isMoveBackward: create('moveBackward'),\n  isMoveForward: create('moveForward'),\n  isDeleteBackward: create('deleteBackward'),\n  isDeleteForward: create('deleteForward'),\n  isDeleteLineBackward: create('deleteLineBackward'),\n  isDeleteLineForward: create('deleteLineForward'),\n  isDeleteWordBackward: create('deleteWordBackward'),\n  isDeleteWordForward: create('deleteWordForward'),\n  isExtendBackward: create('extendBackward'),\n  isExtendForward: create('extendForward'),\n  isExtendLineBackward: create('extendLineBackward'),\n  isExtendLineForward: create('extendLineForward'),\n  isItalic: create('italic'),\n  isMoveLineBackward: create('moveLineBackward'),\n  isMoveLineForward: create('moveLineForward'),\n  isMoveWordBackward: create('moveWordBackward'),\n  isMoveWordForward: create('moveWordForward'),\n  isRedo: create('redo'),\n  isSplitBlock: create('splitBlock'),\n  isTransposeCharacter: create('transposeCharacter'),\n  isUndo: create('undo'),\n}\n","import React, { useEffect, useRef, useMemo, useCallback } from 'react'\nimport {\n  Editor,\n  Element,\n  NodeEntry,\n  Node,\n  Range,\n  Text,\n  Transforms,\n  Path,\n} from 'slate'\nimport throttle from 'lodash/throttle'\nimport scrollIntoView from 'scroll-into-view-if-needed'\n\nimport Children from './children'\nimport Hotkeys from '../utils/hotkeys'\nimport { IS_FIREFOX, IS_SAFARI, IS_EDGE_LEGACY } from '../utils/environment'\nimport { ReactEditor } from '..'\nimport { ReadOnlyContext } from '../hooks/use-read-only'\nimport { useSlate } from '../hooks/use-slate'\nimport { useIsomorphicLayoutEffect } from '../hooks/use-isomorphic-layout-effect'\nimport {\n  DOMElement,\n  DOMNode,\n  DOMRange,\n  isDOMElement,\n  isDOMNode,\n  isDOMText,\n  DOMStaticRange,\n  isPlainTextOnlyPaste,\n} from '../utils/dom'\nimport {\n  EDITOR_TO_ELEMENT,\n  ELEMENT_TO_NODE,\n  IS_READ_ONLY,\n  NODE_TO_ELEMENT,\n  IS_FOCUSED,\n  PLACEHOLDER_SYMBOL,\n} from '../utils/weak-maps'\n\n// COMPAT: Firefox/Edge Legacy don't support the `beforeinput` event\nconst HAS_BEFORE_INPUT_SUPPORT = !(IS_FIREFOX || IS_EDGE_LEGACY)\n\n/**\n * `RenderElementProps` are passed to the `renderElement` handler.\n */\n\nexport interface RenderElementProps {\n  children: any\n  element: Element\n  attributes: {\n    'data-slate-node': 'element'\n    'data-slate-inline'?: true\n    'data-slate-void'?: true\n    dir?: 'rtl'\n    ref: any\n  }\n}\n\n/**\n * `RenderLeafProps` are passed to the `renderLeaf` handler.\n */\n\nexport interface RenderLeafProps {\n  children: any\n  leaf: Text\n  text: Text\n  attributes: {\n    'data-slate-leaf': true\n  }\n}\n\n/**\n * `EditableProps` are passed to the `<Editable>` component.\n */\n\nexport type EditableProps = {\n  decorate?: (entry: NodeEntry) => Range[]\n  onDOMBeforeInput?: (event: Event) => void\n  placeholder?: string\n  readOnly?: boolean\n  role?: string\n  style?: React.CSSProperties\n  renderElement?: (props: RenderElementProps) => JSX.Element\n  renderLeaf?: (props: RenderLeafProps) => JSX.Element\n  as?: React.ElementType\n} & React.TextareaHTMLAttributes<HTMLDivElement>\n\n/**\n * Editable.\n */\n\nexport const Editable = (props: EditableProps) => {\n  const {\n    autoFocus,\n    decorate = defaultDecorate,\n    onDOMBeforeInput: propsOnDOMBeforeInput,\n    placeholder,\n    readOnly = false,\n    renderElement,\n    renderLeaf,\n    style = {},\n    as: Component = 'div',\n    ...attributes\n  } = props\n  const editor = useSlate()\n  const ref = useRef<HTMLDivElement>(null)\n\n  // Update internal state on each render.\n  IS_READ_ONLY.set(editor, readOnly)\n\n  // Keep track of some state for the event handler logic.\n  const state = useMemo(\n    () => ({\n      isComposing: false,\n      isUpdatingSelection: false,\n      latestElement: null as DOMElement | null,\n    }),\n    []\n  )\n\n  // Update element-related weak maps with the DOM element ref.\n  useIsomorphicLayoutEffect(() => {\n    if (ref.current) {\n      EDITOR_TO_ELEMENT.set(editor, ref.current)\n      NODE_TO_ELEMENT.set(editor, ref.current)\n      ELEMENT_TO_NODE.set(ref.current, editor)\n    } else {\n      NODE_TO_ELEMENT.delete(editor)\n    }\n  })\n\n  // Whenever the editor updates, make sure the DOM selection state is in sync.\n  useIsomorphicLayoutEffect(() => {\n    const { selection } = editor\n    const domSelection = window.getSelection()\n\n    if (state.isComposing || !domSelection || !ReactEditor.isFocused(editor)) {\n      return\n    }\n\n    const hasDomSelection = domSelection.type !== 'None'\n\n    // If the DOM selection is properly unset, we're done.\n    if (!selection && !hasDomSelection) {\n      return\n    }\n\n    // verify that the dom selection is in the editor\n    const editorElement = EDITOR_TO_ELEMENT.get(editor)!\n    let hasDomSelectionInEditor = false\n    if (\n      editorElement.contains(domSelection.anchorNode) &&\n      editorElement.contains(domSelection.focusNode)\n    ) {\n      hasDomSelectionInEditor = true\n    }\n\n    // If the DOM selection is in the editor and the editor selection is already correct, we're done.\n    if (\n      hasDomSelection &&\n      hasDomSelectionInEditor &&\n      selection &&\n      Range.equals(ReactEditor.toSlateRange(editor, domSelection), selection)\n    ) {\n      return\n    }\n\n    // Otherwise the DOM selection is out of sync, so update it.\n    const el = ReactEditor.toDOMNode(editor, editor)\n    state.isUpdatingSelection = true\n    domSelection.removeAllRanges()\n\n    const newDomRange = selection && ReactEditor.toDOMRange(editor, selection)\n\n    if (newDomRange) {\n      domSelection.addRange(newDomRange!)\n      const leafEl = newDomRange.startContainer.parentElement!\n      scrollIntoView(leafEl, {\n        scrollMode: 'if-needed',\n        boundary: el,\n      })\n    }\n\n    setTimeout(() => {\n      // COMPAT: In Firefox, it's not enough to create a range, you also need\n      // to focus the contenteditable element too. (2016/11/16)\n      if (newDomRange && IS_FIREFOX) {\n        el.focus()\n      }\n\n      state.isUpdatingSelection = false\n    })\n  })\n\n  // The autoFocus TextareaHTMLAttribute doesn't do anything on a div, so it\n  // needs to be manually focused.\n  useEffect(() => {\n    if (ref.current && autoFocus) {\n      ref.current.focus()\n    }\n  }, [autoFocus])\n\n  // Listen on the native `beforeinput` event to get real \"Level 2\" events. This\n  // is required because React's `beforeinput` is fake and never really attaches\n  // to the real event sadly. (2019/11/01)\n  // https://github.com/facebook/react/issues/11211\n  const onDOMBeforeInput = useCallback(\n    (\n      event: Event & {\n        data: string | null\n        dataTransfer: DataTransfer | null\n        getTargetRanges(): DOMStaticRange[]\n        inputType: string\n        isComposing: boolean\n      }\n    ) => {\n      if (\n        !readOnly &&\n        hasEditableTarget(editor, event.target) &&\n        !isDOMEventHandled(event, propsOnDOMBeforeInput)\n      ) {\n        const { selection } = editor\n        const { inputType: type } = event\n        const data = event.dataTransfer || event.data || undefined\n\n        // These two types occur while a user is composing text and can't be\n        // cancelled. Let them through and wait for the composition to end.\n        if (\n          type === 'insertCompositionText' ||\n          type === 'deleteCompositionText'\n        ) {\n          return\n        }\n\n        event.preventDefault()\n\n        // COMPAT: For the deleting forward/backward input types we don't want\n        // to change the selection because it is the range that will be deleted,\n        // and those commands determine that for themselves.\n        if (!type.startsWith('delete') || type.startsWith('deleteBy')) {\n          const [targetRange] = event.getTargetRanges()\n\n          if (targetRange) {\n            const range = ReactEditor.toSlateRange(editor, targetRange)\n\n            if (!selection || !Range.equals(selection, range)) {\n              Transforms.select(editor, range)\n            }\n          }\n        }\n\n        // COMPAT: If the selection is expanded, even if the command seems like\n        // a delete forward/backward command it should delete the selection.\n        if (\n          selection &&\n          Range.isExpanded(selection) &&\n          type.startsWith('delete')\n        ) {\n          Editor.deleteFragment(editor)\n          return\n        }\n\n        switch (type) {\n          case 'deleteByComposition':\n          case 'deleteByCut':\n          case 'deleteByDrag': {\n            Editor.deleteFragment(editor)\n            break\n          }\n\n          case 'deleteContent':\n          case 'deleteContentForward': {\n            Editor.deleteForward(editor)\n            break\n          }\n\n          case 'deleteContentBackward': {\n            Editor.deleteBackward(editor)\n            break\n          }\n\n          case 'deleteEntireSoftLine': {\n            Editor.deleteBackward(editor, { unit: 'line' })\n            Editor.deleteForward(editor, { unit: 'line' })\n            break\n          }\n\n          case 'deleteHardLineBackward': {\n            Editor.deleteBackward(editor, { unit: 'block' })\n            break\n          }\n\n          case 'deleteSoftLineBackward': {\n            Editor.deleteBackward(editor, { unit: 'line' })\n            break\n          }\n\n          case 'deleteHardLineForward': {\n            Editor.deleteForward(editor, { unit: 'block' })\n            break\n          }\n\n          case 'deleteSoftLineForward': {\n            Editor.deleteForward(editor, { unit: 'line' })\n            break\n          }\n\n          case 'deleteWordBackward': {\n            Editor.deleteBackward(editor, { unit: 'word' })\n            break\n          }\n\n          case 'deleteWordForward': {\n            Editor.deleteForward(editor, { unit: 'word' })\n            break\n          }\n\n          case 'insertLineBreak':\n          case 'insertParagraph': {\n            Editor.insertBreak(editor)\n            break\n          }\n\n          case 'insertFromComposition':\n          case 'insertFromDrop':\n          case 'insertFromPaste':\n          case 'insertFromYank':\n          case 'insertReplacementText':\n          case 'insertText': {\n            if (data instanceof DataTransfer) {\n              ReactEditor.insertData(editor, data)\n            } else if (typeof data === 'string') {\n              Editor.insertText(editor, data)\n            }\n\n            break\n          }\n        }\n      }\n    },\n    [readOnly]\n  )\n\n  // Attach a native DOM event handler for `beforeinput` events, because React's\n  // built-in `onBeforeInput` is actually a leaky polyfill that doesn't expose\n  // real `beforeinput` events sadly... (2019/11/04)\n  // https://github.com/facebook/react/issues/11211\n  useIsomorphicLayoutEffect(() => {\n    if (ref.current) {\n      // @ts-ignore The `beforeinput` event isn't recognized.\n      ref.current.addEventListener('beforeinput', onDOMBeforeInput)\n    }\n\n    return () => {\n      if (ref.current) {\n        // @ts-ignore The `beforeinput` event isn't recognized.\n        ref.current.removeEventListener('beforeinput', onDOMBeforeInput)\n      }\n    }\n  }, [onDOMBeforeInput])\n\n  // Listen on the native `selectionchange` event to be able to update any time\n  // the selection changes. This is required because React's `onSelect` is leaky\n  // and non-standard so it doesn't fire until after a selection has been\n  // released. This causes issues in situations where another change happens\n  // while a selection is being dragged.\n  const onDOMSelectionChange = useCallback(\n    throttle(() => {\n      if (!readOnly && !state.isComposing && !state.isUpdatingSelection) {\n        const { activeElement } = window.document\n        const el = ReactEditor.toDOMNode(editor, editor)\n        const domSelection = window.getSelection()\n\n        if (activeElement === el) {\n          state.latestElement = activeElement\n          IS_FOCUSED.set(editor, true)\n        } else {\n          IS_FOCUSED.delete(editor)\n        }\n\n        if (!domSelection) {\n          return Transforms.deselect(editor)\n        }\n\n        const { anchorNode, focusNode } = domSelection\n\n        const anchorNodeSelectable =\n          hasEditableTarget(editor, anchorNode) ||\n          isTargetInsideVoid(editor, anchorNode)\n\n        const focusNodeSelectable =\n          hasEditableTarget(editor, focusNode) ||\n          isTargetInsideVoid(editor, focusNode)\n\n        if (anchorNodeSelectable && focusNodeSelectable) {\n          const range = ReactEditor.toSlateRange(editor, domSelection)\n          Transforms.select(editor, range)\n        } else {\n          Transforms.deselect(editor)\n        }\n      }\n    }, 100),\n    [readOnly]\n  )\n\n  // Attach a native DOM event handler for `selectionchange`, because React's\n  // built-in `onSelect` handler doesn't fire for all selection changes. It's a\n  // leaky polyfill that only fires on keypresses or clicks. Instead, we want to\n  // fire for any change to the selection inside the editor. (2019/11/04)\n  // https://github.com/facebook/react/issues/5785\n  useIsomorphicLayoutEffect(() => {\n    window.document.addEventListener('selectionchange', onDOMSelectionChange)\n\n    return () => {\n      window.document.removeEventListener(\n        'selectionchange',\n        onDOMSelectionChange\n      )\n    }\n  }, [onDOMSelectionChange])\n\n  const decorations = decorate([editor, []])\n\n  if (\n    placeholder &&\n    editor.children.length === 1 &&\n    Array.from(Node.texts(editor)).length === 1 &&\n    Node.string(editor) === ''\n  ) {\n    const start = Editor.start(editor, [])\n    decorations.push({\n      [PLACEHOLDER_SYMBOL]: true,\n      placeholder,\n      anchor: start,\n      focus: start,\n    })\n  }\n\n  return (\n    <ReadOnlyContext.Provider value={readOnly}>\n      <Component\n        // COMPAT: The Grammarly Chrome extension works by changing the DOM\n        // out from under `contenteditable` elements, which leads to weird\n        // behaviors so we have to disable it like editor. (2017/04/24)\n        data-gramm={false}\n        role={readOnly ? undefined : 'textbox'}\n        {...attributes}\n        // COMPAT: Certain browsers don't support the `beforeinput` event, so we'd\n        // have to use hacks to make these replacement-based features work.\n        spellCheck={\n          !HAS_BEFORE_INPUT_SUPPORT ? undefined : attributes.spellCheck\n        }\n        autoCorrect={\n          !HAS_BEFORE_INPUT_SUPPORT ? undefined : attributes.autoCorrect\n        }\n        autoCapitalize={\n          !HAS_BEFORE_INPUT_SUPPORT ? undefined : attributes.autoCapitalize\n        }\n        data-slate-editor\n        data-slate-node=\"value\"\n        contentEditable={readOnly ? undefined : true}\n        suppressContentEditableWarning\n        ref={ref}\n        style={{\n          // Prevent the default outline styles.\n          outline: 'none',\n          // Preserve adjacent whitespace and new lines.\n          whiteSpace: 'pre-wrap',\n          // Allow words to break if they are too long.\n          wordWrap: 'break-word',\n          // Allow for passed-in styles to override anything.\n          ...style,\n        }}\n        onBeforeInput={useCallback(\n          (event: React.FormEvent<HTMLDivElement>) => {\n            // COMPAT: Certain browsers don't support the `beforeinput` event, so we\n            // fall back to React's leaky polyfill instead just for it. It\n            // only works for the `insertText` input type.\n            if (\n              !HAS_BEFORE_INPUT_SUPPORT &&\n              !readOnly &&\n              !isEventHandled(event, attributes.onBeforeInput) &&\n              hasEditableTarget(editor, event.target)\n            ) {\n              event.preventDefault()\n              const text = (event as any).data as string\n              Editor.insertText(editor, text)\n            }\n          },\n          [readOnly]\n        )}\n        onBlur={useCallback(\n          (event: React.FocusEvent<HTMLDivElement>) => {\n            if (\n              readOnly ||\n              state.isUpdatingSelection ||\n              !hasEditableTarget(editor, event.target) ||\n              isEventHandled(event, attributes.onBlur)\n            ) {\n              return\n            }\n\n            // COMPAT: If the current `activeElement` is still the previous\n            // one, this is due to the window being blurred when the tab\n            // itself becomes unfocused, so we want to abort early to allow to\n            // editor to stay focused when the tab becomes focused again.\n            if (state.latestElement === window.document.activeElement) {\n              return\n            }\n\n            const { relatedTarget } = event\n            const el = ReactEditor.toDOMNode(editor, editor)\n\n            // COMPAT: The event should be ignored if the focus is returning\n            // to the editor from an embedded editable element (eg. an <input>\n            // element inside a void node).\n            if (relatedTarget === el) {\n              return\n            }\n\n            // COMPAT: The event should be ignored if the focus is moving from\n            // the editor to inside a void node's spacer element.\n            if (\n              isDOMElement(relatedTarget) &&\n              relatedTarget.hasAttribute('data-slate-spacer')\n            ) {\n              return\n            }\n\n            // COMPAT: The event should be ignored if the focus is moving to a\n            // non- editable section of an element that isn't a void node (eg.\n            // a list item of the check list example).\n            if (\n              relatedTarget != null &&\n              isDOMNode(relatedTarget) &&\n              ReactEditor.hasDOMNode(editor, relatedTarget)\n            ) {\n              const node = ReactEditor.toSlateNode(editor, relatedTarget)\n\n              if (Element.isElement(node) && !editor.isVoid(node)) {\n                return\n              }\n            }\n\n            IS_FOCUSED.delete(editor)\n          },\n          [readOnly, attributes.onBlur]\n        )}\n        onClick={useCallback(\n          (event: React.MouseEvent<HTMLDivElement>) => {\n            if (\n              !readOnly &&\n              hasTarget(editor, event.target) &&\n              !isEventHandled(event, attributes.onClick) &&\n              isDOMNode(event.target)\n            ) {\n              const node = ReactEditor.toSlateNode(editor, event.target)\n              const path = ReactEditor.findPath(editor, node)\n              const start = Editor.start(editor, path)\n              const end = Editor.end(editor, path)\n\n              const startVoid = Editor.void(editor, { at: start })\n              const endVoid = Editor.void(editor, { at: end })\n\n              if (\n                startVoid &&\n                endVoid &&\n                Path.equals(startVoid[1], endVoid[1])\n              ) {\n                const range = Editor.range(editor, start)\n                Transforms.select(editor, range)\n              }\n            }\n          },\n          [readOnly, attributes.onClick]\n        )}\n        onCompositionEnd={useCallback(\n          (event: React.CompositionEvent<HTMLDivElement>) => {\n            if (\n              hasEditableTarget(editor, event.target) &&\n              !isEventHandled(event, attributes.onCompositionEnd)\n            ) {\n              state.isComposing = false\n\n              // COMPAT: In Chrome, `beforeinput` events for compositions\n              // aren't correct and never fire the \"insertFromComposition\"\n              // type that we need. So instead, insert whenever a composition\n              // ends since it will already have been committed to the DOM.\n              if (!IS_SAFARI && !IS_FIREFOX && event.data) {\n                Editor.insertText(editor, event.data)\n              }\n            }\n          },\n          [attributes.onCompositionEnd]\n        )}\n        onCompositionStart={useCallback(\n          (event: React.CompositionEvent<HTMLDivElement>) => {\n            if (\n              hasEditableTarget(editor, event.target) &&\n              !isEventHandled(event, attributes.onCompositionStart)\n            ) {\n              state.isComposing = true\n            }\n          },\n          [attributes.onCompositionStart]\n        )}\n        onCopy={useCallback(\n          (event: React.ClipboardEvent<HTMLDivElement>) => {\n            if (\n              hasEditableTarget(editor, event.target) &&\n              !isEventHandled(event, attributes.onCopy)\n            ) {\n              event.preventDefault()\n              ReactEditor.setFragmentData(editor, event.clipboardData)\n            }\n          },\n          [attributes.onCopy]\n        )}\n        onCut={useCallback(\n          (event: React.ClipboardEvent<HTMLDivElement>) => {\n            if (\n              !readOnly &&\n              hasEditableTarget(editor, event.target) &&\n              !isEventHandled(event, attributes.onCut)\n            ) {\n              event.preventDefault()\n              ReactEditor.setFragmentData(editor, event.clipboardData)\n              const { selection } = editor\n\n              if (selection && Range.isExpanded(selection)) {\n                Editor.deleteFragment(editor)\n              }\n            }\n          },\n          [readOnly, attributes.onCut]\n        )}\n        onDragOver={useCallback(\n          (event: React.DragEvent<HTMLDivElement>) => {\n            if (\n              hasTarget(editor, event.target) &&\n              !isEventHandled(event, attributes.onDragOver)\n            ) {\n              // Only when the target is void, call `preventDefault` to signal\n              // that drops are allowed. Editable content is droppable by\n              // default, and calling `preventDefault` hides the cursor.\n              const node = ReactEditor.toSlateNode(editor, event.target)\n\n              if (Editor.isVoid(editor, node)) {\n                event.preventDefault()\n              }\n            }\n          },\n          [attributes.onDragOver]\n        )}\n        onDragStart={useCallback(\n          (event: React.DragEvent<HTMLDivElement>) => {\n            if (\n              hasTarget(editor, event.target) &&\n              !isEventHandled(event, attributes.onDragStart)\n            ) {\n              const node = ReactEditor.toSlateNode(editor, event.target)\n              const path = ReactEditor.findPath(editor, node)\n              const voidMatch = Editor.void(editor, { at: path })\n\n              // If starting a drag on a void node, make sure it is selected\n              // so that it shows up in the selection's fragment.\n              if (voidMatch) {\n                const range = Editor.range(editor, path)\n                Transforms.select(editor, range)\n              }\n\n              ReactEditor.setFragmentData(editor, event.dataTransfer)\n            }\n          },\n          [attributes.onDragStart]\n        )}\n        onDrop={useCallback(\n          (event: React.DragEvent<HTMLDivElement>) => {\n            if (\n              hasTarget(editor, event.target) &&\n              !readOnly &&\n              !isEventHandled(event, attributes.onDrop)\n            ) {\n              // COMPAT: Certain browsers don't fire `beforeinput` events at all, and\n              // Chromium browsers don't properly fire them for files being\n              // dropped into a `contenteditable`. (2019/11/26)\n              // https://bugs.chromium.org/p/chromium/issues/detail?id=1028668\n              if (\n                !HAS_BEFORE_INPUT_SUPPORT ||\n                (!IS_SAFARI && event.dataTransfer.files.length > 0)\n              ) {\n                event.preventDefault()\n                const range = ReactEditor.findEventRange(editor, event)\n                const data = event.dataTransfer\n                Transforms.select(editor, range)\n                ReactEditor.insertData(editor, data)\n              }\n            }\n          },\n          [readOnly, attributes.onDrop]\n        )}\n        onFocus={useCallback(\n          (event: React.FocusEvent<HTMLDivElement>) => {\n            if (\n              !readOnly &&\n              !state.isUpdatingSelection &&\n              hasEditableTarget(editor, event.target) &&\n              !isEventHandled(event, attributes.onFocus)\n            ) {\n              const el = ReactEditor.toDOMNode(editor, editor)\n              state.latestElement = window.document.activeElement\n\n              // COMPAT: If the editor has nested editable elements, the focus\n              // can go to them. In Firefox, this must be prevented because it\n              // results in issues with keyboard navigation. (2017/03/30)\n              if (IS_FIREFOX && event.target !== el) {\n                el.focus()\n                return\n              }\n\n              IS_FOCUSED.set(editor, true)\n            }\n          },\n          [readOnly, attributes.onFocus]\n        )}\n        onKeyDown={useCallback(\n          (event: React.KeyboardEvent<HTMLDivElement>) => {\n            if (\n              !readOnly &&\n              hasEditableTarget(editor, event.target) &&\n              !isEventHandled(event, attributes.onKeyDown)\n            ) {\n              const { nativeEvent } = event\n              const { selection } = editor\n\n              // COMPAT: Since we prevent the default behavior on\n              // `beforeinput` events, the browser doesn't think there's ever\n              // any history stack to undo or redo, so we have to manage these\n              // hotkeys ourselves. (2019/11/06)\n              if (Hotkeys.isRedo(nativeEvent)) {\n                event.preventDefault()\n\n                if (typeof editor.redo === 'function') {\n                  editor.redo()\n                }\n\n                return\n              }\n\n              if (Hotkeys.isUndo(nativeEvent)) {\n                event.preventDefault()\n\n                if (typeof editor.undo === 'function') {\n                  editor.undo()\n                }\n\n                return\n              }\n\n              // COMPAT: Certain browsers don't handle the selection updates\n              // properly. In Chrome, the selection isn't properly extended.\n              // And in Firefox, the selection isn't properly collapsed.\n              // (2017/10/17)\n              if (Hotkeys.isMoveLineBackward(nativeEvent)) {\n                event.preventDefault()\n                Transforms.move(editor, { unit: 'line', reverse: true })\n                return\n              }\n\n              if (Hotkeys.isMoveLineForward(nativeEvent)) {\n                event.preventDefault()\n                Transforms.move(editor, { unit: 'line' })\n                return\n              }\n\n              if (Hotkeys.isExtendLineBackward(nativeEvent)) {\n                event.preventDefault()\n                Transforms.move(editor, {\n                  unit: 'line',\n                  edge: 'focus',\n                  reverse: true,\n                })\n                return\n              }\n\n              if (Hotkeys.isExtendLineForward(nativeEvent)) {\n                event.preventDefault()\n                Transforms.move(editor, { unit: 'line', edge: 'focus' })\n                return\n              }\n\n              // COMPAT: If a void node is selected, or a zero-width text node\n              // adjacent to an inline is selected, we need to handle these\n              // hotkeys manually because browsers won't be able to skip over\n              // the void node with the zero-width space not being an empty\n              // string.\n              if (Hotkeys.isMoveBackward(nativeEvent)) {\n                event.preventDefault()\n\n                if (selection && Range.isCollapsed(selection)) {\n                  Transforms.move(editor, { reverse: true })\n                } else {\n                  Transforms.collapse(editor, { edge: 'start' })\n                }\n\n                return\n              }\n\n              if (Hotkeys.isMoveForward(nativeEvent)) {\n                event.preventDefault()\n\n                if (selection && Range.isCollapsed(selection)) {\n                  Transforms.move(editor)\n                } else {\n                  Transforms.collapse(editor, { edge: 'end' })\n                }\n\n                return\n              }\n\n              if (Hotkeys.isMoveWordBackward(nativeEvent)) {\n                event.preventDefault()\n                Transforms.move(editor, { unit: 'word', reverse: true })\n                return\n              }\n\n              if (Hotkeys.isMoveWordForward(nativeEvent)) {\n                event.preventDefault()\n                Transforms.move(editor, { unit: 'word' })\n                return\n              }\n\n              // COMPAT: Certain browsers don't support the `beforeinput` event, so we\n              // fall back to guessing at the input intention for hotkeys.\n              // COMPAT: In iOS, some of these hotkeys are handled in the\n              if (!HAS_BEFORE_INPUT_SUPPORT) {\n                // We don't have a core behavior for these, but they change the\n                // DOM if we don't prevent them, so we have to.\n                if (\n                  Hotkeys.isBold(nativeEvent) ||\n                  Hotkeys.isItalic(nativeEvent) ||\n                  Hotkeys.isTransposeCharacter(nativeEvent)\n                ) {\n                  event.preventDefault()\n                  return\n                }\n\n                if (Hotkeys.isSplitBlock(nativeEvent)) {\n                  event.preventDefault()\n                  Editor.insertBreak(editor)\n                  return\n                }\n\n                if (Hotkeys.isDeleteBackward(nativeEvent)) {\n                  event.preventDefault()\n\n                  if (selection && Range.isExpanded(selection)) {\n                    Editor.deleteFragment(editor)\n                  } else {\n                    Editor.deleteBackward(editor)\n                  }\n\n                  return\n                }\n\n                if (Hotkeys.isDeleteForward(nativeEvent)) {\n                  event.preventDefault()\n\n                  if (selection && Range.isExpanded(selection)) {\n                    Editor.deleteFragment(editor)\n                  } else {\n                    Editor.deleteForward(editor)\n                  }\n\n                  return\n                }\n\n                if (Hotkeys.isDeleteLineBackward(nativeEvent)) {\n                  event.preventDefault()\n\n                  if (selection && Range.isExpanded(selection)) {\n                    Editor.deleteFragment(editor)\n                  } else {\n                    Editor.deleteBackward(editor, { unit: 'line' })\n                  }\n\n                  return\n                }\n\n                if (Hotkeys.isDeleteLineForward(nativeEvent)) {\n                  event.preventDefault()\n\n                  if (selection && Range.isExpanded(selection)) {\n                    Editor.deleteFragment(editor)\n                  } else {\n                    Editor.deleteForward(editor, { unit: 'line' })\n                  }\n\n                  return\n                }\n\n                if (Hotkeys.isDeleteWordBackward(nativeEvent)) {\n                  event.preventDefault()\n\n                  if (selection && Range.isExpanded(selection)) {\n                    Editor.deleteFragment(editor)\n                  } else {\n                    Editor.deleteBackward(editor, { unit: 'word' })\n                  }\n\n                  return\n                }\n\n                if (Hotkeys.isDeleteWordForward(nativeEvent)) {\n                  event.preventDefault()\n\n                  if (selection && Range.isExpanded(selection)) {\n                    Editor.deleteFragment(editor)\n                  } else {\n                    Editor.deleteForward(editor, { unit: 'word' })\n                  }\n\n                  return\n                }\n              }\n            }\n          },\n          [readOnly, attributes.onKeyDown]\n        )}\n        onPaste={useCallback(\n          (event: React.ClipboardEvent<HTMLDivElement>) => {\n            // COMPAT: Certain browsers don't support the `beforeinput` event, so we\n            // fall back to React's `onPaste` here instead.\n            // COMPAT: Firefox, Chrome and Safari are not emitting `beforeinput` events\n            // when \"paste without formatting\" option is used.\n            // This unfortunately needs to be handled with paste events instead.\n            if (\n              !isEventHandled(event, attributes.onPaste) &&\n              (!HAS_BEFORE_INPUT_SUPPORT ||\n                isPlainTextOnlyPaste(event.nativeEvent)) &&\n              !readOnly &&\n              hasEditableTarget(editor, event.target)\n            ) {\n              event.preventDefault()\n              ReactEditor.insertData(editor, event.clipboardData)\n            }\n          },\n          [readOnly, attributes.onPaste]\n        )}\n      >\n        <Children\n          decorate={decorate}\n          decorations={decorations}\n          node={editor}\n          renderElement={renderElement}\n          renderLeaf={renderLeaf}\n          selection={editor.selection}\n        />\n      </Component>\n    </ReadOnlyContext.Provider>\n  )\n}\n\n/**\n * A default memoized decorate function.\n */\n\nconst defaultDecorate = () => []\n\n/**\n * Check if two DOM range objects are equal.\n */\n\nconst isRangeEqual = (a: DOMRange, b: DOMRange) => {\n  return (\n    (a.startContainer === b.startContainer &&\n      a.startOffset === b.startOffset &&\n      a.endContainer === b.endContainer &&\n      a.endOffset === b.endOffset) ||\n    (a.startContainer === b.endContainer &&\n      a.startOffset === b.endOffset &&\n      a.endContainer === b.startContainer &&\n      a.endOffset === b.startOffset)\n  )\n}\n\n/**\n * Check if the target is in the editor.\n */\n\nconst hasTarget = (\n  editor: ReactEditor,\n  target: EventTarget | null\n): target is DOMNode => {\n  return isDOMNode(target) && ReactEditor.hasDOMNode(editor, target)\n}\n\n/**\n * Check if the target is editable and in the editor.\n */\n\nconst hasEditableTarget = (\n  editor: ReactEditor,\n  target: EventTarget | null\n): target is DOMNode => {\n  return (\n    isDOMNode(target) &&\n    ReactEditor.hasDOMNode(editor, target, { editable: true })\n  )\n}\n\n/**\n * Check if the target is inside void and in the editor.\n */\n\nconst isTargetInsideVoid = (\n  editor: ReactEditor,\n  target: EventTarget | null\n): boolean => {\n  const slateNode =\n    hasTarget(editor, target) && ReactEditor.toSlateNode(editor, target)\n  return Editor.isVoid(editor, slateNode)\n}\n\n/**\n * Check if an event is overrided by a handler.\n */\n\nconst isEventHandled = <\n  EventType extends React.SyntheticEvent<unknown, unknown>\n>(\n  event: EventType,\n  handler?: (event: EventType) => void\n) => {\n  if (!handler) {\n    return false\n  }\n\n  handler(event)\n  return event.isDefaultPrevented() || event.isPropagationStopped()\n}\n\n/**\n * Check if a DOM event is overrided by a handler.\n */\n\nconst isDOMEventHandled = (event: Event, handler?: (event: Event) => void) => {\n  if (!handler) {\n    return false\n  }\n\n  handler(event)\n  return event.defaultPrevented\n}\n","function _defineProperty(obj, key, value) {\n  if (key in obj) {\n    Object.defineProperty(obj, key, {\n      value: value,\n      enumerable: true,\n      configurable: true,\n      writable: true\n    });\n  } else {\n    obj[key] = value;\n  }\n\n  return obj;\n}\n\nmodule.exports = _defineProperty;","function _assertThisInitialized(self) {\n  if (self === void 0) {\n    throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\");\n  }\n\n  return self;\n}\n\nmodule.exports = _assertThisInitialized;","!function(t,e){\"object\"==typeof exports&&\"undefined\"!=typeof module?module.exports=e():\"function\"==typeof define&&define.amd?define(e):t.dayjs=e()}(this,function(){\"use strict\";var t=\"millisecond\",e=\"second\",n=\"minute\",r=\"hour\",i=\"day\",s=\"week\",u=\"month\",a=\"quarter\",o=\"year\",f=\"date\",h=/^(\\d{4})[-/]?(\\d{1,2})?[-/]?(\\d{0,2})[^0-9]*(\\d{1,2})?:?(\\d{1,2})?:?(\\d{1,2})?.?(\\d+)?$/,c=/\\[([^\\]]+)]|Y{2,4}|M{1,4}|D{1,2}|d{1,4}|H{1,2}|h{1,2}|a|A|m{1,2}|s{1,2}|Z{1,2}|SSS/g,d={name:\"en\",weekdays:\"Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday\".split(\"_\"),months:\"January_February_March_April_May_June_July_August_September_October_November_December\".split(\"_\")},$=function(t,e,n){var r=String(t);return!r||r.length>=e?t:\"\"+Array(e+1-r.length).join(n)+t},l={s:$,z:function(t){var e=-t.utcOffset(),n=Math.abs(e),r=Math.floor(n/60),i=n%60;return(e<=0?\"+\":\"-\")+$(r,2,\"0\")+\":\"+$(i,2,\"0\")},m:function t(e,n){if(e.date()<n.date())return-t(n,e);var r=12*(n.year()-e.year())+(n.month()-e.month()),i=e.clone().add(r,u),s=n-i<0,a=e.clone().add(r+(s?-1:1),u);return+(-(r+(n-i)/(s?i-a:a-i))||0)},a:function(t){return t<0?Math.ceil(t)||0:Math.floor(t)},p:function(h){return{M:u,y:o,w:s,d:i,D:f,h:r,m:n,s:e,ms:t,Q:a}[h]||String(h||\"\").toLowerCase().replace(/s$/,\"\")},u:function(t){return void 0===t}},y=\"en\",M={};M[y]=d;var m=function(t){return t instanceof S},D=function(t,e,n){var r;if(!t)return y;if(\"string\"==typeof t)M[t]&&(r=t),e&&(M[t]=e,r=t);else{var i=t.name;M[i]=t,r=i}return!n&&r&&(y=r),r||!n&&y},v=function(t,e){if(m(t))return t.clone();var n=\"object\"==typeof e?e:{};return n.date=t,n.args=arguments,new S(n)},g=l;g.l=D,g.i=m,g.w=function(t,e){return v(t,{locale:e.$L,utc:e.$u,x:e.$x,$offset:e.$offset})};var S=function(){function d(t){this.$L=this.$L||D(t.locale,null,!0),this.parse(t)}var $=d.prototype;return $.parse=function(t){this.$d=function(t){var e=t.date,n=t.utc;if(null===e)return new Date(NaN);if(g.u(e))return new Date;if(e instanceof Date)return new Date(e);if(\"string\"==typeof e&&!/Z$/i.test(e)){var r=e.match(h);if(r){var i=r[2]-1||0,s=(r[7]||\"0\").substring(0,3);return n?new Date(Date.UTC(r[1],i,r[3]||1,r[4]||0,r[5]||0,r[6]||0,s)):new Date(r[1],i,r[3]||1,r[4]||0,r[5]||0,r[6]||0,s)}}return new Date(e)}(t),this.$x=t.x||{},this.init()},$.init=function(){var t=this.$d;this.$y=t.getFullYear(),this.$M=t.getMonth(),this.$D=t.getDate(),this.$W=t.getDay(),this.$H=t.getHours(),this.$m=t.getMinutes(),this.$s=t.getSeconds(),this.$ms=t.getMilliseconds()},$.$utils=function(){return g},$.isValid=function(){return!(\"Invalid Date\"===this.$d.toString())},$.isSame=function(t,e){var n=v(t);return this.startOf(e)<=n&&n<=this.endOf(e)},$.isAfter=function(t,e){return v(t)<this.startOf(e)},$.isBefore=function(t,e){return this.endOf(e)<v(t)},$.$g=function(t,e,n){return g.u(t)?this[e]:this.set(n,t)},$.unix=function(){return Math.floor(this.valueOf()/1e3)},$.valueOf=function(){return this.$d.getTime()},$.startOf=function(t,a){var h=this,c=!!g.u(a)||a,d=g.p(t),$=function(t,e){var n=g.w(h.$u?Date.UTC(h.$y,e,t):new Date(h.$y,e,t),h);return c?n:n.endOf(i)},l=function(t,e){return g.w(h.toDate()[t].apply(h.toDate(\"s\"),(c?[0,0,0,0]:[23,59,59,999]).slice(e)),h)},y=this.$W,M=this.$M,m=this.$D,D=\"set\"+(this.$u?\"UTC\":\"\");switch(d){case o:return c?$(1,0):$(31,11);case u:return c?$(1,M):$(0,M+1);case s:var v=this.$locale().weekStart||0,S=(y<v?y+7:y)-v;return $(c?m-S:m+(6-S),M);case i:case f:return l(D+\"Hours\",0);case r:return l(D+\"Minutes\",1);case n:return l(D+\"Seconds\",2);case e:return l(D+\"Milliseconds\",3);default:return this.clone()}},$.endOf=function(t){return this.startOf(t,!1)},$.$set=function(s,a){var h,c=g.p(s),d=\"set\"+(this.$u?\"UTC\":\"\"),$=(h={},h[i]=d+\"Date\",h[f]=d+\"Date\",h[u]=d+\"Month\",h[o]=d+\"FullYear\",h[r]=d+\"Hours\",h[n]=d+\"Minutes\",h[e]=d+\"Seconds\",h[t]=d+\"Milliseconds\",h)[c],l=c===i?this.$D+(a-this.$W):a;if(c===u||c===o){var y=this.clone().set(f,1);y.$d[$](l),y.init(),this.$d=y.set(f,Math.min(this.$D,y.daysInMonth())).$d}else $&&this.$d[$](l);return this.init(),this},$.set=function(t,e){return this.clone().$set(t,e)},$.get=function(t){return this[g.p(t)]()},$.add=function(t,a){var f,h=this;t=Number(t);var c=g.p(a),d=function(e){var n=v(h);return g.w(n.date(n.date()+Math.round(e*t)),h)};if(c===u)return this.set(u,this.$M+t);if(c===o)return this.set(o,this.$y+t);if(c===i)return d(1);if(c===s)return d(7);var $=(f={},f[n]=6e4,f[r]=36e5,f[e]=1e3,f)[c]||1,l=this.$d.getTime()+t*$;return g.w(l,this)},$.subtract=function(t,e){return this.add(-1*t,e)},$.format=function(t){var e=this;if(!this.isValid())return\"Invalid Date\";var n=t||\"YYYY-MM-DDTHH:mm:ssZ\",r=g.z(this),i=this.$locale(),s=this.$H,u=this.$m,a=this.$M,o=i.weekdays,f=i.months,h=function(t,r,i,s){return t&&(t[r]||t(e,n))||i[r].substr(0,s)},d=function(t){return g.s(s%12||12,t,\"0\")},$=i.meridiem||function(t,e,n){var r=t<12?\"AM\":\"PM\";return n?r.toLowerCase():r},l={YY:String(this.$y).slice(-2),YYYY:this.$y,M:a+1,MM:g.s(a+1,2,\"0\"),MMM:h(i.monthsShort,a,f,3),MMMM:h(f,a),D:this.$D,DD:g.s(this.$D,2,\"0\"),d:String(this.$W),dd:h(i.weekdaysMin,this.$W,o,2),ddd:h(i.weekdaysShort,this.$W,o,3),dddd:o[this.$W],H:String(s),HH:g.s(s,2,\"0\"),h:d(1),hh:d(2),a:$(s,u,!0),A:$(s,u,!1),m:String(u),mm:g.s(u,2,\"0\"),s:String(this.$s),ss:g.s(this.$s,2,\"0\"),SSS:g.s(this.$ms,3,\"0\"),Z:r};return n.replace(c,function(t,e){return e||l[t]||r.replace(\":\",\"\")})},$.utcOffset=function(){return 15*-Math.round(this.$d.getTimezoneOffset()/15)},$.diff=function(t,f,h){var c,d=g.p(f),$=v(t),l=6e4*($.utcOffset()-this.utcOffset()),y=this-$,M=g.m(this,$);return M=(c={},c[o]=M/12,c[u]=M,c[a]=M/3,c[s]=(y-l)/6048e5,c[i]=(y-l)/864e5,c[r]=y/36e5,c[n]=y/6e4,c[e]=y/1e3,c)[d]||y,h?M:g.a(M)},$.daysInMonth=function(){return this.endOf(u).$D},$.$locale=function(){return M[this.$L]},$.locale=function(t,e){if(!t)return this.$L;var n=this.clone(),r=D(t,e,!0);return r&&(n.$L=r),n},$.clone=function(){return g.w(this.$d,this)},$.toDate=function(){return new Date(this.valueOf())},$.toJSON=function(){return this.isValid()?this.toISOString():null},$.toISOString=function(){return this.$d.toISOString()},$.toString=function(){return this.$d.toUTCString()},d}(),p=S.prototype;return v.prototype=p,[[\"$ms\",t],[\"$s\",e],[\"$m\",n],[\"$H\",r],[\"$W\",i],[\"$M\",u],[\"$y\",o],[\"$D\",f]].forEach(function(t){p[t[1]]=function(e){return this.$g(e,t[0],t[1])}}),v.extend=function(t,e){return t(e,S,v),v},v.locale=D,v.isDayjs=m,v.unix=function(t){return v(1e3*t)},v.en=M[y],v.Ls=M,v});\n","/*!\n * isobject <https://github.com/jonschlinkert/isobject>\n *\n * Copyright (c) 2014-2017, Jon Schlinkert.\n * Released under the MIT License.\n */\n\nfunction isObject(val) {\n  return val != null && typeof val === 'object' && Array.isArray(val) === false;\n}\n\n/*!\n * is-plain-object <https://github.com/jonschlinkert/is-plain-object>\n *\n * Copyright (c) 2014-2017, Jon Schlinkert.\n * Released under the MIT License.\n */\n\nfunction isObjectObject(o) {\n  return isObject(o) === true\n    && Object.prototype.toString.call(o) === '[object Object]';\n}\n\nfunction isPlainObject(o) {\n  var ctor,prot;\n\n  if (isObjectObject(o) === false) return false;\n\n  // If has modified constructor\n  ctor = o.constructor;\n  if (typeof ctor !== 'function') return false;\n\n  // If has modified prototype\n  prot = ctor.prototype;\n  if (isObjectObject(prot) === false) return false;\n\n  // If constructor does not have an Object-specific method\n  if (prot.hasOwnProperty('isPrototypeOf') === false) {\n    return false;\n  }\n\n  // Most likely a plain Object\n  return true;\n}\n\nexport default isPlainObject;\n","/**\n * Constants for string distance checking.\n */\n\nconst SPACE = /\\s/\nconst PUNCTUATION = /[\\u0021-\\u0023\\u0025-\\u002A\\u002C-\\u002F\\u003A\\u003B\\u003F\\u0040\\u005B-\\u005D\\u005F\\u007B\\u007D\\u00A1\\u00A7\\u00AB\\u00B6\\u00B7\\u00BB\\u00BF\\u037E\\u0387\\u055A-\\u055F\\u0589\\u058A\\u05BE\\u05C0\\u05C3\\u05C6\\u05F3\\u05F4\\u0609\\u060A\\u060C\\u060D\\u061B\\u061E\\u061F\\u066A-\\u066D\\u06D4\\u0700-\\u070D\\u07F7-\\u07F9\\u0830-\\u083E\\u085E\\u0964\\u0965\\u0970\\u0AF0\\u0DF4\\u0E4F\\u0E5A\\u0E5B\\u0F04-\\u0F12\\u0F14\\u0F3A-\\u0F3D\\u0F85\\u0FD0-\\u0FD4\\u0FD9\\u0FDA\\u104A-\\u104F\\u10FB\\u1360-\\u1368\\u1400\\u166D\\u166E\\u169B\\u169C\\u16EB-\\u16ED\\u1735\\u1736\\u17D4-\\u17D6\\u17D8-\\u17DA\\u1800-\\u180A\\u1944\\u1945\\u1A1E\\u1A1F\\u1AA0-\\u1AA6\\u1AA8-\\u1AAD\\u1B5A-\\u1B60\\u1BFC-\\u1BFF\\u1C3B-\\u1C3F\\u1C7E\\u1C7F\\u1CC0-\\u1CC7\\u1CD3\\u2010-\\u2027\\u2030-\\u2043\\u2045-\\u2051\\u2053-\\u205E\\u207D\\u207E\\u208D\\u208E\\u2329\\u232A\\u2768-\\u2775\\u27C5\\u27C6\\u27E6-\\u27EF\\u2983-\\u2998\\u29D8-\\u29DB\\u29FC\\u29FD\\u2CF9-\\u2CFC\\u2CFE\\u2CFF\\u2D70\\u2E00-\\u2E2E\\u2E30-\\u2E3B\\u3001-\\u3003\\u3008-\\u3011\\u3014-\\u301F\\u3030\\u303D\\u30A0\\u30FB\\uA4FE\\uA4FF\\uA60D-\\uA60F\\uA673\\uA67E\\uA6F2-\\uA6F7\\uA874-\\uA877\\uA8CE\\uA8CF\\uA8F8-\\uA8FA\\uA92E\\uA92F\\uA95F\\uA9C1-\\uA9CD\\uA9DE\\uA9DF\\uAA5C-\\uAA5F\\uAADE\\uAADF\\uAAF0\\uAAF1\\uABEB\\uFD3E\\uFD3F\\uFE10-\\uFE19\\uFE30-\\uFE52\\uFE54-\\uFE61\\uFE63\\uFE68\\uFE6A\\uFE6B\\uFF01-\\uFF03\\uFF05-\\uFF0A\\uFF0C-\\uFF0F\\uFF1A\\uFF1B\\uFF1F\\uFF20\\uFF3B-\\uFF3D\\uFF3F\\uFF5B\\uFF5D\\uFF5F-\\uFF65]/\nconst CHAMELEON = /['\\u2018\\u2019]/\nconst SURROGATE_START = 0xd800\nconst SURROGATE_END = 0xdfff\nconst ZERO_WIDTH_JOINER = 0x200d\n\n/**\n * Get the distance to the end of the first character in a string of text.\n */\n\nexport const getCharacterDistance = (text: string): number => {\n  let offset = 0\n  // prev types:\n  // SURR: surrogate pair\n  // MOD: modifier (technically also surrogate pair)\n  // ZWJ: zero width joiner\n  // VAR: variation selector\n  // BMP: sequenceable character from basic multilingual plane\n  let prev: 'SURR' | 'MOD' | 'ZWJ' | 'VAR' | 'BMP' | null = null\n  let charCode = text.charCodeAt(0)\n\n  while (charCode) {\n    if (isSurrogate(charCode)) {\n      const modifier = isModifier(charCode, text, offset)\n\n      // Early returns are the heart of this function, where we decide if previous and current\n      // codepoints should form a single character (in terms of how many of them should selection\n      // jump over).\n      if (prev === 'SURR' || prev === 'BMP') {\n        break\n      }\n\n      offset += 2\n      prev = modifier ? 'MOD' : 'SURR'\n      charCode = text.charCodeAt(offset)\n      // Absolutely fine to `continue` without any checks because if `charCode` is NaN (which\n      // is the case when out of `text` range), next `while` loop won\"t execute and we\"re done.\n      continue\n    }\n\n    if (charCode === ZERO_WIDTH_JOINER) {\n      offset += 1\n      prev = 'ZWJ'\n      charCode = text.charCodeAt(offset)\n\n      continue\n    }\n\n    if (isBMPEmoji(charCode)) {\n      if (prev && prev !== 'ZWJ' && prev !== 'VAR') {\n        break\n      }\n      offset += 1\n      prev = 'BMP'\n      charCode = text.charCodeAt(offset)\n\n      continue\n    }\n\n    if (isVariationSelector(charCode)) {\n      if (prev && prev !== 'ZWJ') {\n        break\n      }\n      offset += 1\n      prev = 'VAR'\n      charCode = text.charCodeAt(offset)\n      continue\n    }\n\n    // Modifier 'groups up' with what ever character is before that (even whitespace), need to\n    // look ahead.\n    if (prev === 'MOD') {\n      offset += 1\n      break\n    }\n\n    // If while loop ever gets here, we're done (e.g latin chars).\n    break\n  }\n\n  return offset || 1\n}\n\n/**\n * Get the distance to the end of the first word in a string of text.\n */\n\nexport const getWordDistance = (text: string): number => {\n  let length = 0\n  let i = 0\n  let started = false\n  let char\n\n  while ((char = text.charAt(i))) {\n    const l = getCharacterDistance(char)\n    char = text.slice(i, i + l)\n    const rest = text.slice(i + l)\n\n    if (isWordCharacter(char, rest)) {\n      started = true\n      length += l\n    } else if (!started) {\n      length += l\n    } else {\n      break\n    }\n\n    i += l\n  }\n\n  return length\n}\n\n/**\n * Check if a character is a word character. The `remaining` argument is used\n * because sometimes you must read subsequent characters to truly determine it.\n */\n\nconst isWordCharacter = (char: string, remaining: string): boolean => {\n  if (SPACE.test(char)) {\n    return false\n  }\n\n  // Chameleons count as word characters as long as they're in a word, so\n  // recurse to see if the next one is a word character or not.\n  if (CHAMELEON.test(char)) {\n    let next = remaining.charAt(0)\n    const length = getCharacterDistance(next)\n    next = remaining.slice(0, length)\n    const rest = remaining.slice(length)\n\n    if (isWordCharacter(next, rest)) {\n      return true\n    }\n  }\n\n  if (PUNCTUATION.test(char)) {\n    return false\n  }\n\n  return true\n}\n\n/**\n * Determines if `code` is a surrogate\n */\n\nconst isSurrogate = (code: number): boolean =>\n  SURROGATE_START <= code && code <= SURROGATE_END\n\n/**\n * Does `code` form Modifier with next one.\n *\n * https://emojipedia.org/modifiers/\n */\n\nconst isModifier = (code: number, text: string, offset: number): boolean => {\n  if (code === 0xd83c) {\n    const next = text.charCodeAt(offset + 1)\n    return next <= 0xdfff && next >= 0xdffb\n  }\n  return false\n}\n\n/**\n * Is `code` a Variation Selector.\n *\n * https://codepoints.net/variation_selectors\n */\n\nconst isVariationSelector = (code: number): boolean => {\n  return code <= 0xfe0f && code >= 0xfe00\n}\n\n/**\n * Is `code` one of the BMP codes used in emoji sequences.\n *\n * https://emojipedia.org/emoji-zwj-sequences/\n */\n\nconst isBMPEmoji = (code: number): boolean => {\n  // This requires tiny bit of maintanance, better ideas?\n  // Fortunately it only happens if new Unicode Standard\n  // is released. Fails gracefully if upkeep lags behind,\n  // same way Slate previously behaved with all emojis.\n  return (\n    code === 0x2764 || // heart ()\n    code === 0x2642 || // male ()\n    code === 0x2640 || // female ()\n    code === 0x2620 || // scull ()\n    code === 0x2695 || // medical ()\n    code === 0x2708 || // plane ()\n    code === 0x25ef // large circle ()\n  )\n}\n","import isPlainObject from 'is-plain-object'\nimport { createDraft, finishDraft, isDraft } from 'immer'\nimport { reverse as reverseText } from 'esrever'\n\nimport {\n  Ancestor,\n  Descendant,\n  Element,\n  Location,\n  Node,\n  NodeEntry,\n  Operation,\n  Path,\n  PathRef,\n  Point,\n  PointRef,\n  Range,\n  RangeRef,\n  Span,\n  Text,\n} from '..'\nimport {\n  DIRTY_PATHS,\n  NORMALIZING,\n  PATH_REFS,\n  POINT_REFS,\n  RANGE_REFS,\n} from '../utils/weak-maps'\nimport { getWordDistance, getCharacterDistance } from '../utils/string'\n\n/**\n * The `Editor` interface stores all the state of a Slate editor. It is extended\n * by plugins that wish to add their own helpers and implement new behaviors.\n */\n\nexport interface Editor {\n  children: Node[]\n  selection: Range | null\n  operations: Operation[]\n  marks: Record<string, any> | null\n  [key: string]: unknown\n\n  // Schema-specific node behaviors.\n  isInline: (element: Element) => boolean\n  isVoid: (element: Element) => boolean\n  normalizeNode: (entry: NodeEntry) => void\n  onChange: () => void\n\n  // Overrideable core actions.\n  addMark: (key: string, value: any) => void\n  apply: (operation: Operation) => void\n  deleteBackward: (unit: 'character' | 'word' | 'line' | 'block') => void\n  deleteForward: (unit: 'character' | 'word' | 'line' | 'block') => void\n  deleteFragment: () => void\n  getFragment: () => Descendant[]\n  insertBreak: () => void\n  insertFragment: (fragment: Node[]) => void\n  insertNode: (node: Node) => void\n  insertText: (text: string) => void\n  removeMark: (key: string) => void\n}\n\nexport const Editor = {\n  /**\n   * Get the ancestor above a location in the document.\n   */\n\n  above<T extends Ancestor>(\n    editor: Editor,\n    options: {\n      at?: Location\n      match?: NodeMatch<T>\n      mode?: 'highest' | 'lowest'\n      voids?: boolean\n    } = {}\n  ): NodeEntry<T> | undefined {\n    const {\n      voids = false,\n      mode = 'lowest',\n      at = editor.selection,\n      match,\n    } = options\n\n    if (!at) {\n      return\n    }\n\n    const path = Editor.path(editor, at)\n    const reverse = mode === 'lowest'\n\n    for (const [n, p] of Editor.levels(editor, {\n      at: path,\n      voids,\n      match,\n      reverse,\n    })) {\n      if (!Text.isText(n) && !Path.equals(path, p)) {\n        return [n, p]\n      }\n    }\n  },\n\n  /**\n   * Add a custom property to the leaf text nodes in the current selection.\n   *\n   * If the selection is currently collapsed, the marks will be added to the\n   * `editor.marks` property instead, and applied when text is inserted next.\n   */\n\n  addMark(editor: Editor, key: string, value: any): void {\n    editor.addMark(key, value)\n  },\n\n  /**\n   * Get the point after a location.\n   */\n\n  after(\n    editor: Editor,\n    at: Location,\n    options: {\n      distance?: number\n      unit?: 'offset' | 'character' | 'word' | 'line' | 'block'\n    } = {}\n  ): Point | undefined {\n    const anchor = Editor.point(editor, at, { edge: 'end' })\n    const focus = Editor.end(editor, [])\n    const range = { anchor, focus }\n    const { distance = 1 } = options\n    let d = 0\n    let target\n\n    for (const p of Editor.positions(editor, { ...options, at: range })) {\n      if (d > distance) {\n        break\n      }\n\n      if (d !== 0) {\n        target = p\n      }\n\n      d++\n    }\n\n    return target\n  },\n\n  /**\n   * Get the point before a location.\n   */\n\n  before(\n    editor: Editor,\n    at: Location,\n    options: {\n      distance?: number\n      unit?: 'offset' | 'character' | 'word' | 'line' | 'block'\n    } = {}\n  ): Point | undefined {\n    const anchor = Editor.start(editor, [])\n    const focus = Editor.point(editor, at, { edge: 'start' })\n    const range = { anchor, focus }\n    const { distance = 1 } = options\n    let d = 0\n    let target\n\n    for (const p of Editor.positions(editor, {\n      ...options,\n      at: range,\n      reverse: true,\n    })) {\n      if (d > distance) {\n        break\n      }\n\n      if (d !== 0) {\n        target = p\n      }\n\n      d++\n    }\n\n    return target\n  },\n\n  /**\n   * Delete content in the editor backward from the current selection.\n   */\n\n  deleteBackward(\n    editor: Editor,\n    options: {\n      unit?: 'character' | 'word' | 'line' | 'block'\n    } = {}\n  ): void {\n    const { unit = 'character' } = options\n    editor.deleteBackward(unit)\n  },\n\n  /**\n   * Delete content in the editor forward from the current selection.\n   */\n\n  deleteForward(\n    editor: Editor,\n    options: {\n      unit?: 'character' | 'word' | 'line' | 'block'\n    } = {}\n  ): void {\n    const { unit = 'character' } = options\n    editor.deleteForward(unit)\n  },\n\n  /**\n   * Delete the content in the current selection.\n   */\n\n  deleteFragment(editor: Editor): void {\n    editor.deleteFragment()\n  },\n\n  /**\n   * Get the start and end points of a location.\n   */\n\n  edges(editor: Editor, at: Location): [Point, Point] {\n    return [Editor.start(editor, at), Editor.end(editor, at)]\n  },\n\n  /**\n   * Get the end point of a location.\n   */\n\n  end(editor: Editor, at: Location): Point {\n    return Editor.point(editor, at, { edge: 'end' })\n  },\n\n  /**\n   * Get the first node at a location.\n   */\n\n  first(editor: Editor, at: Location): NodeEntry {\n    const path = Editor.path(editor, at, { edge: 'start' })\n    return Editor.node(editor, path)\n  },\n\n  /**\n   * Get the fragment at a location.\n   */\n\n  fragment(editor: Editor, at: Location): Descendant[] {\n    const range = Editor.range(editor, at)\n    const fragment = Node.fragment(editor, range)\n    return fragment\n  },\n  /**\n   * Check if a node has block children.\n   */\n\n  hasBlocks(editor: Editor, element: Element): boolean {\n    return element.children.some(n => Editor.isBlock(editor, n))\n  },\n\n  /**\n   * Check if a node has inline and text children.\n   */\n\n  hasInlines(editor: Editor, element: Element): boolean {\n    return element.children.some(\n      n => Text.isText(n) || Editor.isInline(editor, n)\n    )\n  },\n\n  /**\n   * Check if a node has text children.\n   */\n\n  hasTexts(editor: Editor, element: Element): boolean {\n    return element.children.every(n => Text.isText(n))\n  },\n\n  /**\n   * Insert a block break at the current selection.\n   *\n   * If the selection is currently expanded, it will be deleted first.\n   */\n\n  insertBreak(editor: Editor): void {\n    editor.insertBreak()\n  },\n\n  /**\n   * Insert a fragment at the current selection.\n   *\n   * If the selection is currently expanded, it will be deleted first.\n   */\n\n  insertFragment(editor: Editor, fragment: Node[]): void {\n    editor.insertFragment(fragment)\n  },\n\n  /**\n   * Insert a node at the current selection.\n   *\n   * If the selection is currently expanded, it will be deleted first.\n   */\n\n  insertNode(editor: Editor, node: Node): void {\n    editor.insertNode(node)\n  },\n\n  /**\n   * Insert text at the current selection.\n   *\n   * If the selection is currently expanded, it will be deleted first.\n   */\n\n  insertText(editor: Editor, text: string): void {\n    editor.insertText(text)\n  },\n\n  /**\n   * Check if a value is a block `Element` object.\n   */\n\n  isBlock(editor: Editor, value: any): value is Element {\n    return Element.isElement(value) && !editor.isInline(value)\n  },\n\n  /**\n   * Check if a value is an `Editor` object.\n   */\n\n  isEditor(value: any): value is Editor {\n    return (\n      isPlainObject(value) &&\n      typeof value.addMark === 'function' &&\n      typeof value.apply === 'function' &&\n      typeof value.deleteBackward === 'function' &&\n      typeof value.deleteForward === 'function' &&\n      typeof value.deleteFragment === 'function' &&\n      typeof value.insertBreak === 'function' &&\n      typeof value.insertFragment === 'function' &&\n      typeof value.insertNode === 'function' &&\n      typeof value.insertText === 'function' &&\n      typeof value.isInline === 'function' &&\n      typeof value.isVoid === 'function' &&\n      typeof value.normalizeNode === 'function' &&\n      typeof value.onChange === 'function' &&\n      typeof value.removeMark === 'function' &&\n      (value.marks === null || isPlainObject(value.marks)) &&\n      (value.selection === null || Range.isRange(value.selection)) &&\n      Node.isNodeList(value.children) &&\n      Operation.isOperationList(value.operations)\n    )\n  },\n\n  /**\n   * Check if a point is the end point of a location.\n   */\n\n  isEnd(editor: Editor, point: Point, at: Location): boolean {\n    const end = Editor.end(editor, at)\n    return Point.equals(point, end)\n  },\n\n  /**\n   * Check if a point is an edge of a location.\n   */\n\n  isEdge(editor: Editor, point: Point, at: Location): boolean {\n    return Editor.isStart(editor, point, at) || Editor.isEnd(editor, point, at)\n  },\n\n  /**\n   * Check if an element is empty, accounting for void nodes.\n   */\n\n  isEmpty(editor: Editor, element: Element): boolean {\n    const { children } = element\n    const [first] = children\n    return (\n      children.length === 0 ||\n      (children.length === 1 &&\n        Text.isText(first) &&\n        first.text === '' &&\n        !editor.isVoid(element))\n    )\n  },\n\n  /**\n   * Check if a value is an inline `Element` object.\n   */\n\n  isInline(editor: Editor, value: any): value is Element {\n    return Element.isElement(value) && editor.isInline(value)\n  },\n\n  /**\n   * Check if the editor is currently normalizing after each operation.\n   */\n\n  isNormalizing(editor: Editor): boolean {\n    const isNormalizing = NORMALIZING.get(editor)\n    return isNormalizing === undefined ? true : isNormalizing\n  },\n\n  /**\n   * Check if a point is the start point of a location.\n   */\n\n  isStart(editor: Editor, point: Point, at: Location): boolean {\n    // PERF: If the offset isn't `0` we know it's not the start.\n    if (point.offset !== 0) {\n      return false\n    }\n\n    const start = Editor.start(editor, at)\n    return Point.equals(point, start)\n  },\n\n  /**\n   * Check if a value is a void `Element` object.\n   */\n\n  isVoid(editor: Editor, value: any): value is Element {\n    return Element.isElement(value) && editor.isVoid(value)\n  },\n\n  /**\n   * Get the last node at a location.\n   */\n\n  last(editor: Editor, at: Location): NodeEntry {\n    const path = Editor.path(editor, at, { edge: 'end' })\n    return Editor.node(editor, path)\n  },\n\n  /**\n   * Get the leaf text node at a location.\n   */\n\n  leaf(\n    editor: Editor,\n    at: Location,\n    options: {\n      depth?: number\n      edge?: 'start' | 'end'\n    } = {}\n  ): NodeEntry<Text> {\n    const path = Editor.path(editor, at, options)\n    const node = Node.leaf(editor, path)\n    return [node, path]\n  },\n\n  /**\n   * Iterate through all of the levels at a location.\n   */\n\n  *levels<T extends Node>(\n    editor: Editor,\n    options: {\n      at?: Location\n      match?: NodeMatch<T>\n      reverse?: boolean\n      voids?: boolean\n    } = {}\n  ): Iterable<NodeEntry<T>> {\n    const { at = editor.selection, reverse = false, voids = false } = options\n    let { match } = options\n\n    if (match == null) {\n      match = () => true\n    }\n\n    if (!at) {\n      return\n    }\n\n    const levels: NodeEntry<T>[] = []\n    const path = Editor.path(editor, at)\n\n    for (const [n, p] of Node.levels(editor, path)) {\n      if (!match(n)) {\n        continue\n      }\n\n      levels.push([n, p])\n\n      if (!voids && Editor.isVoid(editor, n)) {\n        break\n      }\n    }\n\n    if (reverse) {\n      levels.reverse()\n    }\n\n    yield* levels\n  },\n\n  /**\n   * Get the marks that would be added to text at the current selection.\n   */\n\n  marks(editor: Editor): Record<string, any> | null {\n    const { marks, selection } = editor\n\n    if (!selection) {\n      return null\n    }\n\n    if (marks) {\n      return marks\n    }\n\n    if (Range.isExpanded(selection)) {\n      const [match] = Editor.nodes(editor, { match: Text.isText })\n\n      if (match) {\n        const [node] = match as NodeEntry<Text>\n        const { text, ...rest } = node\n        return rest\n      } else {\n        return {}\n      }\n    }\n\n    const { anchor } = selection\n    const { path } = anchor\n    let [node] = Editor.leaf(editor, path)\n\n    if (anchor.offset === 0) {\n      const prev = Editor.previous(editor, { at: path, match: Text.isText })\n      const block = Editor.above(editor, {\n        match: n => Editor.isBlock(editor, n),\n      })\n\n      if (prev && block) {\n        const [prevNode, prevPath] = prev\n        const [, blockPath] = block\n\n        if (Path.isAncestor(blockPath, prevPath)) {\n          node = prevNode as Text\n        }\n      }\n    }\n\n    const { text, ...rest } = node\n    return rest\n  },\n\n  /**\n   * Get the matching node in the branch of the document after a location.\n   */\n\n  next<T extends Node>(\n    editor: Editor,\n    options: {\n      at?: Location\n      match?: NodeMatch<T>\n      mode?: 'all' | 'highest' | 'lowest'\n      voids?: boolean\n    } = {}\n  ): NodeEntry<T> | undefined {\n    const { mode = 'lowest', voids = false } = options\n    let { match, at = editor.selection } = options\n\n    if (!at) {\n      return\n    }\n\n    const [, from] = Editor.last(editor, at)\n    const [, to] = Editor.last(editor, [])\n    const span: Span = [from, to]\n\n    if (Path.isPath(at) && at.length === 0) {\n      throw new Error(`Cannot get the next node from the root node!`)\n    }\n\n    if (match == null) {\n      if (Path.isPath(at)) {\n        const [parent] = Editor.parent(editor, at)\n        match = n => parent.children.includes(n)\n      } else {\n        match = () => true\n      }\n    }\n\n    const [, next] = Editor.nodes(editor, { at: span, match, mode, voids })\n    return next\n  },\n\n  /**\n   * Get the node at a location.\n   */\n\n  node(\n    editor: Editor,\n    at: Location,\n    options: {\n      depth?: number\n      edge?: 'start' | 'end'\n    } = {}\n  ): NodeEntry {\n    const path = Editor.path(editor, at, options)\n    const node = Node.get(editor, path)\n    return [node, path]\n  },\n\n  /**\n   * Iterate through all of the nodes in the Editor.\n   */\n\n  *nodes<T extends Node>(\n    editor: Editor,\n    options: {\n      at?: Location | Span\n      match?: NodeMatch<T>\n      mode?: 'all' | 'highest' | 'lowest'\n      universal?: boolean\n      reverse?: boolean\n      voids?: boolean\n    } = {}\n  ): Iterable<NodeEntry<T>> {\n    const {\n      at = editor.selection,\n      mode = 'all',\n      universal = false,\n      reverse = false,\n      voids = false,\n    } = options\n    let { match } = options\n\n    if (!match) {\n      match = () => true\n    }\n\n    if (!at) {\n      return\n    }\n\n    let from\n    let to\n\n    if (Span.isSpan(at)) {\n      from = at[0]\n      to = at[1]\n    } else {\n      const first = Editor.path(editor, at, { edge: 'start' })\n      const last = Editor.path(editor, at, { edge: 'end' })\n      from = reverse ? last : first\n      to = reverse ? first : last\n    }\n\n    const iterable = Node.nodes(editor, {\n      reverse,\n      from,\n      to,\n      pass: ([n]) => (voids ? false : Editor.isVoid(editor, n)),\n    })\n\n    const matches: NodeEntry<T>[] = []\n    let hit: NodeEntry<T> | undefined\n\n    for (const [node, path] of iterable) {\n      const isLower = hit && Path.compare(path, hit[1]) === 0\n\n      // In highest mode any node lower than the last hit is not a match.\n      if (mode === 'highest' && isLower) {\n        continue\n      }\n\n      if (!match(node)) {\n        // If we've arrived at a leaf text node that is not lower than the last\n        // hit, then we've found a branch that doesn't include a match, which\n        // means the match is not universal.\n        if (universal && !isLower && Text.isText(node)) {\n          return\n        } else {\n          continue\n        }\n      }\n\n      // If there's a match and it's lower than the last, update the hit.\n      if (mode === 'lowest' && isLower) {\n        hit = [node, path]\n        continue\n      }\n\n      // In lowest mode we emit the last hit, once it's guaranteed lowest.\n      const emit: NodeEntry<T> | undefined =\n        mode === 'lowest' ? hit : [node, path]\n\n      if (emit) {\n        if (universal) {\n          matches.push(emit)\n        } else {\n          yield emit\n        }\n      }\n\n      hit = [node, path]\n    }\n\n    // Since lowest is always emitting one behind, catch up at the end.\n    if (mode === 'lowest' && hit) {\n      if (universal) {\n        matches.push(hit)\n      } else {\n        yield hit\n      }\n    }\n\n    // Universal defers to ensure that the match occurs in every branch, so we\n    // yield all of the matches after iterating.\n    if (universal) {\n      yield* matches\n    }\n  },\n  /**\n   * Normalize any dirty objects in the editor.\n   */\n\n  normalize(\n    editor: Editor,\n    options: {\n      force?: boolean\n    } = {}\n  ) {\n    const { force = false } = options\n    const getDirtyPaths = (editor: Editor) => {\n      return DIRTY_PATHS.get(editor) || []\n    }\n\n    if (!Editor.isNormalizing(editor)) {\n      return\n    }\n\n    if (force) {\n      const allPaths = Array.from(Node.nodes(editor), ([, p]) => p)\n      DIRTY_PATHS.set(editor, allPaths)\n    }\n\n    if (getDirtyPaths(editor).length === 0) {\n      return\n    }\n\n    Editor.withoutNormalizing(editor, () => {\n      const max = getDirtyPaths(editor).length * 42 // HACK: better way?\n      let m = 0\n\n      while (getDirtyPaths(editor).length !== 0) {\n        if (m > max) {\n          throw new Error(`\n            Could not completely normalize the editor after ${max} iterations! This is usually due to incorrect normalization logic that leaves a node in an invalid state.\n          `)\n        }\n\n        const path = getDirtyPaths(editor).pop()!\n        const entry = Editor.node(editor, path)\n        editor.normalizeNode(entry)\n        m++\n      }\n    })\n  },\n\n  /**\n   * Get the parent node of a location.\n   */\n\n  parent(\n    editor: Editor,\n    at: Location,\n    options: {\n      depth?: number\n      edge?: 'start' | 'end'\n    } = {}\n  ): NodeEntry<Ancestor> {\n    const path = Editor.path(editor, at, options)\n    const parentPath = Path.parent(path)\n    const entry = Editor.node(editor, parentPath)\n    return entry as NodeEntry<Ancestor>\n  },\n\n  /**\n   * Get the path of a location.\n   */\n\n  path(\n    editor: Editor,\n    at: Location,\n    options: {\n      depth?: number\n      edge?: 'start' | 'end'\n    } = {}\n  ): Path {\n    const { depth, edge } = options\n\n    if (Path.isPath(at)) {\n      if (edge === 'start') {\n        const [, firstPath] = Node.first(editor, at)\n        at = firstPath\n      } else if (edge === 'end') {\n        const [, lastPath] = Node.last(editor, at)\n        at = lastPath\n      }\n    }\n\n    if (Range.isRange(at)) {\n      if (edge === 'start') {\n        at = Range.start(at)\n      } else if (edge === 'end') {\n        at = Range.end(at)\n      } else {\n        at = Path.common(at.anchor.path, at.focus.path)\n      }\n    }\n\n    if (Point.isPoint(at)) {\n      at = at.path\n    }\n\n    if (depth != null) {\n      at = at.slice(0, depth)\n    }\n\n    return at\n  },\n\n  /**\n   * Create a mutable ref for a `Path` object, which will stay in sync as new\n   * operations are applied to the editor.\n   */\n\n  pathRef(\n    editor: Editor,\n    path: Path,\n    options: {\n      affinity?: 'backward' | 'forward' | null\n    } = {}\n  ): PathRef {\n    const { affinity = 'forward' } = options\n    const ref: PathRef = {\n      current: path,\n      affinity,\n      unref() {\n        const { current } = ref\n        const pathRefs = Editor.pathRefs(editor)\n        pathRefs.delete(ref)\n        ref.current = null\n        return current\n      },\n    }\n\n    const refs = Editor.pathRefs(editor)\n    refs.add(ref)\n    return ref\n  },\n\n  /**\n   * Get the set of currently tracked path refs of the editor.\n   */\n\n  pathRefs(editor: Editor): Set<PathRef> {\n    let refs = PATH_REFS.get(editor)\n\n    if (!refs) {\n      refs = new Set()\n      PATH_REFS.set(editor, refs)\n    }\n\n    return refs\n  },\n\n  /**\n   * Get the start or end point of a location.\n   */\n\n  point(\n    editor: Editor,\n    at: Location,\n    options: {\n      edge?: 'start' | 'end'\n    } = {}\n  ): Point {\n    const { edge = 'start' } = options\n\n    if (Path.isPath(at)) {\n      let path\n\n      if (edge === 'end') {\n        const [, lastPath] = Node.last(editor, at)\n        path = lastPath\n      } else {\n        const [, firstPath] = Node.first(editor, at)\n        path = firstPath\n      }\n\n      const node = Node.get(editor, path)\n\n      if (!Text.isText(node)) {\n        throw new Error(\n          `Cannot get the ${edge} point in the node at path [${at}] because it has no ${edge} text node.`\n        )\n      }\n\n      return { path, offset: edge === 'end' ? node.text.length : 0 }\n    }\n\n    if (Range.isRange(at)) {\n      const [start, end] = Range.edges(at)\n      return edge === 'start' ? start : end\n    }\n\n    return at\n  },\n\n  /**\n   * Create a mutable ref for a `Point` object, which will stay in sync as new\n   * operations are applied to the editor.\n   */\n\n  pointRef(\n    editor: Editor,\n    point: Point,\n    options: {\n      affinity?: 'backward' | 'forward' | null\n    } = {}\n  ): PointRef {\n    const { affinity = 'forward' } = options\n    const ref: PointRef = {\n      current: point,\n      affinity,\n      unref() {\n        const { current } = ref\n        const pointRefs = Editor.pointRefs(editor)\n        pointRefs.delete(ref)\n        ref.current = null\n        return current\n      },\n    }\n\n    const refs = Editor.pointRefs(editor)\n    refs.add(ref)\n    return ref\n  },\n\n  /**\n   * Get the set of currently tracked point refs of the editor.\n   */\n\n  pointRefs(editor: Editor): Set<PointRef> {\n    let refs = POINT_REFS.get(editor)\n\n    if (!refs) {\n      refs = new Set()\n      POINT_REFS.set(editor, refs)\n    }\n\n    return refs\n  },\n\n  /**\n   * Iterate through all of the positions in the document where a `Point` can be\n   * placed.\n   *\n   * By default it will move forward by individual offsets at a time,  but you\n   * can pass the `unit: 'character'` option to moved forward one character, word,\n   * or line at at time.\n   *\n   * Note: void nodes are treated as a single point, and iteration will not\n   * happen inside their content.\n   */\n\n  *positions(\n    editor: Editor,\n    options: {\n      at?: Location\n      unit?: 'offset' | 'character' | 'word' | 'line' | 'block'\n      reverse?: boolean\n    } = {}\n  ): Iterable<Point> {\n    const { at = editor.selection, unit = 'offset', reverse = false } = options\n\n    if (!at) {\n      return\n    }\n\n    const range = Editor.range(editor, at)\n    const [start, end] = Range.edges(range)\n    const first = reverse ? end : start\n    let string = ''\n    let available = 0\n    let offset = 0\n    let distance: number | null = null\n    let isNewBlock = false\n\n    const advance = () => {\n      if (distance == null) {\n        if (unit === 'character') {\n          distance = getCharacterDistance(string)\n        } else if (unit === 'word') {\n          distance = getWordDistance(string)\n        } else if (unit === 'line' || unit === 'block') {\n          distance = string.length\n        } else {\n          distance = 1\n        }\n\n        string = string.slice(distance)\n      }\n\n      // Add or substract the offset.\n      offset = reverse ? offset - distance : offset + distance\n      // Subtract the distance traveled from the available text.\n      available = available - distance!\n      // If the available had room to spare, reset the distance so that it will\n      // advance again next time. Otherwise, set it to the overflow amount.\n      distance = available >= 0 ? null : 0 - available\n    }\n\n    for (const [node, path] of Editor.nodes(editor, { at, reverse })) {\n      if (Element.isElement(node)) {\n        // Void nodes are a special case, since we don't want to iterate over\n        // their content. We instead always just yield their first point.\n        if (editor.isVoid(node)) {\n          yield Editor.start(editor, path)\n          continue\n        }\n\n        if (editor.isInline(node)) {\n          continue\n        }\n\n        if (Editor.hasInlines(editor, node)) {\n          const e = Path.isAncestor(path, end.path)\n            ? end\n            : Editor.end(editor, path)\n          const s = Path.isAncestor(path, start.path)\n            ? start\n            : Editor.start(editor, path)\n\n          const text = Editor.string(editor, { anchor: s, focus: e })\n          string = reverse ? reverseText(text) : text\n          isNewBlock = true\n        }\n      }\n\n      if (Text.isText(node)) {\n        const isFirst = Path.equals(path, first.path)\n        available = node.text.length\n        offset = reverse ? available : 0\n\n        if (isFirst) {\n          available = reverse ? first.offset : available - first.offset\n          offset = first.offset\n        }\n\n        if (isFirst || isNewBlock || unit === 'offset') {\n          yield { path, offset }\n        }\n\n        while (true) {\n          // If there's no more string, continue to the next block.\n          if (string === '') {\n            break\n          } else {\n            advance()\n          }\n\n          // If the available space hasn't overflow, we have another point to\n          // yield in the current text node.\n          if (available >= 0) {\n            yield { path, offset }\n          } else {\n            break\n          }\n        }\n\n        isNewBlock = false\n      }\n    }\n  },\n\n  /**\n   * Get the matching node in the branch of the document before a location.\n   */\n\n  previous<T extends Node>(\n    editor: Editor,\n    options: {\n      at?: Location\n      match?: NodeMatch<T>\n      mode?: 'all' | 'highest' | 'lowest'\n      voids?: boolean\n    } = {}\n  ): NodeEntry<T> | undefined {\n    const { mode = 'lowest', voids = false } = options\n    let { match, at = editor.selection } = options\n\n    if (!at) {\n      return\n    }\n\n    const [, from] = Editor.first(editor, at)\n    const [, to] = Editor.first(editor, [])\n    const span: Span = [from, to]\n\n    if (Path.isPath(at) && at.length === 0) {\n      throw new Error(`Cannot get the previous node from the root node!`)\n    }\n\n    if (match == null) {\n      if (Path.isPath(at)) {\n        const [parent] = Editor.parent(editor, at)\n        match = n => parent.children.includes(n)\n      } else {\n        match = () => true\n      }\n    }\n\n    const [, previous] = Editor.nodes(editor, {\n      reverse: true,\n      at: span,\n      match,\n      mode,\n      voids,\n    })\n\n    return previous\n  },\n\n  /**\n   * Get a range of a location.\n   */\n\n  range(editor: Editor, at: Location, to?: Location): Range {\n    if (Range.isRange(at) && !to) {\n      return at\n    }\n\n    const start = Editor.start(editor, at)\n    const end = Editor.end(editor, to || at)\n    return { anchor: start, focus: end }\n  },\n\n  /**\n   * Create a mutable ref for a `Range` object, which will stay in sync as new\n   * operations are applied to the editor.\n   */\n\n  rangeRef(\n    editor: Editor,\n    range: Range,\n    options: {\n      affinity?: 'backward' | 'forward' | 'outward' | 'inward' | null\n    } = {}\n  ): RangeRef {\n    const { affinity = 'forward' } = options\n    const ref: RangeRef = {\n      current: range,\n      affinity,\n      unref() {\n        const { current } = ref\n        const rangeRefs = Editor.rangeRefs(editor)\n        rangeRefs.delete(ref)\n        ref.current = null\n        return current\n      },\n    }\n\n    const refs = Editor.rangeRefs(editor)\n    refs.add(ref)\n    return ref\n  },\n\n  /**\n   * Get the set of currently tracked range refs of the editor.\n   */\n\n  rangeRefs(editor: Editor): Set<RangeRef> {\n    let refs = RANGE_REFS.get(editor)\n\n    if (!refs) {\n      refs = new Set()\n      RANGE_REFS.set(editor, refs)\n    }\n\n    return refs\n  },\n\n  /**\n   * Remove a custom property from all of the leaf text nodes in the current\n   * selection.\n   *\n   * If the selection is currently collapsed, the removal will be stored on\n   * `editor.marks` and applied to the text inserted next.\n   */\n\n  removeMark(editor: Editor, key: string): void {\n    editor.removeMark(key)\n  },\n\n  /**\n   * Get the start point of a location.\n   */\n\n  start(editor: Editor, at: Location): Point {\n    return Editor.point(editor, at, { edge: 'start' })\n  },\n\n  /**\n   * Get the text string content of a location.\n   *\n   * Note: the text of void nodes is presumed to be an empty string, regardless\n   * of what their actual content is.\n   */\n\n  string(editor: Editor, at: Location): string {\n    const range = Editor.range(editor, at)\n    const [start, end] = Range.edges(range)\n    let text = ''\n\n    for (const [node, path] of Editor.nodes(editor, {\n      at: range,\n      match: Text.isText,\n    })) {\n      let t = node.text\n\n      if (Path.equals(path, end.path)) {\n        t = t.slice(0, end.offset)\n      }\n\n      if (Path.equals(path, start.path)) {\n        t = t.slice(start.offset)\n      }\n\n      text += t\n    }\n\n    return text\n  },\n\n  /**\n   * Transform the editor by an operation.\n   */\n\n  transform(editor: Editor, op: Operation) {\n    editor.children = createDraft(editor.children)\n    let selection = editor.selection && createDraft(editor.selection)\n\n    switch (op.type) {\n      case 'insert_node': {\n        const { path, node } = op\n        const parent = Node.parent(editor, path)\n        const index = path[path.length - 1]\n        parent.children.splice(index, 0, node)\n\n        if (selection) {\n          for (const [point, key] of Range.points(selection)) {\n            selection[key] = Point.transform(point, op)!\n          }\n        }\n\n        break\n      }\n\n      case 'insert_text': {\n        const { path, offset, text } = op\n        const node = Node.leaf(editor, path)\n        const before = node.text.slice(0, offset)\n        const after = node.text.slice(offset)\n        node.text = before + text + after\n\n        if (selection) {\n          for (const [point, key] of Range.points(selection)) {\n            selection[key] = Point.transform(point, op)!\n          }\n        }\n\n        break\n      }\n\n      case 'merge_node': {\n        const { path } = op\n        const node = Node.get(editor, path)\n        const prevPath = Path.previous(path)\n        const prev = Node.get(editor, prevPath)\n        const parent = Node.parent(editor, path)\n        const index = path[path.length - 1]\n\n        if (Text.isText(node) && Text.isText(prev)) {\n          prev.text += node.text\n        } else if (!Text.isText(node) && !Text.isText(prev)) {\n          prev.children.push(...node.children)\n        } else {\n          throw new Error(\n            `Cannot apply a \"merge_node\" operation at path [${path}] to nodes of different interaces: ${node} ${prev}`\n          )\n        }\n\n        parent.children.splice(index, 1)\n\n        if (selection) {\n          for (const [point, key] of Range.points(selection)) {\n            selection[key] = Point.transform(point, op)!\n          }\n        }\n\n        break\n      }\n\n      case 'move_node': {\n        const { path, newPath } = op\n\n        if (Path.isAncestor(path, newPath)) {\n          throw new Error(\n            `Cannot move a path [${path}] to new path [${newPath}] because the destination is inside itself.`\n          )\n        }\n\n        const node = Node.get(editor, path)\n        const parent = Node.parent(editor, path)\n        const index = path[path.length - 1]\n\n        // This is tricky, but since the `path` and `newPath` both refer to\n        // the same snapshot in time, there's a mismatch. After either\n        // removing the original position, the second step's path can be out\n        // of date. So instead of using the `op.newPath` directly, we\n        // transform `op.path` to ascertain what the `newPath` would be after\n        // the operation was applied.\n        parent.children.splice(index, 1)\n        const truePath = Path.transform(path, op)!\n        const newParent = Node.get(editor, Path.parent(truePath)) as Ancestor\n        const newIndex = truePath[truePath.length - 1]\n\n        newParent.children.splice(newIndex, 0, node)\n\n        if (selection) {\n          for (const [point, key] of Range.points(selection)) {\n            selection[key] = Point.transform(point, op)!\n          }\n        }\n\n        break\n      }\n\n      case 'remove_node': {\n        const { path } = op\n        const index = path[path.length - 1]\n        const parent = Node.parent(editor, path)\n        parent.children.splice(index, 1)\n\n        // Transform all of the points in the value, but if the point was in the\n        // node that was removed we need to update the range or remove it.\n        if (selection) {\n          for (const [point, key] of Range.points(selection)) {\n            const result = Point.transform(point, op)\n\n            if (selection != null && result != null) {\n              selection[key] = result\n            } else {\n              let prev: NodeEntry<Text> | undefined\n              let next: NodeEntry<Text> | undefined\n\n              for (const [n, p] of Node.texts(editor)) {\n                if (Path.compare(p, path) === -1) {\n                  prev = [n, p]\n                } else {\n                  next = [n, p]\n                  break\n                }\n              }\n\n              if (prev) {\n                point.path = prev[1]\n                point.offset = prev[0].text.length\n              } else if (next) {\n                point.path = next[1]\n                point.offset = 0\n              } else {\n                selection = null\n              }\n            }\n          }\n        }\n\n        break\n      }\n\n      case 'remove_text': {\n        const { path, offset, text } = op\n        const node = Node.leaf(editor, path)\n        const before = node.text.slice(0, offset)\n        const after = node.text.slice(offset + text.length)\n        node.text = before + after\n\n        if (selection) {\n          for (const [point, key] of Range.points(selection)) {\n            selection[key] = Point.transform(point, op)!\n          }\n        }\n\n        break\n      }\n\n      case 'set_node': {\n        const { path, newProperties } = op\n\n        if (path.length === 0) {\n          throw new Error(`Cannot set properties on the root node!`)\n        }\n\n        const node = Node.get(editor, path)\n\n        for (const key in newProperties) {\n          if (key === 'children' || key === 'text') {\n            throw new Error(`Cannot set the \"${key}\" property of nodes!`)\n          }\n\n          const value = newProperties[key]\n\n          if (value == null) {\n            delete node[key]\n          } else {\n            node[key] = value\n          }\n        }\n\n        break\n      }\n\n      case 'set_selection': {\n        const { newProperties } = op\n\n        if (newProperties == null) {\n          selection = newProperties\n        } else if (selection == null) {\n          if (!Range.isRange(newProperties)) {\n            throw new Error(\n              `Cannot apply an incomplete \"set_selection\" operation properties ${JSON.stringify(\n                newProperties\n              )} when there is no current selection.`\n            )\n          }\n\n          selection = newProperties\n        } else {\n          Object.assign(selection, newProperties)\n        }\n\n        break\n      }\n\n      case 'split_node': {\n        const { path, position, properties } = op\n\n        if (path.length === 0) {\n          throw new Error(\n            `Cannot apply a \"split_node\" operation at path [${path}] because the root node cannot be split.`\n          )\n        }\n\n        const node = Node.get(editor, path)\n        const parent = Node.parent(editor, path)\n        const index = path[path.length - 1]\n        let newNode: Descendant\n\n        if (Text.isText(node)) {\n          const before = node.text.slice(0, position)\n          const after = node.text.slice(position)\n          node.text = before\n          newNode = {\n            ...node,\n            ...(properties as Partial<Text>),\n            text: after,\n          }\n        } else {\n          const before = node.children.slice(0, position)\n          const after = node.children.slice(position)\n          node.children = before\n\n          newNode = {\n            ...node,\n            ...(properties as Partial<Element>),\n            children: after,\n          }\n        }\n\n        parent.children.splice(index + 1, 0, newNode)\n\n        if (selection) {\n          for (const [point, key] of Range.points(selection)) {\n            selection[key] = Point.transform(point, op)!\n          }\n        }\n\n        break\n      }\n    }\n\n    editor.children = finishDraft(editor.children) as Node[]\n\n    if (selection) {\n      editor.selection = isDraft(selection)\n        ? (finishDraft(selection) as Range)\n        : selection\n    } else {\n      editor.selection = null\n    }\n  },\n\n  /**\n   * Convert a range into a non-hanging one.\n   */\n\n  unhangRange(\n    editor: Editor,\n    range: Range,\n    options: {\n      voids?: boolean\n    } = {}\n  ): Range {\n    const { voids = false } = options\n    let [start, end] = Range.edges(range)\n\n    // PERF: exit early if we can guarantee that the range isn't hanging.\n    if (start.offset !== 0 || end.offset !== 0 || Range.isCollapsed(range)) {\n      return range\n    }\n\n    const endBlock = Editor.above(editor, {\n      at: end,\n      match: n => Editor.isBlock(editor, n),\n    })\n    const blockPath = endBlock ? endBlock[1] : []\n    const first = Editor.start(editor, [])\n    const before = { anchor: first, focus: end }\n    let skip = true\n\n    for (const [node, path] of Editor.nodes(editor, {\n      at: before,\n      match: Text.isText,\n      reverse: true,\n      voids,\n    })) {\n      if (skip) {\n        skip = false\n        continue\n      }\n\n      if (node.text !== '' || Path.isBefore(path, blockPath)) {\n        end = { path, offset: node.text.length }\n        break\n      }\n    }\n\n    return { anchor: start, focus: end }\n  },\n\n  /**\n   * Match a void node in the current branch of the editor.\n   */\n\n  void(\n    editor: Editor,\n    options: {\n      at?: Location\n      mode?: 'highest' | 'lowest'\n      voids?: boolean\n    } = {}\n  ): NodeEntry<Element> | undefined {\n    return Editor.above(editor, {\n      ...options,\n      match: n => Editor.isVoid(editor, n),\n    })\n  },\n\n  /**\n   * Call a function, deferring normalization until after it completes.\n   */\n\n  withoutNormalizing(editor: Editor, fn: () => void): void {\n    const value = Editor.isNormalizing(editor)\n    NORMALIZING.set(editor, false)\n    fn()\n    NORMALIZING.set(editor, value)\n    Editor.normalize(editor)\n  },\n}\n\n/**\n * A helper type for narrowing matched nodes with a predicate.\n */\n\ntype NodeMatch<T extends Node> =\n  | ((node: Node) => node is T)\n  | ((node: Node) => boolean)\n","import isPlainObject from 'is-plain-object'\nimport { Editor, Node, Path } from '..'\n\n/**\n * `Element` objects are a type of node in a Slate document that contain other\n * element nodes or text nodes. They can be either \"blocks\" or \"inlines\"\n * depending on the Slate editor's configuration.\n */\n\nexport interface Element {\n  children: Node[]\n  [key: string]: unknown\n}\n\nexport const Element = {\n  /**\n   * Check if a value implements the `Element` interface.\n   */\n\n  isElement(value: any): value is Element {\n    return (\n      isPlainObject(value) &&\n      Node.isNodeList(value.children) &&\n      !Editor.isEditor(value)\n    )\n  },\n\n  /**\n   * Check if a value is an array of `Element` objects.\n   */\n\n  isElementList(value: any): value is Element[] {\n    return (\n      Array.isArray(value) &&\n      (value.length === 0 || Element.isElement(value[0]))\n    )\n  },\n\n  /**\n   * Check if an element matches set of properties.\n   *\n   * Note: this checks custom properties, and it does not ensure that any\n   * children are equivalent.\n   */\n\n  matches(element: Element, props: Partial<Element>): boolean {\n    for (const key in props) {\n      if (key === 'children') {\n        continue\n      }\n\n      if (element[key] !== props[key]) {\n        return false\n      }\n    }\n\n    return true\n  },\n}\n\n/**\n * `ElementEntry` objects refer to an `Element` and the `Path` where it can be\n * found inside a root node.\n */\n\nexport type ElementEntry = [Element, Path]\n","import { Path, Point, Range } from '..'\n\n/**\n * The `Location` interface is a union of the ways to refer to a specific\n * location in a Slate document: paths, points or ranges.\n *\n * Methods will often accept a `Location` instead of requiring only a `Path`,\n * `Point` or `Range`. This eliminates the need for developers to manage\n * converting between the different interfaces in their own code base.\n */\n\nexport type Location = Path | Point | Range\n\nexport const Location = {\n  /**\n   * Check if a value implements the `Location` interface.\n   */\n\n  isLocation(value: any): value is Location {\n    return Path.isPath(value) || Point.isPoint(value) || Range.isRange(value)\n  },\n}\n\n/**\n * The `Span` interface is a low-level way to refer to locations in nodes\n * without using `Point` which requires leaf text nodes to be present.\n */\n\nexport type Span = [Path, Path]\n\nexport const Span = {\n  /**\n   * Check if a value implements the `Span` interface.\n   */\n\n  isSpan(value: any): value is Span {\n    return (\n      Array.isArray(value) && value.length === 2 && value.every(Path.isPath)\n    )\n  },\n}\n","import { produce } from 'immer'\nimport { Editor, Element, ElementEntry, Path, Range, Text } from '..'\n\n/**\n * The `Node` union type represents all of the different types of nodes that\n * occur in a Slate document tree.\n */\n\nexport type Node = Editor | Element | Text\n\nexport const Node = {\n  /**\n   * Get the node at a specific path, asserting that it's an ancestor node.\n   */\n\n  ancestor(root: Node, path: Path): Ancestor {\n    const node = Node.get(root, path)\n\n    if (Text.isText(node)) {\n      throw new Error(\n        `Cannot get the ancestor node at path [${path}] because it refers to a text node instead: ${node}`\n      )\n    }\n\n    return node\n  },\n\n  /**\n   * Return an iterable of all the ancestor nodes above a specific path.\n   *\n   * By default the order is bottom-up, from lowest to highest ancestor in\n   * the tree, but you can pass the `reverse: true` option to go top-down.\n   */\n\n  *ancestors(\n    root: Node,\n    path: Path,\n    options: {\n      reverse?: boolean\n    } = {}\n  ): Iterable<NodeEntry<Ancestor>> {\n    for (const p of Path.ancestors(path, options)) {\n      const n = Node.ancestor(root, p)\n      const entry: NodeEntry<Ancestor> = [n, p]\n      yield entry\n    }\n  },\n\n  /**\n   * Get the child of a node at a specific index.\n   */\n\n  child(root: Node, index: number): Descendant {\n    if (Text.isText(root)) {\n      throw new Error(\n        `Cannot get the child of a text node: ${JSON.stringify(root)}`\n      )\n    }\n\n    const c = root.children[index] as Descendant\n\n    if (c == null) {\n      throw new Error(\n        `Cannot get child at index \\`${index}\\` in node: ${JSON.stringify(\n          root\n        )}`\n      )\n    }\n\n    return c\n  },\n\n  /**\n   * Iterate over the children of a node at a specific path.\n   */\n\n  *children(\n    root: Node,\n    path: Path,\n    options: {\n      reverse?: boolean\n    } = {}\n  ): Iterable<NodeEntry<Descendant>> {\n    const { reverse = false } = options\n    const ancestor = Node.ancestor(root, path)\n    const { children } = ancestor\n    let index = reverse ? children.length - 1 : 0\n\n    while (reverse ? index >= 0 : index < children.length) {\n      const child = Node.child(ancestor, index)\n      const childPath = path.concat(index)\n      yield [child, childPath]\n      index = reverse ? index - 1 : index + 1\n    }\n  },\n\n  /**\n   * Get an entry for the common ancesetor node of two paths.\n   */\n\n  common(root: Node, path: Path, another: Path): NodeEntry {\n    const p = Path.common(path, another)\n    const n = Node.get(root, p)\n    return [n, p]\n  },\n\n  /**\n   * Get the node at a specific path, asserting that it's a descendant node.\n   */\n\n  descendant(root: Node, path: Path): Descendant {\n    const node = Node.get(root, path)\n\n    if (Editor.isEditor(node)) {\n      throw new Error(\n        `Cannot get the descendant node at path [${path}] because it refers to the root editor node instead: ${node}`\n      )\n    }\n\n    return node\n  },\n\n  /**\n   * Return an iterable of all the descendant node entries inside a root node.\n   */\n\n  *descendants(\n    root: Node,\n    options: {\n      from?: Path\n      to?: Path\n      reverse?: boolean\n      pass?: (node: NodeEntry) => boolean\n    } = {}\n  ): Iterable<NodeEntry<Descendant>> {\n    for (const [node, path] of Node.nodes(root, options)) {\n      if (path.length !== 0) {\n        // NOTE: we have to coerce here because checking the path's length does\n        // guarantee that `node` is not a `Editor`, but TypeScript doesn't know.\n        yield [node, path] as NodeEntry<Descendant>\n      }\n    }\n  },\n\n  /**\n   * Return an iterable of all the element nodes inside a root node. Each iteration\n   * will return an `ElementEntry` tuple consisting of `[Element, Path]`. If the\n   * root node is an element it will be included in the iteration as well.\n   */\n\n  *elements(\n    root: Node,\n    options: {\n      from?: Path\n      to?: Path\n      reverse?: boolean\n      pass?: (node: NodeEntry) => boolean\n    } = {}\n  ): Iterable<ElementEntry> {\n    for (const [node, path] of Node.nodes(root, options)) {\n      if (Element.isElement(node)) {\n        yield [node, path]\n      }\n    }\n  },\n\n  /**\n   * Get the first node entry in a root node from a path.\n   */\n\n  first(root: Node, path: Path): NodeEntry {\n    const p = path.slice()\n    let n = Node.get(root, p)\n\n    while (n) {\n      if (Text.isText(n) || n.children.length === 0) {\n        break\n      } else {\n        n = n.children[0]\n        p.push(0)\n      }\n    }\n\n    return [n, p]\n  },\n\n  /**\n   * Get the sliced fragment represented by a range inside a root node.\n   */\n\n  fragment(root: Node, range: Range): Descendant[] {\n    if (Text.isText(root)) {\n      throw new Error(\n        `Cannot get a fragment starting from a root text node: ${JSON.stringify(\n          root\n        )}`\n      )\n    }\n\n    const newRoot = produce(root, r => {\n      const [start, end] = Range.edges(range)\n      const iterable = Node.nodes(r, {\n        reverse: true,\n        pass: ([, path]) => !Range.includes(range, path),\n      })\n\n      for (const [, path] of iterable) {\n        if (!Range.includes(range, path)) {\n          const parent = Node.parent(r, path)\n          const index = path[path.length - 1]\n          parent.children.splice(index, 1)\n        }\n\n        if (Path.equals(path, end.path)) {\n          const leaf = Node.leaf(r, path)\n          leaf.text = leaf.text.slice(0, end.offset)\n        }\n\n        if (Path.equals(path, start.path)) {\n          const leaf = Node.leaf(r, path)\n          leaf.text = leaf.text.slice(start.offset)\n        }\n      }\n\n      delete r.selection\n    })\n\n    return newRoot.children\n  },\n\n  /**\n   * Get the descendant node referred to by a specific path. If the path is an\n   * empty array, it refers to the root node itself.\n   */\n\n  get(root: Node, path: Path): Node {\n    let node = root\n\n    for (let i = 0; i < path.length; i++) {\n      const p = path[i]\n\n      if (Text.isText(node) || !node.children[p]) {\n        throw new Error(\n          `Cannot find a descendant at path [${path}] in node: ${JSON.stringify(\n            root\n          )}`\n        )\n      }\n\n      node = node.children[p]\n    }\n\n    return node\n  },\n\n  /**\n   * Check if a descendant node exists at a specific path.\n   */\n\n  has(root: Node, path: Path): boolean {\n    let node = root\n\n    for (let i = 0; i < path.length; i++) {\n      const p = path[i]\n\n      if (Text.isText(node) || !node.children[p]) {\n        return false\n      }\n\n      node = node.children[p]\n    }\n\n    return true\n  },\n\n  /**\n   * Check if a value implements the `Node` interface.\n   */\n\n  isNode(value: any): value is Node {\n    return (\n      Text.isText(value) || Element.isElement(value) || Editor.isEditor(value)\n    )\n  },\n\n  /**\n   * Check if a value is a list of `Node` objects.\n   */\n\n  isNodeList(value: any): value is Node[] {\n    return Array.isArray(value) && (value.length === 0 || Node.isNode(value[0]))\n  },\n\n  /**\n   * Get the lash node entry in a root node from a path.\n   */\n\n  last(root: Node, path: Path): NodeEntry {\n    const p = path.slice()\n    let n = Node.get(root, p)\n\n    while (n) {\n      if (Text.isText(n) || n.children.length === 0) {\n        break\n      } else {\n        const i = n.children.length - 1\n        n = n.children[i]\n        p.push(i)\n      }\n    }\n\n    return [n, p]\n  },\n\n  /**\n   * Get the node at a specific path, ensuring it's a leaf text node.\n   */\n\n  leaf(root: Node, path: Path): Text {\n    const node = Node.get(root, path)\n\n    if (!Text.isText(node)) {\n      throw new Error(\n        `Cannot get the leaf node at path [${path}] because it refers to a non-leaf node: ${node}`\n      )\n    }\n\n    return node\n  },\n\n  /**\n   * Return an iterable of the in a branch of the tree, from a specific path.\n   *\n   * By default the order is top-down, from lowest to highest node in the tree,\n   * but you can pass the `reverse: true` option to go bottom-up.\n   */\n\n  *levels(\n    root: Node,\n    path: Path,\n    options: {\n      reverse?: boolean\n    } = {}\n  ): Iterable<NodeEntry> {\n    for (const p of Path.levels(path, options)) {\n      const n = Node.get(root, p)\n      yield [n, p]\n    }\n  },\n\n  /**\n   * Check if a node matches a set of props.\n   */\n\n  matches(node: Node, props: Partial<Node>): boolean {\n    return (\n      (Element.isElement(node) && Element.matches(node, props)) ||\n      (Text.isText(node) && Text.matches(node, props))\n    )\n  },\n\n  /**\n   * Return an iterable of all the node entries of a root node. Each entry is\n   * returned as a `[Node, Path]` tuple, with the path referring to the node's\n   * position inside the root node.\n   */\n\n  *nodes(\n    root: Node,\n    options: {\n      from?: Path\n      to?: Path\n      reverse?: boolean\n      pass?: (entry: NodeEntry) => boolean\n    } = {}\n  ): Iterable<NodeEntry> {\n    const { pass, reverse = false } = options\n    const { from = [], to } = options\n    const visited = new Set()\n    let p: Path = []\n    let n = root\n\n    while (true) {\n      if (to && (reverse ? Path.isBefore(p, to) : Path.isAfter(p, to))) {\n        break\n      }\n\n      if (!visited.has(n)) {\n        yield [n, p]\n      }\n\n      // If we're allowed to go downward and we haven't decsended yet, do.\n      if (\n        !visited.has(n) &&\n        !Text.isText(n) &&\n        n.children.length !== 0 &&\n        (pass == null || pass([n, p]) === false)\n      ) {\n        visited.add(n)\n        let nextIndex = reverse ? n.children.length - 1 : 0\n\n        if (Path.isAncestor(p, from)) {\n          nextIndex = from[p.length]\n        }\n\n        p = p.concat(nextIndex)\n        n = Node.get(root, p)\n        continue\n      }\n\n      // If we're at the root and we can't go down, we're done.\n      if (p.length === 0) {\n        break\n      }\n\n      // If we're going forward...\n      if (!reverse) {\n        const newPath = Path.next(p)\n\n        if (Node.has(root, newPath)) {\n          p = newPath\n          n = Node.get(root, p)\n          continue\n        }\n      }\n\n      // If we're going backward...\n      if (reverse && p[p.length - 1] !== 0) {\n        const newPath = Path.previous(p)\n        p = newPath\n        n = Node.get(root, p)\n        continue\n      }\n\n      // Otherwise we're going upward...\n      p = Path.parent(p)\n      n = Node.get(root, p)\n      visited.add(n)\n    }\n  },\n\n  /**\n   * Get the parent of a node at a specific path.\n   */\n\n  parent(root: Node, path: Path): Ancestor {\n    const parentPath = Path.parent(path)\n    const p = Node.get(root, parentPath)\n\n    if (Text.isText(p)) {\n      throw new Error(\n        `Cannot get the parent of path [${path}] because it does not exist in the root.`\n      )\n    }\n\n    return p\n  },\n\n  /**\n   * Get the concatenated text string of a node's content.\n   *\n   * Note that this will not include spaces or line breaks between block nodes.\n   * It is not a user-facing string, but a string for performing offset-related\n   * computations for a node.\n   */\n\n  string(node: Node): string {\n    if (Text.isText(node)) {\n      return node.text\n    } else {\n      return node.children.map(Node.string).join('')\n    }\n  },\n\n  /**\n   * Return an iterable of all leaf text nodes in a root node.\n   */\n\n  *texts(\n    root: Node,\n    options: {\n      from?: Path\n      to?: Path\n      reverse?: boolean\n      pass?: (node: NodeEntry) => boolean\n    } = {}\n  ): Iterable<NodeEntry<Text>> {\n    for (const [node, path] of Node.nodes(root, options)) {\n      if (Text.isText(node)) {\n        yield [node, path]\n      }\n    }\n  },\n}\n\n/**\n * The `Descendant` union type represents nodes that are descendants in the\n * tree. It is returned as a convenience in certain cases to narrow a value\n * further than the more generic `Node` union.\n */\n\nexport type Descendant = Element | Text\n\n/**\n * The `Ancestor` union type represents nodes that are ancestors in the tree.\n * It is returned as a convenience in certain cases to narrow a value further\n * than the more generic `Node` union.\n */\n\nexport type Ancestor = Editor | Element\n\n/**\n * `NodeEntry` objects are returned when iterating over the nodes in a Slate\n * document tree. They consist of the node and its `Path` relative to the root\n * node in the document.\n */\n\nexport type NodeEntry<T extends Node = Node> = [T, Path]\n","import { Node, Path, Range } from '..'\nimport isPlainObject from 'is-plain-object'\n\nexport type InsertNodeOperation = {\n  type: 'insert_node'\n  path: Path\n  node: Node\n  [key: string]: unknown\n}\n\nexport type InsertTextOperation = {\n  type: 'insert_text'\n  path: Path\n  offset: number\n  text: string\n  [key: string]: unknown\n}\n\nexport type MergeNodeOperation = {\n  type: 'merge_node'\n  path: Path\n  position: number\n  target: number | null\n  properties: Partial<Node>\n  [key: string]: unknown\n}\n\nexport type MoveNodeOperation = {\n  type: 'move_node'\n  path: Path\n  newPath: Path\n  [key: string]: unknown\n}\n\nexport type RemoveNodeOperation = {\n  type: 'remove_node'\n  path: Path\n  node: Node\n  [key: string]: unknown\n}\n\nexport type RemoveTextOperation = {\n  type: 'remove_text'\n  path: Path\n  offset: number\n  text: string\n  [key: string]: unknown\n}\n\nexport type SetNodeOperation = {\n  type: 'set_node'\n  path: Path\n  properties: Partial<Node>\n  newProperties: Partial<Node>\n  [key: string]: unknown\n}\n\nexport type SetSelectionOperation =\n  | {\n      type: 'set_selection'\n      [key: string]: unknown\n      properties: null\n      newProperties: Range\n    }\n  | {\n      type: 'set_selection'\n      [key: string]: unknown\n      properties: Partial<Range>\n      newProperties: Partial<Range>\n    }\n  | {\n      type: 'set_selection'\n      [key: string]: unknown\n      properties: Range\n      newProperties: null\n    }\n\nexport type SplitNodeOperation = {\n  type: 'split_node'\n  path: Path\n  position: number\n  target: number | null\n  properties: Partial<Node>\n  [key: string]: unknown\n}\n\nexport type NodeOperation =\n  | InsertNodeOperation\n  | MergeNodeOperation\n  | MoveNodeOperation\n  | RemoveNodeOperation\n  | SetNodeOperation\n  | SplitNodeOperation\n\nexport type SelectionOperation = SetSelectionOperation\n\nexport type TextOperation = InsertTextOperation | RemoveTextOperation\n\n/**\n * `Operation` objects define the low-level instructions that Slate editors use\n * to apply changes to their internal state. Representing all changes as\n * operations is what allows Slate editors to easily implement history,\n * collaboration, and other features.\n */\n\nexport type Operation = NodeOperation | SelectionOperation | TextOperation\n\nexport const Operation = {\n  /**\n   * Check of a value is a `NodeOperation` object.\n   */\n\n  isNodeOperation(value: any): value is NodeOperation {\n    return Operation.isOperation(value) && value.type.endsWith('_node')\n  },\n\n  /**\n   * Check of a value is an `Operation` object.\n   */\n\n  isOperation(value: any): value is Operation {\n    if (!isPlainObject(value)) {\n      return false\n    }\n\n    switch (value.type) {\n      case 'insert_node':\n        return Path.isPath(value.path) && Node.isNode(value.node)\n      case 'insert_text':\n        return (\n          typeof value.offset === 'number' &&\n          typeof value.text === 'string' &&\n          Path.isPath(value.path)\n        )\n      case 'merge_node':\n        return (\n          typeof value.position === 'number' &&\n          (typeof value.target === 'number' || value.target === null) &&\n          Path.isPath(value.path) &&\n          isPlainObject(value.properties)\n        )\n      case 'move_node':\n        return Path.isPath(value.path) && Path.isPath(value.newPath)\n      case 'remove_node':\n        return Path.isPath(value.path) && Node.isNode(value.node)\n      case 'remove_text':\n        return (\n          typeof value.offset === 'number' &&\n          typeof value.text === 'string' &&\n          Path.isPath(value.path)\n        )\n      case 'set_node':\n        return (\n          Path.isPath(value.path) &&\n          isPlainObject(value.properties) &&\n          isPlainObject(value.newProperties)\n        )\n      case 'set_selection':\n        return (\n          (value.properties === null && Range.isRange(value.newProperties)) ||\n          (value.newProperties === null && Range.isRange(value.properties)) ||\n          (isPlainObject(value.properties) &&\n            isPlainObject(value.newProperties))\n        )\n      case 'split_node':\n        return (\n          Path.isPath(value.path) &&\n          typeof value.position === 'number' &&\n          (typeof value.target === 'number' || value.target === null) &&\n          isPlainObject(value.properties)\n        )\n      default:\n        return false\n    }\n  },\n\n  /**\n   * Check if a value is a list of `Operation` objects.\n   */\n\n  isOperationList(value: any): value is Operation[] {\n    return (\n      Array.isArray(value) &&\n      (value.length === 0 || Operation.isOperation(value[0]))\n    )\n  },\n\n  /**\n   * Check of a value is a `SelectionOperation` object.\n   */\n\n  isSelectionOperation(value: any): value is SelectionOperation {\n    return Operation.isOperation(value) && value.type.endsWith('_selection')\n  },\n\n  /**\n   * Check of a value is a `TextOperation` object.\n   */\n\n  isTextOperation(value: any): value is TextOperation {\n    return Operation.isOperation(value) && value.type.endsWith('_text')\n  },\n\n  /**\n   * Invert an operation, returning a new operation that will exactly undo the\n   * original when applied.\n   */\n\n  inverse(op: Operation): Operation {\n    switch (op.type) {\n      case 'insert_node': {\n        return { ...op, type: 'remove_node' }\n      }\n\n      case 'insert_text': {\n        return { ...op, type: 'remove_text' }\n      }\n\n      case 'merge_node': {\n        return { ...op, type: 'split_node', path: Path.previous(op.path) }\n      }\n\n      case 'move_node': {\n        const { newPath, path } = op\n\n        // PERF: in this case the move operation is a no-op anyways.\n        if (Path.equals(newPath, path)) {\n          return op\n        }\n\n        // If the move happens completely within a single parent the path and\n        // newPath are stable with respect to each other.\n        if (Path.isSibling(path, newPath)) {\n          return { ...op, path: newPath, newPath: path }\n        }\n\n        // If the move does not happen within a single parent it is possible\n        // for the move to impact the true path to the location where the node\n        // was removed from and where it was inserted. We have to adjust for this\n        // and find the original path. We can accomplish this (only in non-sibling)\n        // moves by looking at the impact of the move operation on the node\n        // after the original move path.\n        const inversePath = Path.transform(path, op)!\n        const inverseNewPath = Path.transform(Path.next(path), op)!\n        return { ...op, path: inversePath, newPath: inverseNewPath }\n      }\n\n      case 'remove_node': {\n        return { ...op, type: 'insert_node' }\n      }\n\n      case 'remove_text': {\n        return { ...op, type: 'insert_text' }\n      }\n\n      case 'set_node': {\n        const { properties, newProperties } = op\n        return { ...op, properties: newProperties, newProperties: properties }\n      }\n\n      case 'set_selection': {\n        const { properties, newProperties } = op\n\n        if (properties == null) {\n          return {\n            ...op,\n            properties: newProperties as Range,\n            newProperties: null,\n          }\n        } else if (newProperties == null) {\n          return {\n            ...op,\n            properties: null,\n            newProperties: properties as Range,\n          }\n        } else {\n          return { ...op, properties: newProperties, newProperties: properties }\n        }\n      }\n\n      case 'split_node': {\n        return { ...op, type: 'merge_node', path: Path.next(op.path) }\n      }\n    }\n  },\n}\n","import { produce } from 'immer'\nimport { Operation } from '..'\n\n/**\n * `Path` arrays are a list of indexes that describe a node's exact position in\n * a Slate node tree. Although they are usually relative to the root `Editor`\n * object, they can be relative to any `Node` object.\n */\n\nexport type Path = number[]\n\nexport const Path = {\n  /**\n   * Get a list of ancestor paths for a given path.\n   *\n   * The paths are sorted from deepest to shallowest ancestor. However, if the\n   * `reverse: true` option is passed, they are reversed.\n   */\n\n  ancestors(path: Path, options: { reverse?: boolean } = {}): Path[] {\n    const { reverse = false } = options\n    let paths = Path.levels(path, options)\n\n    if (reverse) {\n      paths = paths.slice(1)\n    } else {\n      paths = paths.slice(0, -1)\n    }\n\n    return paths\n  },\n\n  /**\n   * Get the common ancestor path of two paths.\n   */\n\n  common(path: Path, another: Path): Path {\n    const common: Path = []\n\n    for (let i = 0; i < path.length && i < another.length; i++) {\n      const av = path[i]\n      const bv = another[i]\n\n      if (av !== bv) {\n        break\n      }\n\n      common.push(av)\n    }\n\n    return common\n  },\n\n  /**\n   * Compare a path to another, returning an integer indicating whether the path\n   * was before, at, or after the other.\n   *\n   * Note: Two paths of unequal length can still receive a `0` result if one is\n   * directly above or below the other. If you want exact matching, use\n   * [[Path.equals]] instead.\n   */\n\n  compare(path: Path, another: Path): -1 | 0 | 1 {\n    const min = Math.min(path.length, another.length)\n\n    for (let i = 0; i < min; i++) {\n      if (path[i] < another[i]) return -1\n      if (path[i] > another[i]) return 1\n    }\n\n    return 0\n  },\n\n  /**\n   * Check if a path ends after one of the indexes in another.\n   */\n\n  endsAfter(path: Path, another: Path): boolean {\n    const i = path.length - 1\n    const as = path.slice(0, i)\n    const bs = another.slice(0, i)\n    const av = path[i]\n    const bv = another[i]\n    return Path.equals(as, bs) && av > bv\n  },\n\n  /**\n   * Check if a path ends at one of the indexes in another.\n   */\n\n  endsAt(path: Path, another: Path): boolean {\n    const i = path.length\n    const as = path.slice(0, i)\n    const bs = another.slice(0, i)\n    return Path.equals(as, bs)\n  },\n\n  /**\n   * Check if a path ends before one of the indexes in another.\n   */\n\n  endsBefore(path: Path, another: Path): boolean {\n    const i = path.length - 1\n    const as = path.slice(0, i)\n    const bs = another.slice(0, i)\n    const av = path[i]\n    const bv = another[i]\n    return Path.equals(as, bs) && av < bv\n  },\n\n  /**\n   * Check if a path is exactly equal to another.\n   */\n\n  equals(path: Path, another: Path): boolean {\n    return (\n      path.length === another.length && path.every((n, i) => n === another[i])\n    )\n  },\n\n  /**\n   * Check if a path is after another.\n   */\n\n  isAfter(path: Path, another: Path): boolean {\n    return Path.compare(path, another) === 1\n  },\n\n  /**\n   * Check if a path is an ancestor of another.\n   */\n\n  isAncestor(path: Path, another: Path): boolean {\n    return path.length < another.length && Path.compare(path, another) === 0\n  },\n\n  /**\n   * Check if a path is before another.\n   */\n\n  isBefore(path: Path, another: Path): boolean {\n    return Path.compare(path, another) === -1\n  },\n\n  /**\n   * Check if a path is a child of another.\n   */\n\n  isChild(path: Path, another: Path): boolean {\n    return (\n      path.length === another.length + 1 && Path.compare(path, another) === 0\n    )\n  },\n\n  /**\n   * Check if a path is equal to or an ancestor of another.\n   */\n\n  isCommon(path: Path, another: Path): boolean {\n    return path.length <= another.length && Path.compare(path, another) === 0\n  },\n\n  /**\n   * Check if a path is a descendant of another.\n   */\n\n  isDescendant(path: Path, another: Path): boolean {\n    return path.length > another.length && Path.compare(path, another) === 0\n  },\n\n  /**\n   * Check if a path is the parent of another.\n   */\n\n  isParent(path: Path, another: Path): boolean {\n    return (\n      path.length + 1 === another.length && Path.compare(path, another) === 0\n    )\n  },\n\n  /**\n   * Check is a value implements the `Path` interface.\n   */\n\n  isPath(value: any): value is Path {\n    return (\n      Array.isArray(value) &&\n      (value.length === 0 || typeof value[0] === 'number')\n    )\n  },\n\n  /**\n   * Check if a path is a sibling of another.\n   */\n\n  isSibling(path: Path, another: Path): boolean {\n    if (path.length !== another.length) {\n      return false\n    }\n\n    const as = path.slice(0, -1)\n    const bs = another.slice(0, -1)\n    const al = path[path.length - 1]\n    const bl = another[another.length - 1]\n    return al !== bl && Path.equals(as, bs)\n  },\n\n  /**\n   * Get a list of paths at every level down to a path. Note: this is the same\n   * as `Path.ancestors`, but including the path itself.\n   *\n   * The paths are sorted from shallowest to deepest. However, if the `reverse:\n   * true` option is passed, they are reversed.\n   */\n\n  levels(\n    path: Path,\n    options: {\n      reverse?: boolean\n    } = {}\n  ): Path[] {\n    const { reverse = false } = options\n    const list: Path[] = []\n\n    for (let i = 0; i <= path.length; i++) {\n      list.push(path.slice(0, i))\n    }\n\n    if (reverse) {\n      list.reverse()\n    }\n\n    return list\n  },\n\n  /**\n   * Given a path, get the path to the next sibling node.\n   */\n\n  next(path: Path): Path {\n    if (path.length === 0) {\n      throw new Error(\n        `Cannot get the next path of a root path [${path}], because it has no next index.`\n      )\n    }\n\n    const last = path[path.length - 1]\n    return path.slice(0, -1).concat(last + 1)\n  },\n\n  /**\n   * Given a path, return a new path referring to the parent node above it.\n   */\n\n  parent(path: Path): Path {\n    if (path.length === 0) {\n      throw new Error(`Cannot get the parent path of the root path [${path}].`)\n    }\n\n    return path.slice(0, -1)\n  },\n\n  /**\n   * Given a path, get the path to the previous sibling node.\n   */\n\n  previous(path: Path): Path {\n    if (path.length === 0) {\n      throw new Error(\n        `Cannot get the previous path of a root path [${path}], because it has no previous index.`\n      )\n    }\n\n    const last = path[path.length - 1]\n\n    if (last <= 0) {\n      throw new Error(\n        `Cannot get the previous path of a first child path [${path}] because it would result in a negative index.`\n      )\n    }\n\n    return path.slice(0, -1).concat(last - 1)\n  },\n\n  /**\n   * Get a path relative to an ancestor.\n   */\n\n  relative(path: Path, ancestor: Path): Path {\n    if (!Path.isAncestor(ancestor, path) && !Path.equals(path, ancestor)) {\n      throw new Error(\n        `Cannot get the relative path of [${path}] inside ancestor [${ancestor}], because it is not above or equal to the path.`\n      )\n    }\n\n    return path.slice(ancestor.length)\n  },\n\n  /**\n   * Transform a path by an operation.\n   */\n\n  transform(\n    path: Path,\n    operation: Operation,\n    options: { affinity?: 'forward' | 'backward' | null } = {}\n  ): Path | null {\n    return produce(path, p => {\n      const { affinity = 'forward' } = options\n\n      // PERF: Exit early if the operation is guaranteed not to have an effect.\n      if (path.length === 0) {\n        return\n      }\n\n      switch (operation.type) {\n        case 'insert_node': {\n          const { path: op } = operation\n\n          if (\n            Path.equals(op, p) ||\n            Path.endsBefore(op, p) ||\n            Path.isAncestor(op, p)\n          ) {\n            p[op.length - 1] += 1\n          }\n\n          break\n        }\n\n        case 'remove_node': {\n          const { path: op } = operation\n\n          if (Path.equals(op, p) || Path.isAncestor(op, p)) {\n            return null\n          } else if (Path.endsBefore(op, p)) {\n            p[op.length - 1] -= 1\n          }\n\n          break\n        }\n\n        case 'merge_node': {\n          const { path: op, position } = operation\n\n          if (Path.equals(op, p) || Path.endsBefore(op, p)) {\n            p[op.length - 1] -= 1\n          } else if (Path.isAncestor(op, p)) {\n            p[op.length - 1] -= 1\n            p[op.length] += position\n          }\n\n          break\n        }\n\n        case 'split_node': {\n          const { path: op, position } = operation\n\n          if (Path.equals(op, p)) {\n            if (affinity === 'forward') {\n              p[p.length - 1] += 1\n            } else if (affinity === 'backward') {\n              // Nothing, because it still refers to the right path.\n            } else {\n              return null\n            }\n          } else if (Path.endsBefore(op, p)) {\n            p[op.length - 1] += 1\n          } else if (Path.isAncestor(op, p) && path[op.length] >= position) {\n            p[op.length - 1] += 1\n            p[op.length] -= position\n          }\n\n          break\n        }\n\n        case 'move_node': {\n          const { path: op, newPath: onp } = operation\n\n          // If the old and new path are the same, it's a no-op.\n          if (Path.equals(op, onp)) {\n            return\n          }\n\n          if (Path.isAncestor(op, p) || Path.equals(op, p)) {\n            const copy = onp.slice()\n\n            if (Path.endsBefore(op, onp) && op.length < onp.length) {\n              copy[op.length - 1] -= 1\n            }\n\n            return copy.concat(p.slice(op.length))\n          } else if (\n            Path.isSibling(op, onp) &&\n            (Path.isAncestor(onp, p) || Path.equals(onp, p))\n          ) {\n            if (Path.endsBefore(op, p)) {\n              p[op.length - 1] -= 1\n            } else {\n              p[op.length - 1] += 1\n            }\n          } else if (\n            Path.endsBefore(onp, p) ||\n            Path.equals(onp, p) ||\n            Path.isAncestor(onp, p)\n          ) {\n            if (Path.endsBefore(op, p)) {\n              p[op.length - 1] -= 1\n            }\n\n            p[onp.length - 1] += 1\n          } else if (Path.endsBefore(op, p)) {\n            if (Path.equals(onp, p)) {\n              p[onp.length - 1] += 1\n            }\n\n            p[op.length - 1] -= 1\n          }\n\n          break\n        }\n      }\n    })\n  },\n}\n","import { Operation, Path } from '..'\n\n/**\n * `PathRef` objects keep a specific path in a document synced over time as new\n * operations are applied to the editor. You can access their `current` property\n * at any time for the up-to-date path value.\n */\n\nexport interface PathRef {\n  current: Path | null\n  affinity: 'forward' | 'backward' | null\n  unref(): Path | null\n}\n\nexport const PathRef = {\n  /**\n   * Transform the path ref's current value by an operation.\n   */\n\n  transform(ref: PathRef, op: Operation): void {\n    const { current, affinity } = ref\n\n    if (current == null) {\n      return\n    }\n\n    const path = Path.transform(current, op, { affinity })\n    ref.current = path\n\n    if (path == null) {\n      ref.unref()\n    }\n  },\n}\n","import isPlainObject from 'is-plain-object'\nimport { produce } from 'immer'\nimport { Operation, Path } from '..'\n\n/**\n * `Point` objects refer to a specific location in a text node in a Slate\n * document. Its path refers to the location of the node in the tree, and its\n * offset refers to the distance into the node's string of text. Points can\n * only refer to `Text` nodes.\n */\n\nexport interface Point {\n  path: Path\n  offset: number\n  [key: string]: unknown\n}\n\nexport const Point = {\n  /**\n   * Compare a point to another, returning an integer indicating whether the\n   * point was before, at, or after the other.\n   */\n\n  compare(point: Point, another: Point): -1 | 0 | 1 {\n    const result = Path.compare(point.path, another.path)\n\n    if (result === 0) {\n      if (point.offset < another.offset) return -1\n      if (point.offset > another.offset) return 1\n      return 0\n    }\n\n    return result\n  },\n\n  /**\n   * Check if a point is after another.\n   */\n\n  isAfter(point: Point, another: Point): boolean {\n    return Point.compare(point, another) === 1\n  },\n\n  /**\n   * Check if a point is before another.\n   */\n\n  isBefore(point: Point, another: Point): boolean {\n    return Point.compare(point, another) === -1\n  },\n\n  /**\n   * Check if a point is exactly equal to another.\n   */\n\n  equals(point: Point, another: Point): boolean {\n    // PERF: ensure the offsets are equal first since they are cheaper to check.\n    return (\n      point.offset === another.offset && Path.equals(point.path, another.path)\n    )\n  },\n\n  /**\n   * Check if a value implements the `Point` interface.\n   */\n\n  isPoint(value: any): value is Point {\n    return (\n      isPlainObject(value) &&\n      typeof value.offset === 'number' &&\n      Path.isPath(value.path)\n    )\n  },\n\n  /**\n   * Transform a point by an operation.\n   */\n\n  transform(\n    point: Point,\n    op: Operation,\n    options: { affinity?: 'forward' | 'backward' | null } = {}\n  ): Point | null {\n    return produce(point, p => {\n      const { affinity = 'forward' } = options\n      const { path, offset } = p\n\n      switch (op.type) {\n        case 'insert_node':\n        case 'move_node': {\n          p.path = Path.transform(path, op, options)!\n          break\n        }\n\n        case 'insert_text': {\n          if (Path.equals(op.path, path) && op.offset <= offset) {\n            p.offset += op.text.length\n          }\n\n          break\n        }\n\n        case 'merge_node': {\n          if (Path.equals(op.path, path)) {\n            p.offset += op.position\n          }\n\n          p.path = Path.transform(path, op, options)!\n          break\n        }\n\n        case 'remove_text': {\n          if (Path.equals(op.path, path) && op.offset <= offset) {\n            p.offset -= Math.min(offset - op.offset, op.text.length)\n          }\n\n          break\n        }\n\n        case 'remove_node': {\n          if (Path.equals(op.path, path) || Path.isAncestor(op.path, path)) {\n            return null\n          }\n\n          p.path = Path.transform(path, op, options)!\n          break\n        }\n\n        case 'split_node': {\n          if (Path.equals(op.path, path)) {\n            if (op.position === offset && affinity == null) {\n              return null\n            } else if (\n              op.position < offset ||\n              (op.position === offset && affinity === 'forward')\n            ) {\n              p.offset -= op.position\n\n              p.path = Path.transform(path, op, {\n                ...options,\n                affinity: 'forward',\n              })!\n            }\n          } else {\n            p.path = Path.transform(path, op, options)!\n          }\n\n          break\n        }\n      }\n    })\n  },\n}\n\n/**\n * `PointEntry` objects are returned when iterating over `Point` objects that\n * belong to a range.\n */\n\nexport type PointEntry = [Point, 'anchor' | 'focus']\n","import { Operation, Point } from '..'\n\n/**\n * `PointRef` objects keep a specific point in a document synced over time as new\n * operations are applied to the editor. You can access their `current` property\n * at any time for the up-to-date point value.\n */\n\nexport interface PointRef {\n  current: Point | null\n  affinity: 'forward' | 'backward' | null\n  unref(): Point | null\n}\n\nexport const PointRef = {\n  /**\n   * Transform the point ref's current value by an operation.\n   */\n\n  transform(ref: PointRef, op: Operation): void {\n    const { current, affinity } = ref\n\n    if (current == null) {\n      return\n    }\n\n    const point = Point.transform(current, op, { affinity })\n    ref.current = point\n\n    if (point == null) {\n      ref.unref()\n    }\n  },\n}\n","import { produce } from 'immer'\nimport isPlainObject from 'is-plain-object'\nimport { Operation, Path, Point, PointEntry } from '..'\n\n/**\n * `Range` objects are a set of points that refer to a specific span of a Slate\n * document. They can define a span inside a single node or a can span across\n * multiple nodes.\n */\n\nexport interface Range {\n  anchor: Point\n  focus: Point\n  [key: string]: unknown\n}\n\nexport const Range = {\n  /**\n   * Get the start and end points of a range, in the order in which they appear\n   * in the document.\n   */\n\n  edges(\n    range: Range,\n    options: {\n      reverse?: boolean\n    } = {}\n  ): [Point, Point] {\n    const { reverse = false } = options\n    const { anchor, focus } = range\n    return Range.isBackward(range) === reverse\n      ? [anchor, focus]\n      : [focus, anchor]\n  },\n\n  /**\n   * Get the end point of a range.\n   */\n\n  end(range: Range): Point {\n    const [, end] = Range.edges(range)\n    return end\n  },\n\n  /**\n   * Check if a range is exactly equal to another.\n   */\n\n  equals(range: Range, another: Range): boolean {\n    return (\n      Point.equals(range.anchor, another.anchor) &&\n      Point.equals(range.focus, another.focus)\n    )\n  },\n\n  /**\n   * Check if a range includes a path, a point or part of another range.\n   */\n\n  includes(range: Range, target: Path | Point | Range): boolean {\n    if (Range.isRange(target)) {\n      if (\n        Range.includes(range, target.anchor) ||\n        Range.includes(range, target.focus)\n      ) {\n        return true\n      }\n\n      const [rs, re] = Range.edges(range)\n      const [ts, te] = Range.edges(target)\n      return Point.isBefore(rs, ts) && Point.isAfter(re, te)\n    }\n\n    const [start, end] = Range.edges(range)\n    let isAfterStart = false\n    let isBeforeEnd = false\n\n    if (Point.isPoint(target)) {\n      isAfterStart = Point.compare(target, start) >= 0\n      isBeforeEnd = Point.compare(target, end) <= 0\n    } else {\n      isAfterStart = Path.compare(target, start.path) >= 0\n      isBeforeEnd = Path.compare(target, end.path) <= 0\n    }\n\n    return isAfterStart && isBeforeEnd\n  },\n\n  /**\n   * Get the intersection of a range with another.\n   */\n\n  intersection(range: Range, another: Range): Range | null {\n    const { anchor, focus, ...rest } = range\n    const [s1, e1] = Range.edges(range)\n    const [s2, e2] = Range.edges(another)\n    const start = Point.isBefore(s1, s2) ? s2 : s1\n    const end = Point.isBefore(e1, e2) ? e1 : e2\n\n    if (Point.isBefore(end, start)) {\n      return null\n    } else {\n      return { anchor: start, focus: end, ...rest }\n    }\n  },\n\n  /**\n   * Check if a range is backward, meaning that its anchor point appears in the\n   * document _after_ its focus point.\n   */\n\n  isBackward(range: Range): boolean {\n    const { anchor, focus } = range\n    return Point.isAfter(anchor, focus)\n  },\n\n  /**\n   * Check if a range is collapsed, meaning that both its anchor and focus\n   * points refer to the exact same position in the document.\n   */\n\n  isCollapsed(range: Range): boolean {\n    const { anchor, focus } = range\n    return Point.equals(anchor, focus)\n  },\n\n  /**\n   * Check if a range is expanded.\n   *\n   * This is the opposite of [[Range.isCollapsed]] and is provided for legibility.\n   */\n\n  isExpanded(range: Range): boolean {\n    return !Range.isCollapsed(range)\n  },\n\n  /**\n   * Check if a range is forward.\n   *\n   * This is the opposite of [[Range.isBackward]] and is provided for legibility.\n   */\n\n  isForward(range: Range): boolean {\n    return !Range.isBackward(range)\n  },\n\n  /**\n   * Check if a value implements the [[Range]] interface.\n   */\n\n  isRange(value: any): value is Range {\n    return (\n      isPlainObject(value) &&\n      Point.isPoint(value.anchor) &&\n      Point.isPoint(value.focus)\n    )\n  },\n\n  /**\n   * Iterate through all of the point entries in a range.\n   */\n\n  *points(range: Range): Iterable<PointEntry> {\n    yield [range.anchor, 'anchor']\n    yield [range.focus, 'focus']\n  },\n\n  /**\n   * Get the start point of a range.\n   */\n\n  start(range: Range): Point {\n    const [start] = Range.edges(range)\n    return start\n  },\n\n  /**\n   * Transform a range by an operation.\n   */\n\n  transform(\n    range: Range,\n    op: Operation,\n    options: { affinity: 'forward' | 'backward' | 'outward' | 'inward' | null }\n  ): Range | null {\n    const { affinity = 'inward' } = options\n    let affinityAnchor: 'forward' | 'backward' | null\n    let affinityFocus: 'forward' | 'backward' | null\n\n    if (affinity === 'inward') {\n      if (Range.isForward(range)) {\n        affinityAnchor = 'forward'\n        affinityFocus = 'backward'\n      } else {\n        affinityAnchor = 'backward'\n        affinityFocus = 'forward'\n      }\n    } else if (affinity === 'outward') {\n      if (Range.isForward(range)) {\n        affinityAnchor = 'backward'\n        affinityFocus = 'forward'\n      } else {\n        affinityAnchor = 'forward'\n        affinityFocus = 'backward'\n      }\n    } else {\n      affinityAnchor = affinity\n      affinityFocus = affinity\n    }\n\n    return produce(range, r => {\n      const anchor = Point.transform(r.anchor, op, { affinity: affinityAnchor })\n      const focus = Point.transform(r.focus, op, { affinity: affinityFocus })\n\n      if (!anchor || !focus) {\n        return null\n      }\n\n      r.anchor = anchor\n      r.focus = focus\n    })\n  },\n}\n","import { Operation, Range } from '..'\n\n/**\n * `RangeRef` objects keep a specific range in a document synced over time as new\n * operations are applied to the editor. You can access their `current` property\n * at any time for the up-to-date range value.\n */\n\nexport interface RangeRef {\n  current: Range | null\n  affinity: 'forward' | 'backward' | 'outward' | 'inward' | null\n  unref(): Range | null\n}\n\nexport const RangeRef = {\n  /**\n   * Transform the range ref's current value by an operation.\n   */\n\n  transform(ref: RangeRef, op: Operation): void {\n    const { current, affinity } = ref\n\n    if (current == null) {\n      return\n    }\n\n    const path = Range.transform(current, op, { affinity })\n    ref.current = path\n\n    if (path == null) {\n      ref.unref()\n    }\n  },\n}\n","import isPlainObject from 'is-plain-object'\nimport { Range } from '..'\n\n/**\n * `Text` objects represent the nodes that contain the actual text content of a\n * Slate document along with any formatting properties. They are always leaf\n * nodes in the document tree as they cannot contain any children.\n */\n\nexport interface Text {\n  text: string\n  [key: string]: unknown\n}\n\nexport const Text = {\n  /**\n   * Check if two text nodes are equal.\n   */\n\n  equals(\n    text: Text,\n    another: Text,\n    options: { loose?: boolean } = {}\n  ): boolean {\n    const { loose = false } = options\n\n    for (const key in text) {\n      if (loose && key === 'text') {\n        continue\n      }\n\n      if (text[key] !== another[key]) {\n        return false\n      }\n    }\n\n    for (const key in another) {\n      if (loose && key === 'text') {\n        continue\n      }\n\n      if (text[key] !== another[key]) {\n        return false\n      }\n    }\n\n    return true\n  },\n\n  /**\n   * Check if a value implements the `Text` interface.\n   */\n\n  isText(value: any): value is Text {\n    return isPlainObject(value) && typeof value.text === 'string'\n  },\n\n  /**\n   * Check if a value is a list of `Text` objects.\n   */\n\n  isTextList(value: any): value is Text[] {\n    return Array.isArray(value) && (value.length === 0 || Text.isText(value[0]))\n  },\n\n  /**\n   * Check if an text matches set of properties.\n   *\n   * Note: this is for matching custom properties, and it does not ensure that\n   * the `text` property are two nodes equal.\n   */\n\n  matches(text: Text, props: Partial<Text>): boolean {\n    for (const key in props) {\n      if (key === 'text') {\n        continue\n      }\n\n      if (text[key] !== props[key]) {\n        return false\n      }\n    }\n\n    return true\n  },\n\n  /**\n   * Get the leaves for a text node given decorations.\n   */\n\n  decorations(node: Text, decorations: Range[]): Text[] {\n    let leaves: Text[] = [{ ...node }]\n\n    for (const dec of decorations) {\n      const { anchor, focus, ...rest } = dec\n      const [start, end] = Range.edges(dec)\n      const next = []\n      let o = 0\n\n      for (const leaf of leaves) {\n        const { length } = leaf.text\n        const offset = o\n        o += length\n\n        // If the range encompases the entire leaf, add the range.\n        if (start.offset <= offset && end.offset >= offset + length) {\n          Object.assign(leaf, rest)\n          next.push(leaf)\n          continue\n        }\n\n        // If the range starts after the leaf, or ends before it, continue.\n        if (\n          start.offset > offset + length ||\n          end.offset < offset ||\n          (end.offset === offset && offset !== 0)\n        ) {\n          next.push(leaf)\n          continue\n        }\n\n        // Otherwise we need to split the leaf, at the start, end, or both,\n        // and add the range to the middle intersecting section. Do the end\n        // split first since we don't need to update the offset that way.\n        let middle = leaf\n        let before\n        let after\n\n        if (end.offset < offset + length) {\n          const off = end.offset - offset\n          after = { ...middle, text: middle.text.slice(off) }\n          middle = { ...middle, text: middle.text.slice(0, off) }\n        }\n\n        if (start.offset > offset) {\n          const off = start.offset - offset\n          before = { ...middle, text: middle.text.slice(0, off) }\n          middle = { ...middle, text: middle.text.slice(off) }\n        }\n\n        Object.assign(middle, rest)\n\n        if (before) {\n          next.push(before)\n        }\n\n        next.push(middle)\n\n        if (after) {\n          next.push(after)\n        }\n      }\n\n      leaves = next\n    }\n\n    return leaves\n  },\n}\n","import {\n  Editor,\n  Element,\n  Location,\n  Node,\n  Path,\n  Point,\n  Range,\n  Text,\n  Transforms,\n  NodeEntry,\n  Ancestor,\n} from '..'\n\nexport const NodeTransforms = {\n  /**\n   * Insert nodes at a specific location in the Editor.\n   */\n\n  insertNodes(\n    editor: Editor,\n    nodes: Node | Node[],\n    options: {\n      at?: Location\n      match?: (node: Node) => boolean\n      mode?: 'highest' | 'lowest'\n      hanging?: boolean\n      select?: boolean\n      voids?: boolean\n    } = {}\n  ) {\n    Editor.withoutNormalizing(editor, () => {\n      const { hanging = false, voids = false, mode = 'lowest' } = options\n      let { at, match, select } = options\n\n      if (Node.isNode(nodes)) {\n        nodes = [nodes]\n      }\n\n      if (nodes.length === 0) {\n        return\n      }\n\n      const [node] = nodes\n\n      // By default, use the selection as the target location. But if there is\n      // no selection, insert at the end of the document since that is such a\n      // common use case when inserting from a non-selected state.\n      if (!at) {\n        if (editor.selection) {\n          at = editor.selection\n        } else if (editor.children.length > 0) {\n          at = Editor.end(editor, [])\n        } else {\n          at = [0]\n        }\n\n        select = true\n      }\n\n      if (select == null) {\n        select = false\n      }\n\n      if (Range.isRange(at)) {\n        if (!hanging) {\n          at = Editor.unhangRange(editor, at)\n        }\n\n        if (Range.isCollapsed(at)) {\n          at = at.anchor\n        } else {\n          const [, end] = Range.edges(at)\n          const pointRef = Editor.pointRef(editor, end)\n          Transforms.delete(editor, { at })\n          at = pointRef.unref()!\n        }\n      }\n\n      if (Point.isPoint(at)) {\n        if (match == null) {\n          if (Text.isText(node)) {\n            match = n => Text.isText(n)\n          } else if (editor.isInline(node)) {\n            match = n => Text.isText(n) || Editor.isInline(editor, n)\n          } else {\n            match = n => Editor.isBlock(editor, n)\n          }\n        }\n\n        const [entry] = Editor.nodes(editor, {\n          at: at.path,\n          match,\n          mode,\n          voids,\n        })\n\n        if (entry) {\n          const [, matchPath] = entry\n          const pathRef = Editor.pathRef(editor, matchPath)\n          const isAtEnd = Editor.isEnd(editor, at, matchPath)\n          Transforms.splitNodes(editor, { at, match, mode, voids })\n          const path = pathRef.unref()!\n          at = isAtEnd ? Path.next(path) : path\n        } else {\n          return\n        }\n      }\n\n      const parentPath = Path.parent(at)\n      let index = at[at.length - 1]\n\n      if (!voids && Editor.void(editor, { at: parentPath })) {\n        return\n      }\n\n      for (const node of nodes) {\n        const path = parentPath.concat(index)\n        index++\n        editor.apply({ type: 'insert_node', path, node })\n      }\n\n      if (select) {\n        const point = Editor.end(editor, at)\n\n        if (point) {\n          Transforms.select(editor, point)\n        }\n      }\n    })\n  },\n\n  /**\n   * Lift nodes at a specific location upwards in the document tree, splitting\n   * their parent in two if necessary.\n   */\n\n  liftNodes(\n    editor: Editor,\n    options: {\n      at?: Location\n      match?: (node: Node) => boolean\n      mode?: 'all' | 'highest' | 'lowest'\n      voids?: boolean\n    } = {}\n  ) {\n    Editor.withoutNormalizing(editor, () => {\n      const { at = editor.selection, mode = 'lowest', voids = false } = options\n      let { match } = options\n\n      if (match == null) {\n        match = Path.isPath(at)\n          ? matchPath(editor, at)\n          : n => Editor.isBlock(editor, n)\n      }\n\n      if (!at) {\n        return\n      }\n\n      const matches = Editor.nodes(editor, { at, match, mode, voids })\n      const pathRefs = Array.from(matches, ([, p]) => Editor.pathRef(editor, p))\n\n      for (const pathRef of pathRefs) {\n        const path = pathRef.unref()!\n\n        if (path.length < 2) {\n          throw new Error(\n            `Cannot lift node at a path [${path}] because it has a depth of less than \\`2\\`.`\n          )\n        }\n\n        const parentNodeEntry = Editor.node(editor, Path.parent(path))\n        const [parent, parentPath] = parentNodeEntry as NodeEntry<Ancestor>\n        const index = path[path.length - 1]\n        const { length } = parent.children\n\n        if (length === 1) {\n          const toPath = Path.next(parentPath)\n          Transforms.moveNodes(editor, { at: path, to: toPath, voids })\n          Transforms.removeNodes(editor, { at: parentPath, voids })\n        } else if (index === 0) {\n          Transforms.moveNodes(editor, { at: path, to: parentPath, voids })\n        } else if (index === length - 1) {\n          const toPath = Path.next(parentPath)\n          Transforms.moveNodes(editor, { at: path, to: toPath, voids })\n        } else {\n          const splitPath = Path.next(path)\n          const toPath = Path.next(parentPath)\n          Transforms.splitNodes(editor, { at: splitPath, voids })\n          Transforms.moveNodes(editor, { at: path, to: toPath, voids })\n        }\n      }\n    })\n  },\n\n  /**\n   * Merge a node at a location with the previous node of the same depth,\n   * removing any empty containing nodes after the merge if necessary.\n   */\n\n  mergeNodes(\n    editor: Editor,\n    options: {\n      at?: Location\n      match?: (node: Node) => boolean\n      mode?: 'highest' | 'lowest'\n      hanging?: boolean\n      voids?: boolean\n    } = {}\n  ) {\n    Editor.withoutNormalizing(editor, () => {\n      let { match, at = editor.selection } = options\n      const { hanging = false, voids = false, mode = 'lowest' } = options\n\n      if (!at) {\n        return\n      }\n\n      if (match == null) {\n        if (Path.isPath(at)) {\n          const [parent] = Editor.parent(editor, at)\n          match = n => parent.children.includes(n)\n        } else {\n          match = n => Editor.isBlock(editor, n)\n        }\n      }\n\n      if (!hanging && Range.isRange(at)) {\n        at = Editor.unhangRange(editor, at)\n      }\n\n      if (Range.isRange(at)) {\n        if (Range.isCollapsed(at)) {\n          at = at.anchor\n        } else {\n          const [, end] = Range.edges(at)\n          const pointRef = Editor.pointRef(editor, end)\n          Transforms.delete(editor, { at })\n          at = pointRef.unref()!\n\n          if (options.at == null) {\n            Transforms.select(editor, at)\n          }\n        }\n      }\n\n      const [current] = Editor.nodes(editor, { at, match, voids, mode })\n      const prev = Editor.previous(editor, { at, match, voids, mode })\n\n      if (!current || !prev) {\n        return\n      }\n\n      const [node, path] = current\n      const [prevNode, prevPath] = prev\n\n      if (path.length === 0 || prevPath.length === 0) {\n        return\n      }\n\n      const newPath = Path.next(prevPath)\n      const commonPath = Path.common(path, prevPath)\n      const isPreviousSibling = Path.isSibling(path, prevPath)\n      const levels = Array.from(Editor.levels(editor, { at: path }), ([n]) => n)\n        .slice(commonPath.length)\n        .slice(0, -1)\n\n      // Determine if the merge will leave an ancestor of the path empty as a\n      // result, in which case we'll want to remove it after merging.\n      const emptyAncestor = Editor.above(editor, {\n        at: path,\n        mode: 'highest',\n        match: n =>\n          levels.includes(n) && Element.isElement(n) && n.children.length === 1,\n      })\n\n      const emptyRef = emptyAncestor && Editor.pathRef(editor, emptyAncestor[1])\n      let properties\n      let position\n\n      // Ensure that the nodes are equivalent, and figure out what the position\n      // and extra properties of the merge will be.\n      if (Text.isText(node) && Text.isText(prevNode)) {\n        const { text, ...rest } = node\n        position = prevNode.text.length\n        properties = rest as Partial<Text>\n      } else if (Element.isElement(node) && Element.isElement(prevNode)) {\n        const { children, ...rest } = node\n        position = prevNode.children.length\n        properties = rest as Partial<Element>\n      } else {\n        throw new Error(\n          `Cannot merge the node at path [${path}] with the previous sibling because it is not the same kind: ${JSON.stringify(\n            node\n          )} ${JSON.stringify(prevNode)}`\n        )\n      }\n\n      // If the node isn't already the next sibling of the previous node, move\n      // it so that it is before merging.\n      if (!isPreviousSibling) {\n        Transforms.moveNodes(editor, { at: path, to: newPath, voids })\n      }\n\n      // If there was going to be an empty ancestor of the node that was merged,\n      // we remove it from the tree.\n      if (emptyRef) {\n        Transforms.removeNodes(editor, { at: emptyRef.current!, voids })\n      }\n\n      // If the target node that we're merging with is empty, remove it instead\n      // of merging the two. This is a common rich text editor behavior to\n      // prevent losing formatting when deleting entire nodes when you have a\n      // hanging selection.\n      if (\n        (Element.isElement(prevNode) && Editor.isEmpty(editor, prevNode)) ||\n        (Text.isText(prevNode) && prevNode.text === '')\n      ) {\n        Transforms.removeNodes(editor, { at: prevPath, voids })\n      } else {\n        editor.apply({\n          type: 'merge_node',\n          path: newPath,\n          position,\n          target: null,\n          properties,\n        })\n      }\n\n      if (emptyRef) {\n        emptyRef.unref()\n      }\n    })\n  },\n\n  /**\n   * Move the nodes at a location to a new location.\n   */\n\n  moveNodes(\n    editor: Editor,\n    options: {\n      at?: Location\n      match?: (node: Node) => boolean\n      mode?: 'all' | 'highest' | 'lowest'\n      to: Path\n      voids?: boolean\n    }\n  ) {\n    Editor.withoutNormalizing(editor, () => {\n      const {\n        to,\n        at = editor.selection,\n        mode = 'lowest',\n        voids = false,\n      } = options\n      let { match } = options\n\n      if (!at) {\n        return\n      }\n\n      if (match == null) {\n        match = Path.isPath(at)\n          ? matchPath(editor, at)\n          : n => Editor.isBlock(editor, n)\n      }\n\n      const toRef = Editor.pathRef(editor, to)\n      const targets = Editor.nodes(editor, { at, match, mode, voids })\n      const pathRefs = Array.from(targets, ([, p]) => Editor.pathRef(editor, p))\n\n      for (const pathRef of pathRefs) {\n        const path = pathRef.unref()!\n        const newPath = toRef.current!\n\n        if (path.length !== 0) {\n          editor.apply({ type: 'move_node', path, newPath })\n        }\n      }\n\n      toRef.unref()\n    })\n  },\n\n  /**\n   * Remove the nodes at a specific location in the document.\n   */\n\n  removeNodes(\n    editor: Editor,\n    options: {\n      at?: Location\n      match?: (node: Node) => boolean\n      mode?: 'highest' | 'lowest'\n      hanging?: boolean\n      voids?: boolean\n    } = {}\n  ) {\n    Editor.withoutNormalizing(editor, () => {\n      const { hanging = false, voids = false, mode = 'lowest' } = options\n      let { at = editor.selection, match } = options\n\n      if (!at) {\n        return\n      }\n\n      if (match == null) {\n        match = Path.isPath(at)\n          ? matchPath(editor, at)\n          : n => Editor.isBlock(editor, n)\n      }\n\n      if (!hanging && Range.isRange(at)) {\n        at = Editor.unhangRange(editor, at)\n      }\n\n      const depths = Editor.nodes(editor, { at, match, mode, voids })\n      const pathRefs = Array.from(depths, ([, p]) => Editor.pathRef(editor, p))\n\n      for (const pathRef of pathRefs) {\n        const path = pathRef.unref()!\n\n        if (path) {\n          const [node] = Editor.node(editor, path)\n          editor.apply({ type: 'remove_node', path, node })\n        }\n      }\n    })\n  },\n\n  /**\n   * Set new properties on the nodes at a location.\n   */\n\n  setNodes(\n    editor: Editor,\n    props: Partial<Node>,\n    options: {\n      at?: Location\n      match?: (node: Node) => boolean\n      mode?: 'all' | 'highest' | 'lowest'\n      hanging?: boolean\n      split?: boolean\n      voids?: boolean\n    } = {}\n  ) {\n    Editor.withoutNormalizing(editor, () => {\n      let { match, at = editor.selection } = options\n      const {\n        hanging = false,\n        mode = 'lowest',\n        split = false,\n        voids = false,\n      } = options\n\n      if (!at) {\n        return\n      }\n\n      if (match == null) {\n        match = Path.isPath(at)\n          ? matchPath(editor, at)\n          : n => Editor.isBlock(editor, n)\n      }\n\n      if (!hanging && Range.isRange(at)) {\n        at = Editor.unhangRange(editor, at)\n      }\n\n      if (split && Range.isRange(at)) {\n        const rangeRef = Editor.rangeRef(editor, at, { affinity: 'inward' })\n        const [start, end] = Range.edges(at)\n        const splitMode = mode === 'lowest' ? 'lowest' : 'highest'\n        Transforms.splitNodes(editor, {\n          at: end,\n          match,\n          mode: splitMode,\n          voids,\n        })\n        Transforms.splitNodes(editor, {\n          at: start,\n          match,\n          mode: splitMode,\n          voids,\n        })\n        at = rangeRef.unref()!\n\n        if (options.at == null) {\n          Transforms.select(editor, at)\n        }\n      }\n\n      for (const [node, path] of Editor.nodes(editor, {\n        at,\n        match,\n        mode,\n        voids,\n      })) {\n        const properties: Partial<Node> = {}\n        const newProperties: Partial<Node> = {}\n\n        // You can't set properties on the editor node.\n        if (path.length === 0) {\n          continue\n        }\n\n        for (const k in props) {\n          if (k === 'children' || k === 'text') {\n            continue\n          }\n\n          if (props[k] !== node[k]) {\n            properties[k] = node[k]\n            newProperties[k] = props[k]\n          }\n        }\n\n        if (Object.keys(newProperties).length !== 0) {\n          editor.apply({\n            type: 'set_node',\n            path,\n            properties,\n            newProperties,\n          })\n        }\n      }\n    })\n  },\n\n  /**\n   * Split the nodes at a specific location.\n   */\n\n  splitNodes(\n    editor: Editor,\n    options: {\n      at?: Location\n      match?: (node: Node) => boolean\n      mode?: 'highest' | 'lowest'\n      always?: boolean\n      height?: number\n      voids?: boolean\n    } = {}\n  ) {\n    Editor.withoutNormalizing(editor, () => {\n      const { mode = 'lowest', voids = false } = options\n      let { match, at = editor.selection, height = 0, always = false } = options\n\n      if (match == null) {\n        match = n => Editor.isBlock(editor, n)\n      }\n\n      if (Range.isRange(at)) {\n        at = deleteRange(editor, at)\n      }\n\n      // If the target is a path, the default height-skipping and position\n      // counters need to account for us potentially splitting at a non-leaf.\n      if (Path.isPath(at)) {\n        const path = at\n        const point = Editor.point(editor, path)\n        const [parent] = Editor.parent(editor, path)\n        match = n => n === parent\n        height = point.path.length - path.length + 1\n        at = point\n        always = true\n      }\n\n      if (!at) {\n        return\n      }\n\n      const beforeRef = Editor.pointRef(editor, at, {\n        affinity: 'backward',\n      })\n      const [highest] = Editor.nodes(editor, { at, match, mode, voids })\n\n      if (!highest) {\n        return\n      }\n\n      const voidMatch = Editor.void(editor, { at, mode: 'highest' })\n      const nudge = 0\n\n      if (!voids && voidMatch) {\n        const [voidNode, voidPath] = voidMatch\n\n        if (Element.isElement(voidNode) && editor.isInline(voidNode)) {\n          let after = Editor.after(editor, voidPath)\n\n          if (!after) {\n            const text = { text: '' }\n            const afterPath = Path.next(voidPath)\n            Transforms.insertNodes(editor, text, { at: afterPath, voids })\n            after = Editor.point(editor, afterPath)!\n          }\n\n          at = after\n          always = true\n        }\n\n        const siblingHeight = at.path.length - voidPath.length\n        height = siblingHeight + 1\n        always = true\n      }\n\n      const afterRef = Editor.pointRef(editor, at)\n      const depth = at.path.length - height\n      const [, highestPath] = highest\n      const lowestPath = at.path.slice(0, depth)\n      let position = height === 0 ? at.offset : at.path[depth] + nudge\n      let target: number | null = null\n\n      for (const [node, path] of Editor.levels(editor, {\n        at: lowestPath,\n        reverse: true,\n        voids,\n      })) {\n        let split = false\n\n        if (\n          path.length < highestPath.length ||\n          path.length === 0 ||\n          (!voids && Editor.isVoid(editor, node))\n        ) {\n          break\n        }\n\n        const point = beforeRef.current!\n        const isEnd = Editor.isEnd(editor, point, path)\n\n        if (always || !beforeRef || !Editor.isEdge(editor, point, path)) {\n          split = true\n          const { text, children, ...properties } = node\n          editor.apply({\n            type: 'split_node',\n            path,\n            position,\n            target,\n            properties,\n          })\n        }\n\n        target = position\n        position = path[path.length - 1] + (split || isEnd ? 1 : 0)\n      }\n\n      if (options.at == null) {\n        const point = afterRef.current || Editor.end(editor, [])\n        Transforms.select(editor, point)\n      }\n\n      beforeRef.unref()\n      afterRef.unref()\n    })\n  },\n\n  /**\n   * Unset properties on the nodes at a location.\n   */\n\n  unsetNodes(\n    editor: Editor,\n    props: string | string[],\n    options: {\n      at?: Location\n      match?: (node: Node) => boolean\n      mode?: 'all' | 'highest' | 'lowest'\n      split?: boolean\n      voids?: boolean\n    } = {}\n  ) {\n    if (!Array.isArray(props)) {\n      props = [props]\n    }\n\n    const obj = {}\n\n    for (const key of props) {\n      obj[key] = null\n    }\n\n    Transforms.setNodes(editor, obj, options)\n  },\n\n  /**\n   * Unwrap the nodes at a location from a parent node, splitting the parent if\n   * necessary to ensure that only the content in the range is unwrapped.\n   */\n\n  unwrapNodes(\n    editor: Editor,\n    options: {\n      at?: Location\n      match?: (node: Node) => boolean\n      mode?: 'all' | 'highest' | 'lowest'\n      split?: boolean\n      voids?: boolean\n    }\n  ) {\n    Editor.withoutNormalizing(editor, () => {\n      const { mode = 'lowest', split = false, voids = false } = options\n      let { at = editor.selection, match } = options\n\n      if (!at) {\n        return\n      }\n\n      if (match == null) {\n        match = Path.isPath(at)\n          ? matchPath(editor, at)\n          : n => Editor.isBlock(editor, n)\n      }\n\n      if (Path.isPath(at)) {\n        at = Editor.range(editor, at)\n      }\n\n      const rangeRef = Range.isRange(at) ? Editor.rangeRef(editor, at) : null\n      const matches = Editor.nodes(editor, { at, match, mode, voids })\n      const pathRefs = Array.from(matches, ([, p]) => Editor.pathRef(editor, p))\n\n      for (const pathRef of pathRefs) {\n        const path = pathRef.unref()!\n        const [node] = Editor.node(editor, path) as NodeEntry<Ancestor>\n        let range = Editor.range(editor, path)\n\n        if (split && rangeRef) {\n          range = Range.intersection(rangeRef.current!, range)!\n        }\n\n        Transforms.liftNodes(editor, {\n          at: range,\n          match: n => node.children.includes(n),\n          voids,\n        })\n      }\n\n      if (rangeRef) {\n        rangeRef.unref()\n      }\n    })\n  },\n\n  /**\n   * Wrap the nodes at a location in a new container node, splitting the edges\n   * of the range first to ensure that only the content in the range is wrapped.\n   */\n\n  wrapNodes(\n    editor: Editor,\n    element: Element,\n    options: {\n      at?: Location\n      match?: (node: Node) => boolean\n      mode?: 'all' | 'highest' | 'lowest'\n      split?: boolean\n      voids?: boolean\n    } = {}\n  ) {\n    Editor.withoutNormalizing(editor, () => {\n      const { mode = 'lowest', split = false, voids = false } = options\n      let { match, at = editor.selection } = options\n\n      if (!at) {\n        return\n      }\n\n      if (match == null) {\n        if (Path.isPath(at)) {\n          match = matchPath(editor, at)\n        } else if (editor.isInline(element)) {\n          match = n => Editor.isInline(editor, n) || Text.isText(n)\n        } else {\n          match = n => Editor.isBlock(editor, n)\n        }\n      }\n\n      if (split && Range.isRange(at)) {\n        const [start, end] = Range.edges(at)\n        const rangeRef = Editor.rangeRef(editor, at, {\n          affinity: 'inward',\n        })\n        Transforms.splitNodes(editor, { at: end, match, voids })\n        Transforms.splitNodes(editor, { at: start, match, voids })\n        at = rangeRef.unref()!\n\n        if (options.at == null) {\n          Transforms.select(editor, at)\n        }\n      }\n\n      const roots = Array.from(\n        Editor.nodes(editor, {\n          at,\n          match: editor.isInline(element)\n            ? n => Editor.isBlock(editor, n)\n            : n => Editor.isEditor(n),\n          mode: 'lowest',\n          voids,\n        })\n      )\n\n      for (const [, rootPath] of roots) {\n        const a = Range.isRange(at)\n          ? Range.intersection(at, Editor.range(editor, rootPath))\n          : at\n\n        if (!a) {\n          continue\n        }\n\n        const matches = Array.from(\n          Editor.nodes(editor, { at: a, match, mode, voids })\n        )\n\n        if (matches.length > 0) {\n          const [first] = matches\n          const last = matches[matches.length - 1]\n          const [, firstPath] = first\n          const [, lastPath] = last\n          const commonPath = Path.equals(firstPath, lastPath)\n            ? Path.parent(firstPath)\n            : Path.common(firstPath, lastPath)\n\n          const range = Editor.range(editor, firstPath, lastPath)\n          const commonNodeEntry = Editor.node(editor, commonPath)\n          const [commonNode] = commonNodeEntry as NodeEntry<Ancestor>\n          const depth = commonPath.length + 1\n          const wrapperPath = Path.next(lastPath.slice(0, depth))\n          const wrapper = { ...element, children: [] }\n          Transforms.insertNodes(editor, wrapper, { at: wrapperPath, voids })\n\n          Transforms.moveNodes(editor, {\n            at: range,\n            match: n => commonNode.children.includes(n),\n            to: wrapperPath.concat(0),\n            voids,\n          })\n        }\n      }\n    })\n  },\n}\n\n/**\n * Convert a range into a point by deleting it's content.\n */\n\nconst deleteRange = (editor: Editor, range: Range): Point | null => {\n  if (Range.isCollapsed(range)) {\n    return range.anchor\n  } else {\n    const [, end] = Range.edges(range)\n    const pointRef = Editor.pointRef(editor, end)\n    Transforms.delete(editor, { at: range })\n    return pointRef.unref()\n  }\n}\n\nconst matchPath = (editor: Editor, path: Path): ((node: Node) => boolean) => {\n  const [node] = Editor.node(editor, path)\n  return n => n === node\n}\n","import { GeneralTransforms } from './general'\nimport { NodeTransforms } from './node'\nimport { SelectionTransforms } from './selection'\nimport { TextTransforms } from './text'\n\nexport const Transforms = {\n  ...GeneralTransforms,\n  ...NodeTransforms,\n  ...SelectionTransforms,\n  ...TextTransforms,\n}\n","import { createDraft, finishDraft, isDraft } from 'immer'\nimport {\n  Node,\n  Editor,\n  Range,\n  Point,\n  Text,\n  Element,\n  Operation,\n  Descendant,\n  NodeEntry,\n  Path,\n  Ancestor,\n} from '..'\n\nexport const GeneralTransforms = {\n  /**\n   * Transform the editor by an operation.\n   */\n\n  transform(editor: Editor, op: Operation) {\n    editor.children = createDraft(editor.children)\n    let selection = editor.selection && createDraft(editor.selection)\n\n    switch (op.type) {\n      case 'insert_node': {\n        const { path, node } = op\n        const parent = Node.parent(editor, path)\n        const index = path[path.length - 1]\n        parent.children.splice(index, 0, node)\n\n        if (selection) {\n          for (const [point, key] of Range.points(selection)) {\n            selection[key] = Point.transform(point, op)!\n          }\n        }\n\n        break\n      }\n\n      case 'insert_text': {\n        const { path, offset, text } = op\n        const node = Node.leaf(editor, path)\n        const before = node.text.slice(0, offset)\n        const after = node.text.slice(offset)\n        node.text = before + text + after\n\n        if (selection) {\n          for (const [point, key] of Range.points(selection)) {\n            selection[key] = Point.transform(point, op)!\n          }\n        }\n\n        break\n      }\n\n      case 'merge_node': {\n        const { path } = op\n        const node = Node.get(editor, path)\n        const prevPath = Path.previous(path)\n        const prev = Node.get(editor, prevPath)\n        const parent = Node.parent(editor, path)\n        const index = path[path.length - 1]\n\n        if (Text.isText(node) && Text.isText(prev)) {\n          prev.text += node.text\n        } else if (!Text.isText(node) && !Text.isText(prev)) {\n          prev.children.push(...node.children)\n        } else {\n          throw new Error(\n            `Cannot apply a \"merge_node\" operation at path [${path}] to nodes of different interaces: ${node} ${prev}`\n          )\n        }\n\n        parent.children.splice(index, 1)\n\n        if (selection) {\n          for (const [point, key] of Range.points(selection)) {\n            selection[key] = Point.transform(point, op)!\n          }\n        }\n\n        break\n      }\n\n      case 'move_node': {\n        const { path, newPath } = op\n\n        if (Path.isAncestor(path, newPath)) {\n          throw new Error(\n            `Cannot move a path [${path}] to new path [${newPath}] because the destination is inside itself.`\n          )\n        }\n\n        const node = Node.get(editor, path)\n        const parent = Node.parent(editor, path)\n        const index = path[path.length - 1]\n\n        // This is tricky, but since the `path` and `newPath` both refer to\n        // the same snapshot in time, there's a mismatch. After either\n        // removing the original position, the second step's path can be out\n        // of date. So instead of using the `op.newPath` directly, we\n        // transform `op.path` to ascertain what the `newPath` would be after\n        // the operation was applied.\n        parent.children.splice(index, 1)\n        const truePath = Path.transform(path, op)!\n        const newParent = Node.get(editor, Path.parent(truePath)) as Ancestor\n        const newIndex = truePath[truePath.length - 1]\n\n        newParent.children.splice(newIndex, 0, node)\n\n        if (selection) {\n          for (const [point, key] of Range.points(selection)) {\n            selection[key] = Point.transform(point, op)!\n          }\n        }\n\n        break\n      }\n\n      case 'remove_node': {\n        const { path } = op\n        const index = path[path.length - 1]\n        const parent = Node.parent(editor, path)\n        parent.children.splice(index, 1)\n\n        // Transform all of the points in the value, but if the point was in the\n        // node that was removed we need to update the range or remove it.\n        if (selection) {\n          for (const [point, key] of Range.points(selection)) {\n            const result = Point.transform(point, op)\n\n            if (selection != null && result != null) {\n              selection[key] = result\n            } else {\n              let prev: NodeEntry<Text> | undefined\n              let next: NodeEntry<Text> | undefined\n\n              for (const [n, p] of Node.texts(editor)) {\n                if (Path.compare(p, path) === -1) {\n                  prev = [n, p]\n                } else {\n                  next = [n, p]\n                  break\n                }\n              }\n\n              if (prev) {\n                point.path = prev[1]\n                point.offset = prev[0].text.length\n              } else if (next) {\n                point.path = next[1]\n                point.offset = 0\n              } else {\n                selection = null\n              }\n            }\n          }\n        }\n\n        break\n      }\n\n      case 'remove_text': {\n        const { path, offset, text } = op\n        const node = Node.leaf(editor, path)\n        const before = node.text.slice(0, offset)\n        const after = node.text.slice(offset + text.length)\n        node.text = before + after\n\n        if (selection) {\n          for (const [point, key] of Range.points(selection)) {\n            selection[key] = Point.transform(point, op)!\n          }\n        }\n\n        break\n      }\n\n      case 'set_node': {\n        const { path, newProperties } = op\n\n        if (path.length === 0) {\n          throw new Error(`Cannot set properties on the root node!`)\n        }\n\n        const node = Node.get(editor, path)\n\n        for (const key in newProperties) {\n          if (key === 'children' || key === 'text') {\n            throw new Error(`Cannot set the \"${key}\" property of nodes!`)\n          }\n\n          const value = newProperties[key]\n\n          if (value == null) {\n            delete node[key]\n          } else {\n            node[key] = value\n          }\n        }\n\n        break\n      }\n\n      case 'set_selection': {\n        const { newProperties } = op\n\n        if (newProperties == null) {\n          selection = newProperties\n        } else if (selection == null) {\n          if (!Range.isRange(newProperties)) {\n            throw new Error(\n              `Cannot apply an incomplete \"set_selection\" operation properties ${JSON.stringify(\n                newProperties\n              )} when there is no current selection.`\n            )\n          }\n\n          selection = newProperties\n        } else {\n          Object.assign(selection, newProperties)\n        }\n\n        break\n      }\n\n      case 'split_node': {\n        const { path, position, properties } = op\n\n        if (path.length === 0) {\n          throw new Error(\n            `Cannot apply a \"split_node\" operation at path [${path}] because the root node cannot be split.`\n          )\n        }\n\n        const node = Node.get(editor, path)\n        const parent = Node.parent(editor, path)\n        const index = path[path.length - 1]\n        let newNode: Descendant\n\n        if (Text.isText(node)) {\n          const before = node.text.slice(0, position)\n          const after = node.text.slice(position)\n          node.text = before\n          newNode = {\n            ...node,\n            ...(properties as Partial<Text>),\n            text: after,\n          }\n        } else {\n          const before = node.children.slice(0, position)\n          const after = node.children.slice(position)\n          node.children = before\n\n          newNode = {\n            ...node,\n            ...(properties as Partial<Element>),\n            children: after,\n          }\n        }\n\n        parent.children.splice(index + 1, 0, newNode)\n\n        if (selection) {\n          for (const [point, key] of Range.points(selection)) {\n            selection[key] = Point.transform(point, op)!\n          }\n        }\n\n        break\n      }\n    }\n\n    editor.children = finishDraft(editor.children) as Node[]\n\n    if (selection) {\n      editor.selection = isDraft(selection)\n        ? (finishDraft(selection) as Range)\n        : selection\n    } else {\n      editor.selection = null\n    }\n  },\n}\n","import { Editor, Location, Point, Range, Transforms } from '..'\n\nexport const SelectionTransforms = {\n  /**\n   * Collapse the selection.\n   */\n\n  collapse(\n    editor: Editor,\n    options: {\n      edge?: 'anchor' | 'focus' | 'start' | 'end'\n    } = {}\n  ) {\n    const { edge = 'anchor' } = options\n    const { selection } = editor\n\n    if (!selection) {\n      return\n    } else if (edge === 'anchor') {\n      Transforms.select(editor, selection.anchor)\n    } else if (edge === 'focus') {\n      Transforms.select(editor, selection.focus)\n    } else if (edge === 'start') {\n      const [start] = Range.edges(selection)\n      Transforms.select(editor, start)\n    } else if (edge === 'end') {\n      const [, end] = Range.edges(selection)\n      Transforms.select(editor, end)\n    }\n  },\n\n  /**\n   * Unset the selection.\n   */\n\n  deselect(editor: Editor) {\n    const { selection } = editor\n\n    if (selection) {\n      editor.apply({\n        type: 'set_selection',\n        properties: selection,\n        newProperties: null,\n      })\n    }\n  },\n\n  /**\n   * Move the selection's point forward or backward.\n   */\n\n  move(\n    editor: Editor,\n    options: {\n      distance?: number\n      unit?: 'offset' | 'character' | 'word' | 'line'\n      reverse?: boolean\n      edge?: 'anchor' | 'focus' | 'start' | 'end'\n    } = {}\n  ) {\n    const { selection } = editor\n    const { distance = 1, unit = 'character', reverse = false } = options\n    let { edge = null } = options\n\n    if (!selection) {\n      return\n    }\n\n    if (edge === 'start') {\n      edge = Range.isBackward(selection) ? 'focus' : 'anchor'\n    }\n\n    if (edge === 'end') {\n      edge = Range.isBackward(selection) ? 'anchor' : 'focus'\n    }\n\n    const { anchor, focus } = selection\n    const opts = { distance, unit }\n    const props: Partial<Range> = {}\n\n    if (edge == null || edge === 'anchor') {\n      const point = reverse\n        ? Editor.before(editor, anchor, opts)\n        : Editor.after(editor, anchor, opts)\n\n      if (point) {\n        props.anchor = point\n      }\n    }\n\n    if (edge == null || edge === 'focus') {\n      const point = reverse\n        ? Editor.before(editor, focus, opts)\n        : Editor.after(editor, focus, opts)\n\n      if (point) {\n        props.focus = point\n      }\n    }\n\n    Transforms.setSelection(editor, props)\n  },\n\n  /**\n   * Set the selection to a new value.\n   */\n\n  select(editor: Editor, target: Location) {\n    const { selection } = editor\n    target = Editor.range(editor, target)\n\n    if (selection) {\n      Transforms.setSelection(editor, target)\n      return\n    }\n\n    if (!Range.isRange(target)) {\n      throw new Error(\n        `When setting the selection and the current selection is \\`null\\` you must provide at least an \\`anchor\\` and \\`focus\\`, but you passed: ${JSON.stringify(\n          target\n        )}`\n      )\n    }\n\n    editor.apply({\n      type: 'set_selection',\n      properties: selection,\n      newProperties: target,\n    })\n  },\n\n  /**\n   * Set new properties on one of the selection's points.\n   */\n\n  setPoint(\n    editor: Editor,\n    props: Partial<Point>,\n    options: {\n      edge?: 'anchor' | 'focus' | 'start' | 'end'\n    }\n  ) {\n    const { selection } = editor\n    let { edge = 'both' } = options\n\n    if (!selection) {\n      return\n    }\n\n    if (edge === 'start') {\n      edge = Range.isBackward(selection) ? 'focus' : 'anchor'\n    }\n\n    if (edge === 'end') {\n      edge = Range.isBackward(selection) ? 'anchor' : 'focus'\n    }\n\n    const { anchor, focus } = selection\n    const point = edge === 'anchor' ? anchor : focus\n\n    Transforms.setSelection(editor, {\n      [edge === 'anchor' ? 'anchor' : 'focus']: { ...point, ...props },\n    })\n  },\n\n  /**\n   * Set new properties on the selection.\n   */\n\n  setSelection(editor: Editor, props: Partial<Range>) {\n    const { selection } = editor\n    const oldProps: Partial<Range> | null = {}\n    const newProps: Partial<Range> = {}\n\n    if (!selection) {\n      return\n    }\n\n    for (const k in props) {\n      if (\n        (k === 'anchor' &&\n          props.anchor != null &&\n          !Point.equals(props.anchor, selection.anchor)) ||\n        (k === 'focus' &&\n          props.focus != null &&\n          !Point.equals(props.focus, selection.focus)) ||\n        (k !== 'anchor' && k !== 'focus' && props[k] !== selection[k])\n      ) {\n        oldProps[k] = selection[k]\n        newProps[k] = props[k]\n      }\n    }\n\n    if (Object.keys(oldProps).length > 0) {\n      editor.apply({\n        type: 'set_selection',\n        properties: oldProps,\n        newProperties: newProps,\n      })\n    }\n  },\n}\n","import {\n  Editor,\n  Element,\n  Location,\n  Node,\n  NodeEntry,\n  Path,\n  Text,\n  Point,\n  Range,\n  Transforms,\n} from '..'\n\nexport const TextTransforms = {\n  /**\n   * Delete content in the editor.\n   */\n\n  delete(\n    editor: Editor,\n    options: {\n      at?: Location\n      distance?: number\n      unit?: 'character' | 'word' | 'line' | 'block'\n      reverse?: boolean\n      hanging?: boolean\n      voids?: boolean\n    } = {}\n  ) {\n    Editor.withoutNormalizing(editor, () => {\n      const {\n        reverse = false,\n        unit = 'character',\n        distance = 1,\n        voids = false,\n      } = options\n      let { at = editor.selection, hanging = false } = options\n\n      if (!at) {\n        return\n      }\n\n      if (Range.isRange(at) && Range.isCollapsed(at)) {\n        at = at.anchor\n      }\n\n      if (Point.isPoint(at)) {\n        const furthestVoid = Editor.void(editor, { at, mode: 'highest' })\n\n        if (!voids && furthestVoid) {\n          const [, voidPath] = furthestVoid\n          at = voidPath\n        } else {\n          const opts = { unit, distance }\n          const target = reverse\n            ? Editor.before(editor, at, opts) || Editor.start(editor, [])\n            : Editor.after(editor, at, opts) || Editor.end(editor, [])\n          at = { anchor: at, focus: target }\n          hanging = true\n        }\n      }\n\n      if (Path.isPath(at)) {\n        Transforms.removeNodes(editor, { at, voids })\n        return\n      }\n\n      if (Range.isCollapsed(at)) {\n        return\n      }\n\n      if (!hanging) {\n        at = Editor.unhangRange(editor, at, { voids })\n      }\n\n      let [start, end] = Range.edges(at)\n      const startBlock = Editor.above(editor, {\n        match: n => Editor.isBlock(editor, n),\n        at: start,\n        voids,\n      })\n      const endBlock = Editor.above(editor, {\n        match: n => Editor.isBlock(editor, n),\n        at: end,\n        voids,\n      })\n      const isAcrossBlocks =\n        startBlock && endBlock && !Path.equals(startBlock[1], endBlock[1])\n      const isSingleText = Path.equals(start.path, end.path)\n      const startVoid = voids\n        ? null\n        : Editor.void(editor, { at: start, mode: 'highest' })\n      const endVoid = voids\n        ? null\n        : Editor.void(editor, { at: end, mode: 'highest' })\n\n      // If the start or end points are inside an inline void, nudge them out.\n      if (startVoid) {\n        const before = Editor.before(editor, start)\n\n        if (\n          before &&\n          startBlock &&\n          Path.isAncestor(startBlock[1], before.path)\n        ) {\n          start = before\n        }\n      }\n\n      if (endVoid) {\n        const after = Editor.after(editor, end)\n\n        if (after && endBlock && Path.isAncestor(endBlock[1], after.path)) {\n          end = after\n        }\n      }\n\n      // Get the highest nodes that are completely inside the range, as well as\n      // the start and end nodes.\n      const matches: NodeEntry[] = []\n      let lastPath: Path | undefined\n\n      for (const entry of Editor.nodes(editor, { at, voids })) {\n        const [node, path] = entry\n\n        if (lastPath && Path.compare(path, lastPath) === 0) {\n          continue\n        }\n\n        if (\n          (!voids && Editor.isVoid(editor, node)) ||\n          (!Path.isCommon(path, start.path) && !Path.isCommon(path, end.path))\n        ) {\n          matches.push(entry)\n          lastPath = path\n        }\n      }\n\n      const pathRefs = Array.from(matches, ([, p]) => Editor.pathRef(editor, p))\n      const startRef = Editor.pointRef(editor, start)\n      const endRef = Editor.pointRef(editor, end)\n\n      if (!isSingleText && !startVoid) {\n        const point = startRef.current!\n        const [node] = Editor.leaf(editor, point)\n        const { path } = point\n        const { offset } = start\n        const text = node.text.slice(offset)\n        editor.apply({ type: 'remove_text', path, offset, text })\n      }\n\n      for (const pathRef of pathRefs) {\n        const path = pathRef.unref()!\n        Transforms.removeNodes(editor, { at: path, voids })\n      }\n\n      if (!endVoid) {\n        const point = endRef.current!\n        const [node] = Editor.leaf(editor, point)\n        const { path } = point\n        const offset = isSingleText ? start.offset : 0\n        const text = node.text.slice(offset, end.offset)\n        editor.apply({ type: 'remove_text', path, offset, text })\n      }\n\n      if (\n        !isSingleText &&\n        isAcrossBlocks &&\n        endRef.current &&\n        startRef.current\n      ) {\n        Transforms.mergeNodes(editor, {\n          at: endRef.current,\n          hanging: true,\n          voids,\n        })\n      }\n\n      const point = endRef.unref() || startRef.unref()\n\n      if (options.at == null && point) {\n        Transforms.select(editor, point)\n      }\n    })\n  },\n\n  /**\n   * Insert a fragment at a specific location in the editor.\n   */\n\n  insertFragment(\n    editor: Editor,\n    fragment: Node[],\n    options: {\n      at?: Location\n      hanging?: boolean\n      voids?: boolean\n    } = {}\n  ) {\n    Editor.withoutNormalizing(editor, () => {\n      const { hanging = false, voids = false } = options\n      let { at = editor.selection } = options\n\n      if (!fragment.length) {\n        return\n      }\n\n      if (!at) {\n        return\n      } else if (Range.isRange(at)) {\n        if (!hanging) {\n          at = Editor.unhangRange(editor, at)\n        }\n\n        if (Range.isCollapsed(at)) {\n          at = at.anchor\n        } else {\n          const [, end] = Range.edges(at)\n\n          if (!voids && Editor.void(editor, { at: end })) {\n            return\n          }\n\n          const pointRef = Editor.pointRef(editor, end)\n          Transforms.delete(editor, { at })\n          at = pointRef.unref()!\n        }\n      } else if (Path.isPath(at)) {\n        at = Editor.start(editor, at)\n      }\n\n      if (!voids && Editor.void(editor, { at })) {\n        return\n      }\n\n      // If the insert point is at the edge of an inline node, move it outside\n      // instead since it will need to be split otherwise.\n      const inlineElementMatch = Editor.above(editor, {\n        at,\n        match: n => Editor.isInline(editor, n),\n        mode: 'highest',\n        voids,\n      })\n\n      if (inlineElementMatch) {\n        const [, inlinePath] = inlineElementMatch\n\n        if (Editor.isEnd(editor, at, inlinePath)) {\n          const after = Editor.after(editor, inlinePath)!\n          at = after\n        } else if (Editor.isStart(editor, at, inlinePath)) {\n          const before = Editor.before(editor, inlinePath)!\n          at = before\n        }\n      }\n\n      const blockMatch = Editor.above(editor, {\n        match: n => Editor.isBlock(editor, n),\n        at,\n        voids,\n      })!\n      const [, blockPath] = blockMatch\n      const isBlockStart = Editor.isStart(editor, at, blockPath)\n      const isBlockEnd = Editor.isEnd(editor, at, blockPath)\n      const mergeStart = !isBlockStart || (isBlockStart && isBlockEnd)\n      const mergeEnd = !isBlockEnd\n      const [, firstPath] = Node.first({ children: fragment }, [])\n      const [, lastPath] = Node.last({ children: fragment }, [])\n\n      const matches: NodeEntry[] = []\n      const matcher = ([n, p]: NodeEntry) => {\n        if (\n          mergeStart &&\n          Path.isAncestor(p, firstPath) &&\n          Element.isElement(n) &&\n          !editor.isVoid(n) &&\n          !editor.isInline(n)\n        ) {\n          return false\n        }\n\n        if (\n          mergeEnd &&\n          Path.isAncestor(p, lastPath) &&\n          Element.isElement(n) &&\n          !editor.isVoid(n) &&\n          !editor.isInline(n)\n        ) {\n          return false\n        }\n\n        return true\n      }\n\n      for (const entry of Node.nodes(\n        { children: fragment },\n        { pass: matcher }\n      )) {\n        if (entry[1].length > 0 && matcher(entry)) {\n          matches.push(entry)\n        }\n      }\n\n      const starts = []\n      const middles = []\n      const ends = []\n      let starting = true\n      let hasBlocks = false\n\n      for (const [node] of matches) {\n        if (Element.isElement(node) && !editor.isInline(node)) {\n          starting = false\n          hasBlocks = true\n          middles.push(node)\n        } else if (starting) {\n          starts.push(node)\n        } else {\n          ends.push(node)\n        }\n      }\n\n      const [inlineMatch] = Editor.nodes(editor, {\n        at,\n        match: n => Text.isText(n) || Editor.isInline(editor, n),\n        mode: 'highest',\n        voids,\n      })!\n\n      const [, inlinePath] = inlineMatch\n      const isInlineStart = Editor.isStart(editor, at, inlinePath)\n      const isInlineEnd = Editor.isEnd(editor, at, inlinePath)\n\n      const middleRef = Editor.pathRef(\n        editor,\n        isBlockEnd ? Path.next(blockPath) : blockPath\n      )\n\n      const endRef = Editor.pathRef(\n        editor,\n        isInlineEnd ? Path.next(inlinePath) : inlinePath\n      )\n\n      Transforms.splitNodes(editor, {\n        at,\n        match: n =>\n          hasBlocks\n            ? Editor.isBlock(editor, n)\n            : Text.isText(n) || Editor.isInline(editor, n),\n        mode: hasBlocks ? 'lowest' : 'highest',\n        voids,\n      })\n\n      const startRef = Editor.pathRef(\n        editor,\n        !isInlineStart || (isInlineStart && isInlineEnd)\n          ? Path.next(inlinePath)\n          : inlinePath\n      )\n\n      Transforms.insertNodes(editor, starts, {\n        at: startRef.current!,\n        match: n => Text.isText(n) || Editor.isInline(editor, n),\n        mode: 'highest',\n        voids,\n      })\n\n      Transforms.insertNodes(editor, middles, {\n        at: middleRef.current!,\n        match: n => Editor.isBlock(editor, n),\n        mode: 'lowest',\n        voids,\n      })\n\n      Transforms.insertNodes(editor, ends, {\n        at: endRef.current!,\n        match: n => Text.isText(n) || Editor.isInline(editor, n),\n        mode: 'highest',\n        voids,\n      })\n\n      if (!options.at) {\n        let path\n\n        if (ends.length > 0) {\n          path = Path.previous(endRef.current!)\n        } else if (middles.length > 0) {\n          path = Path.previous(middleRef.current!)\n        } else {\n          path = Path.previous(startRef.current!)\n        }\n\n        const end = Editor.end(editor, path)\n        Transforms.select(editor, end)\n      }\n\n      startRef.unref()\n      middleRef.unref()\n      endRef.unref()\n    })\n  },\n\n  /**\n   * Insert a string of text in the Editor.\n   */\n\n  insertText(\n    editor: Editor,\n    text: string,\n    options: {\n      at?: Location\n      voids?: boolean\n    } = {}\n  ) {\n    Editor.withoutNormalizing(editor, () => {\n      const { voids = false } = options\n      let { at = editor.selection } = options\n\n      if (!at) {\n        return\n      }\n\n      if (Path.isPath(at)) {\n        at = Editor.range(editor, at)\n      }\n\n      if (Range.isRange(at)) {\n        if (Range.isCollapsed(at)) {\n          at = at.anchor\n        } else {\n          const end = Range.end(at)\n\n          if (!voids && Editor.void(editor, { at: end })) {\n            return\n          }\n\n          const pointRef = Editor.pointRef(editor, end)\n          Transforms.delete(editor, { at, voids })\n          at = pointRef.unref()!\n          Transforms.setSelection(editor, { anchor: at, focus: at })\n        }\n      }\n\n      if (!voids && Editor.void(editor, { at })) {\n        return\n      }\n\n      const { path, offset } = at\n      editor.apply({ type: 'insert_text', path, offset, text })\n    })\n  },\n}\n","import {\n  Descendant,\n  Editor,\n  Element,\n  Node,\n  NodeEntry,\n  Operation,\n  Path,\n  PathRef,\n  PointRef,\n  Range,\n  RangeRef,\n  Text,\n  Transforms,\n} from './'\nimport { DIRTY_PATHS, FLUSHING } from './utils/weak-maps'\n\n/**\n * Create a new Slate `Editor` object.\n */\n\nexport const createEditor = (): Editor => {\n  const editor: Editor = {\n    children: [],\n    operations: [],\n    selection: null,\n    marks: null,\n    isInline: () => false,\n    isVoid: () => false,\n    onChange: () => {},\n\n    apply: (op: Operation) => {\n      for (const ref of Editor.pathRefs(editor)) {\n        PathRef.transform(ref, op)\n      }\n\n      for (const ref of Editor.pointRefs(editor)) {\n        PointRef.transform(ref, op)\n      }\n\n      for (const ref of Editor.rangeRefs(editor)) {\n        RangeRef.transform(ref, op)\n      }\n\n      const set = new Set()\n      const dirtyPaths: Path[] = []\n\n      const add = (path: Path | null) => {\n        if (path) {\n          const key = path.join(',')\n\n          if (!set.has(key)) {\n            set.add(key)\n            dirtyPaths.push(path)\n          }\n        }\n      }\n\n      const oldDirtyPaths = DIRTY_PATHS.get(editor) || []\n      const newDirtyPaths = getDirtyPaths(op)\n\n      for (const path of oldDirtyPaths) {\n        const newPath = Path.transform(path, op)\n        add(newPath)\n      }\n\n      for (const path of newDirtyPaths) {\n        add(path)\n      }\n\n      DIRTY_PATHS.set(editor, dirtyPaths)\n      Editor.transform(editor, op)\n      editor.operations.push(op)\n      Editor.normalize(editor)\n\n      // Clear any formats applied to the cursor if the selection changes.\n      if (op.type === 'set_selection') {\n        editor.marks = null\n      }\n\n      if (!FLUSHING.get(editor)) {\n        FLUSHING.set(editor, true)\n\n        Promise.resolve().then(() => {\n          FLUSHING.set(editor, false)\n          editor.onChange()\n          editor.operations = []\n        })\n      }\n    },\n\n    addMark: (key: string, value: any) => {\n      const { selection } = editor\n\n      if (selection) {\n        if (Range.isExpanded(selection)) {\n          Transforms.setNodes(\n            editor,\n            { [key]: value },\n            { match: Text.isText, split: true }\n          )\n        } else {\n          const marks = {\n            ...(Editor.marks(editor) || {}),\n            [key]: value,\n          }\n\n          editor.marks = marks\n          editor.onChange()\n        }\n      }\n    },\n\n    deleteBackward: (unit: 'character' | 'word' | 'line' | 'block') => {\n      const { selection } = editor\n\n      if (selection && Range.isCollapsed(selection)) {\n        Transforms.delete(editor, { unit, reverse: true })\n      }\n    },\n\n    deleteForward: (unit: 'character' | 'word' | 'line' | 'block') => {\n      const { selection } = editor\n\n      if (selection && Range.isCollapsed(selection)) {\n        Transforms.delete(editor, { unit })\n      }\n    },\n\n    deleteFragment: () => {\n      const { selection } = editor\n\n      if (selection && Range.isExpanded(selection)) {\n        Transforms.delete(editor)\n      }\n    },\n\n    getFragment: () => {\n      const { selection } = editor\n\n      if (selection) {\n        return Node.fragment(editor, selection)\n      }\n      return []\n    },\n\n    insertBreak: () => {\n      Transforms.splitNodes(editor, { always: true })\n    },\n\n    insertFragment: (fragment: Node[]) => {\n      Transforms.insertFragment(editor, fragment)\n    },\n\n    insertNode: (node: Node) => {\n      Transforms.insertNodes(editor, node)\n    },\n\n    insertText: (text: string) => {\n      const { selection, marks } = editor\n\n      if (selection) {\n        // If the cursor is at the end of an inline, move it outside of\n        // the inline before inserting\n        if (Range.isCollapsed(selection)) {\n          const inline = Editor.above(editor, {\n            match: n => Editor.isInline(editor, n),\n            mode: 'highest',\n          })\n\n          if (inline) {\n            const [, inlinePath] = inline\n\n            if (Editor.isEnd(editor, selection.anchor, inlinePath)) {\n              const point = Editor.after(editor, inlinePath)!\n              Transforms.setSelection(editor, {\n                anchor: point,\n                focus: point,\n              })\n            }\n          }\n        }\n\n        if (marks) {\n          const node = { text, ...marks }\n          Transforms.insertNodes(editor, node)\n        } else {\n          Transforms.insertText(editor, text)\n        }\n\n        editor.marks = null\n      }\n    },\n\n    normalizeNode: (entry: NodeEntry) => {\n      const [node, path] = entry\n\n      // There are no core normalizations for text nodes.\n      if (Text.isText(node)) {\n        return\n      }\n\n      // Ensure that block and inline nodes have at least one text child.\n      if (Element.isElement(node) && node.children.length === 0) {\n        const child = { text: '' }\n        Transforms.insertNodes(editor, child, {\n          at: path.concat(0),\n          voids: true,\n        })\n        return\n      }\n\n      // Determine whether the node should have block or inline children.\n      const shouldHaveInlines = Editor.isEditor(node)\n        ? false\n        : Element.isElement(node) &&\n          (editor.isInline(node) ||\n            node.children.length === 0 ||\n            Text.isText(node.children[0]) ||\n            editor.isInline(node.children[0]))\n\n      // Since we'll be applying operations while iterating, keep track of an\n      // index that accounts for any added/removed nodes.\n      let n = 0\n\n      for (let i = 0; i < node.children.length; i++, n++) {\n        const child = node.children[i] as Descendant\n        const prev = node.children[i - 1] as Descendant\n        const isLast = i === node.children.length - 1\n        const isInlineOrText =\n          Text.isText(child) ||\n          (Element.isElement(child) && editor.isInline(child))\n\n        // Only allow block nodes in the top-level children and parent blocks\n        // that only contain block nodes. Similarly, only allow inline nodes in\n        // other inline nodes, or parent blocks that only contain inlines and\n        // text.\n        if (isInlineOrText !== shouldHaveInlines) {\n          Transforms.removeNodes(editor, { at: path.concat(n), voids: true })\n          n--\n        } else if (Element.isElement(child)) {\n          // Ensure that inline nodes are surrounded by text nodes.\n          if (editor.isInline(child)) {\n            if (prev == null || !Text.isText(prev)) {\n              const newChild = { text: '' }\n              Transforms.insertNodes(editor, newChild, {\n                at: path.concat(n),\n                voids: true,\n              })\n              n++\n            } else if (isLast) {\n              const newChild = { text: '' }\n              Transforms.insertNodes(editor, newChild, {\n                at: path.concat(n + 1),\n                voids: true,\n              })\n              n++\n            }\n          }\n        } else {\n          // Merge adjacent text nodes that are empty or match.\n          if (prev != null && Text.isText(prev)) {\n            if (Text.equals(child, prev, { loose: true })) {\n              Transforms.mergeNodes(editor, { at: path.concat(n), voids: true })\n              n--\n            } else if (prev.text === '') {\n              Transforms.removeNodes(editor, {\n                at: path.concat(n - 1),\n                voids: true,\n              })\n              n--\n            } else if (isLast && child.text === '') {\n              Transforms.removeNodes(editor, {\n                at: path.concat(n),\n                voids: true,\n              })\n              n--\n            }\n          }\n        }\n      }\n    },\n\n    removeMark: (key: string) => {\n      const { selection } = editor\n\n      if (selection) {\n        if (Range.isExpanded(selection)) {\n          Transforms.unsetNodes(editor, key, {\n            match: Text.isText,\n            split: true,\n          })\n        } else {\n          const marks = { ...(Editor.marks(editor) || {}) }\n          delete marks[key]\n          editor.marks = marks\n          editor.onChange()\n        }\n      }\n    },\n  }\n\n  return editor\n}\n\n/**\n * Get the \"dirty\" paths generated from an operation.\n */\n\nconst getDirtyPaths = (op: Operation) => {\n  switch (op.type) {\n    case 'insert_text':\n    case 'remove_text':\n    case 'set_node': {\n      const { path } = op\n      return Path.levels(path)\n    }\n\n    case 'insert_node': {\n      const { node, path } = op\n      const levels = Path.levels(path)\n      const descendants = Text.isText(node)\n        ? []\n        : Array.from(Node.nodes(node), ([, p]) => path.concat(p))\n\n      return [...levels, ...descendants]\n    }\n\n    case 'merge_node': {\n      const { path } = op\n      const ancestors = Path.ancestors(path)\n      const previousPath = Path.previous(path)\n      return [...ancestors, previousPath]\n    }\n\n    case 'move_node': {\n      const { path, newPath } = op\n\n      if (Path.equals(path, newPath)) {\n        return []\n      }\n\n      const oldAncestors: Path[] = []\n      const newAncestors: Path[] = []\n\n      for (const ancestor of Path.ancestors(path)) {\n        const p = Path.transform(ancestor, op)\n        oldAncestors.push(p!)\n      }\n\n      for (const ancestor of Path.ancestors(newPath)) {\n        const p = Path.transform(ancestor, op)\n        newAncestors.push(p!)\n      }\n\n      return [...oldAncestors, ...newAncestors]\n    }\n\n    case 'remove_node': {\n      const { path } = op\n      const ancestors = Path.ancestors(path)\n      return [...ancestors]\n    }\n\n    case 'split_node': {\n      const { path } = op\n      const levels = Path.levels(path)\n      const nextPath = Path.next(path)\n      return [...levels, nextPath]\n    }\n\n    default: {\n      return []\n    }\n  }\n}\n","function _extends() {\n  module.exports = _extends = Object.assign || function (target) {\n    for (var i = 1; i < arguments.length; i++) {\n      var source = arguments[i];\n\n      for (var key in source) {\n        if (Object.prototype.hasOwnProperty.call(source, key)) {\n          target[key] = source[key];\n        }\n      }\n    }\n\n    return target;\n  };\n\n  return _extends.apply(this, arguments);\n}\n\nmodule.exports = _extends;","import unsupportedIterableToArray from \"./unsupportedIterableToArray\";\nexport default function _createForOfIteratorHelper(o) {\n  if (typeof Symbol === \"undefined\" || o[Symbol.iterator] == null) {\n    if (Array.isArray(o) || (o = unsupportedIterableToArray(o))) {\n      var i = 0;\n\n      var F = function F() {};\n\n      return {\n        s: F,\n        n: function n() {\n          if (i >= o.length) return {\n            done: true\n          };\n          return {\n            done: false,\n            value: o[i++]\n          };\n        },\n        e: function e(_e) {\n          throw _e;\n        },\n        f: F\n      };\n    }\n\n    throw new TypeError(\"Invalid attempt to iterate non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\");\n  }\n\n  var it,\n      normalCompletion = true,\n      didErr = false,\n      err;\n  return {\n    s: function s() {\n      it = o[Symbol.iterator]();\n    },\n    n: function n() {\n      var step = it.next();\n      normalCompletion = step.done;\n      return step;\n    },\n    e: function e(_e2) {\n      didErr = true;\n      err = _e2;\n    },\n    f: function f() {\n      try {\n        if (!normalCompletion && it[\"return\"] != null) it[\"return\"]();\n      } finally {\n        if (didErr) throw err;\n      }\n    }\n  };\n}","/**\n * Checks if `value` is the\n * [language type](http://www.ecma-international.org/ecma-262/7.0/#sec-ecmascript-language-types)\n * of `Object`. (e.g. arrays, functions, objects, regexes, `new Number(0)`, and `new String('')`)\n *\n * @static\n * @memberOf _\n * @since 0.1.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is an object, else `false`.\n * @example\n *\n * _.isObject({});\n * // => true\n *\n * _.isObject([1, 2, 3]);\n * // => true\n *\n * _.isObject(_.noop);\n * // => true\n *\n * _.isObject(null);\n * // => false\n */\nfunction isObject(value) {\n  var type = typeof value;\n  return value != null && (type == 'object' || type == 'function');\n}\n\nmodule.exports = isObject;\n","var mapping = {\n  name: 'a',\n  unified: 'b',\n  non_qualified: 'c',\n  has_img_apple: 'd',\n  has_img_google: 'e',\n  has_img_twitter: 'f',\n  has_img_facebook: 'h',\n  keywords: 'j',\n  sheet: 'k',\n  emoticons: 'l',\n  text: 'm',\n  short_names: 'n',\n  added_in: 'o'\n};\n\nvar buildSearch = function buildSearch(emoji) {\n  var search = [];\n\n  var addToSearch = function addToSearch(strings, split) {\n    if (!strings) {\n      return;\n    }\n\n    ;\n    (Array.isArray(strings) ? strings : [strings]).forEach(function (string) {\n      ;\n      (split ? string.split(/[-|_|\\s]+/) : [string]).forEach(function (s) {\n        s = s.toLowerCase();\n\n        if (search.indexOf(s) == -1) {\n          search.push(s);\n        }\n      });\n    });\n  };\n\n  addToSearch(emoji.short_names, true);\n  addToSearch(emoji.name, true);\n  addToSearch(emoji.keywords, false);\n  addToSearch(emoji.emoticons, false);\n  return search.join(',');\n};\n\nvar compress = function compress(emoji) {\n  emoji.short_names = emoji.short_names.filter(function (short_name) {\n    return short_name !== emoji.short_name;\n  });\n  delete emoji.short_name;\n  emoji.sheet = [emoji.sheet_x, emoji.sheet_y];\n  delete emoji.sheet_x;\n  delete emoji.sheet_y;\n  emoji.added_in = parseInt(emoji.added_in);\n\n  if (emoji.added_in === 6) {\n    delete emoji.added_in;\n  }\n\n  for (var key in mapping) {\n    emoji[mapping[key]] = emoji[key];\n    delete emoji[key];\n  }\n\n  for (var _key in emoji) {\n    var value = emoji[_key];\n\n    if (Array.isArray(value) && !value.length) {\n      delete emoji[_key];\n    } else if (typeof value === 'string' && !value.length) {\n      delete emoji[_key];\n    } else if (value === null) {\n      delete emoji[_key];\n    }\n  }\n};\n\nvar uncompress = function uncompress(data) {\n  data.compressed = false;\n\n  for (var id in data.emojis) {\n    var emoji = data.emojis[id];\n\n    for (var key in mapping) {\n      emoji[key] = emoji[mapping[key]];\n      delete emoji[mapping[key]];\n    }\n\n    if (!emoji.short_names) emoji.short_names = [];\n    emoji.short_names.unshift(id);\n    emoji.sheet_x = emoji.sheet[0];\n    emoji.sheet_y = emoji.sheet[1];\n    delete emoji.sheet;\n    if (!emoji.text) emoji.text = '';\n    if (!emoji.added_in) emoji.added_in = 6;\n    emoji.added_in = emoji.added_in.toFixed(1);\n    emoji.search = buildSearch(emoji);\n  }\n};\n\nexport { buildSearch, compress, uncompress };","var _String = String;\nexport default _String.fromCodePoint || function stringFromCodePoint() {\n  var MAX_SIZE = 0x4000;\n  var codeUnits = [];\n  var highSurrogate;\n  var lowSurrogate;\n  var index = -1;\n  var length = arguments.length;\n\n  if (!length) {\n    return '';\n  }\n\n  var result = '';\n\n  while (++index < length) {\n    var codePoint = Number(arguments[index]);\n\n    if (!isFinite(codePoint) || // `NaN`, `+Infinity`, or `-Infinity`\n    codePoint < 0 || // not a valid Unicode code point\n    codePoint > 0x10ffff || // not a valid Unicode code point\n    Math.floor(codePoint) != codePoint // not an integer\n    ) {\n        throw RangeError('Invalid code point: ' + codePoint);\n      }\n\n    if (codePoint <= 0xffff) {\n      // BMP code point\n      codeUnits.push(codePoint);\n    } else {\n      // Astral code point; split in surrogate halves\n      // http://mathiasbynens.be/notes/javascript-encoding#surrogate-formulae\n      codePoint -= 0x10000;\n      highSurrogate = (codePoint >> 10) + 0xd800;\n      lowSurrogate = codePoint % 0x400 + 0xdc00;\n      codeUnits.push(highSurrogate, lowSurrogate);\n    }\n\n    if (index + 1 === length || codeUnits.length > MAX_SIZE) {\n      result += String.fromCharCode.apply(null, codeUnits);\n      codeUnits.length = 0;\n    }\n  }\n\n  return result;\n};","import _typeof from \"@babel/runtime/helpers/typeof\";\nimport { buildSearch } from './data';\nimport stringFromCodePoint from '../polyfills/stringFromCodePoint';\nimport { uncompress } from './data';\nvar COLONS_REGEX = /^(?:\\:([^\\:]+)\\:)(?:\\:skin-tone-(\\d)\\:)?$/;\nvar SKINS = ['1F3FA', '1F3FB', '1F3FC', '1F3FD', '1F3FE', '1F3FF'];\n\nfunction unifiedToNative(unified) {\n  var unicodes = unified.split('-'),\n      codePoints = unicodes.map(function (u) {\n    return \"0x\".concat(u);\n  });\n  return stringFromCodePoint.apply(null, codePoints);\n}\n\nfunction sanitize(emoji) {\n  var name = emoji.name,\n      short_names = emoji.short_names,\n      skin_tone = emoji.skin_tone,\n      skin_variations = emoji.skin_variations,\n      emoticons = emoji.emoticons,\n      unified = emoji.unified,\n      custom = emoji.custom,\n      customCategory = emoji.customCategory,\n      imageUrl = emoji.imageUrl,\n      id = emoji.id || short_names[0],\n      colons = \":\".concat(id, \":\");\n\n  if (custom) {\n    return {\n      id: id,\n      name: name,\n      short_names: short_names,\n      colons: colons,\n      emoticons: emoticons,\n      custom: custom,\n      customCategory: customCategory,\n      imageUrl: imageUrl\n    };\n  }\n\n  if (skin_tone) {\n    colons += \":skin-tone-\".concat(skin_tone, \":\");\n  }\n\n  return {\n    id: id,\n    name: name,\n    short_names: short_names,\n    colons: colons,\n    emoticons: emoticons,\n    unified: unified.toLowerCase(),\n    skin: skin_tone || (skin_variations ? 1 : null),\n    \"native\": unifiedToNative(unified)\n  };\n}\n\nfunction getSanitizedData() {\n  return sanitize(getData.apply(void 0, arguments));\n}\n\nfunction getData(emoji, skin, set, data) {\n  var emojiData = {};\n\n  if (typeof emoji == 'string') {\n    var matches = emoji.match(COLONS_REGEX);\n\n    if (matches) {\n      emoji = matches[1];\n\n      if (matches[2]) {\n        skin = parseInt(matches[2], 10);\n      }\n    }\n\n    if (data.aliases.hasOwnProperty(emoji)) {\n      emoji = data.aliases[emoji];\n    }\n\n    if (data.emojis.hasOwnProperty(emoji)) {\n      emojiData = data.emojis[emoji];\n    } else {\n      return null;\n    }\n  } else if (emoji.id) {\n    if (data.aliases.hasOwnProperty(emoji.id)) {\n      emoji.id = data.aliases[emoji.id];\n    }\n\n    if (data.emojis.hasOwnProperty(emoji.id)) {\n      emojiData = data.emojis[emoji.id];\n      skin || (skin = emoji.skin);\n    }\n  }\n\n  if (!Object.keys(emojiData).length) {\n    emojiData = emoji;\n    emojiData.custom = true;\n\n    if (!emojiData.search) {\n      emojiData.search = buildSearch(emoji);\n    }\n  }\n\n  emojiData.emoticons || (emojiData.emoticons = []);\n  emojiData.variations || (emojiData.variations = []);\n\n  if (emojiData.skin_variations && skin > 1) {\n    emojiData = JSON.parse(JSON.stringify(emojiData));\n    var skinKey = SKINS[skin - 1],\n        variationData = emojiData.skin_variations[skinKey];\n\n    if (variationData) {\n      if (!variationData.variations && emojiData.variations) {\n        delete emojiData.variations;\n      }\n\n      if (set && (variationData[\"has_img_\".concat(set)] == undefined || variationData[\"has_img_\".concat(set)]) || !set) {\n        emojiData.skin_tone = skin;\n\n        for (var k in variationData) {\n          var v = variationData[k];\n          emojiData[k] = v;\n        }\n      }\n    }\n  }\n\n  if (emojiData.variations && emojiData.variations.length) {\n    emojiData = JSON.parse(JSON.stringify(emojiData));\n    emojiData.unified = emojiData.variations.shift();\n  }\n\n  return emojiData;\n}\n\nfunction getEmojiDataFromNative(nativeString, set, data) {\n  if (data.compressed) {\n    uncompress(data);\n  }\n\n  var skinTones = ['', '', '', '', ''];\n  var skinCodes = ['1F3FB', '1F3FC', '1F3FD', '1F3FE', '1F3FF'];\n  var skin;\n  var skinCode;\n  var baseNativeString = nativeString;\n  skinTones.forEach(function (skinTone, skinToneIndex) {\n    if (nativeString.indexOf(skinTone) > 0) {\n      skin = skinToneIndex + 2;\n      skinCode = skinCodes[skinToneIndex];\n    }\n  });\n  var emojiData;\n\n  for (var id in data.emojis) {\n    var emoji = data.emojis[id];\n    var emojiUnified = emoji.unified;\n\n    if (emoji.variations && emoji.variations.length) {\n      emojiUnified = emoji.variations.shift();\n    }\n\n    if (skin && emoji.skin_variations && emoji.skin_variations[skinCode]) {\n      emojiUnified = emoji.skin_variations[skinCode].unified;\n    }\n\n    if (unifiedToNative(emojiUnified) === baseNativeString) emojiData = emoji;\n  }\n\n  if (!emojiData) {\n    return null;\n  }\n\n  emojiData.id = emojiData.short_names[0];\n  return getSanitizedData(emojiData, skin, set, data);\n}\n\nfunction uniq(arr) {\n  return arr.reduce(function (acc, item) {\n    if (acc.indexOf(item) === -1) {\n      acc.push(item);\n    }\n\n    return acc;\n  }, []);\n}\n\nfunction intersect(a, b) {\n  var uniqA = uniq(a);\n  var uniqB = uniq(b);\n  return uniqA.filter(function (item) {\n    return uniqB.indexOf(item) >= 0;\n  });\n}\n\nfunction deepMerge(a, b) {\n  var o = {};\n\n  for (var key in a) {\n    var originalValue = a[key],\n        value = originalValue;\n\n    if (b.hasOwnProperty(key)) {\n      value = b[key];\n    }\n\n    if (_typeof(value) === 'object') {\n      value = deepMerge(originalValue, value);\n    }\n\n    o[key] = value;\n  }\n\n  return o;\n} // https://github.com/sonicdoe/measure-scrollbar\n\n\nfunction measureScrollbar() {\n  if (typeof document == 'undefined') return 0;\n  var div = document.createElement('div');\n  div.style.width = '100px';\n  div.style.height = '100px';\n  div.style.overflow = 'scroll';\n  div.style.position = 'absolute';\n  div.style.top = '-9999px';\n  document.body.appendChild(div);\n  var scrollbarWidth = div.offsetWidth - div.clientWidth;\n  document.body.removeChild(div);\n  return scrollbarWidth;\n} // Use requestIdleCallback() if available, else fall back to setTimeout().\n// Throttle so as not to run too frequently.\n\n\nfunction throttleIdleTask(func) {\n  var doIdleTask = typeof requestIdleCallback === 'function' ? requestIdleCallback : setTimeout;\n  var running = false;\n  return function throttled() {\n    if (running) {\n      return;\n    }\n\n    running = true;\n    doIdleTask(function () {\n      running = false;\n      func();\n    });\n  };\n}\n\nexport { getData, getEmojiDataFromNative, getSanitizedData, uniq, intersect, deepMerge, unifiedToNative, measureScrollbar, throttleIdleTask };","var NAMESPACE = 'emoji-mart';\nvar isLocalStorageSupported = typeof window !== 'undefined' && 'localStorage' in window;\nvar getter;\nvar setter;\n\nfunction setHandlers(handlers) {\n  handlers || (handlers = {});\n  getter = handlers.getter;\n  setter = handlers.setter;\n}\n\nfunction setNamespace(namespace) {\n  NAMESPACE = namespace;\n}\n\nfunction update(state) {\n  for (var key in state) {\n    var value = state[key];\n    set(key, value);\n  }\n}\n\nfunction set(key, value) {\n  if (setter) {\n    setter(key, value);\n  } else {\n    if (!isLocalStorageSupported) return;\n\n    try {\n      window.localStorage[\"\".concat(NAMESPACE, \".\").concat(key)] = JSON.stringify(value);\n    } catch (e) {}\n  }\n}\n\nfunction get(key) {\n  if (getter) {\n    return getter(key);\n  } else {\n    if (!isLocalStorageSupported) return;\n\n    try {\n      var value = window.localStorage[\"\".concat(NAMESPACE, \".\").concat(key)];\n\n      if (value) {\n        return JSON.parse(value);\n      }\n    } catch (e) {\n      return;\n    }\n  }\n}\n\nexport default {\n  update: update,\n  set: set,\n  get: get,\n  setNamespace: setNamespace,\n  setHandlers: setHandlers\n};","import _classCallCheck from \"@babel/runtime/helpers/classCallCheck\";\nimport _createClass from \"@babel/runtime/helpers/createClass\";\nimport { getData, getSanitizedData, intersect } from '..';\nimport { uncompress } from '../data';\nimport store from '../store';\n\nvar NimbleEmojiIndex =\n/*#__PURE__*/\nfunction () {\n  function NimbleEmojiIndex(data, set) {\n    _classCallCheck(this, NimbleEmojiIndex);\n\n    if (data.compressed) {\n      uncompress(data);\n    }\n\n    this.data = data || {};\n    this.set = set || null;\n    this.originalPool = {};\n    this.index = {};\n    this.emojis = {};\n    this.emoticons = {};\n    this.customEmojisList = [];\n    this.buildIndex();\n  }\n\n  _createClass(NimbleEmojiIndex, [{\n    key: \"buildIndex\",\n    value: function buildIndex() {\n      var _this = this;\n\n      var _loop = function _loop(emoji) {\n        var emojiData = _this.data.emojis[emoji],\n            short_names = emojiData.short_names,\n            emoticons = emojiData.emoticons,\n            skin_variations = emojiData.skin_variations,\n            id = short_names[0];\n\n        if (emoticons) {\n          emoticons.forEach(function (emoticon) {\n            if (_this.emoticons[emoticon]) {\n              return;\n            }\n\n            _this.emoticons[emoticon] = id;\n          });\n        } // If skin variations include them\n\n\n        if (skin_variations) {\n          _this.emojis[id] = {};\n\n          for (var skinTone = 1; skinTone <= 6; skinTone++) {\n            _this.emojis[id][skinTone] = getSanitizedData({\n              id: id,\n              skin: skinTone\n            }, skinTone, _this.set, _this.data);\n          }\n        } else {\n          _this.emojis[id] = getSanitizedData(id, null, _this.set, _this.data);\n        }\n\n        _this.originalPool[id] = emojiData;\n      };\n\n      for (var emoji in this.data.emojis) {\n        _loop(emoji);\n      }\n    }\n  }, {\n    key: \"clearCustomEmojis\",\n    value: function clearCustomEmojis(pool) {\n      var _this2 = this;\n\n      this.customEmojisList.forEach(function (emoji) {\n        var emojiId = emoji.id || emoji.short_names[0];\n        delete pool[emojiId];\n        delete _this2.emojis[emojiId];\n      });\n    }\n  }, {\n    key: \"addCustomToPool\",\n    value: function addCustomToPool(custom, pool) {\n      var _this3 = this;\n\n      if (this.customEmojisList.length) this.clearCustomEmojis(pool);\n      custom.forEach(function (emoji) {\n        var emojiId = emoji.id || emoji.short_names[0];\n\n        if (emojiId && !pool[emojiId]) {\n          pool[emojiId] = getData(emoji, null, null, _this3.data);\n          _this3.emojis[emojiId] = getSanitizedData(emoji, null, null, _this3.data);\n        }\n      });\n      this.customEmojisList = custom;\n      this.index = {};\n    }\n  }, {\n    key: \"search\",\n    value: function search(value) {\n      var _this4 = this;\n\n      var _ref = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {},\n          emojisToShowFilter = _ref.emojisToShowFilter,\n          maxResults = _ref.maxResults,\n          include = _ref.include,\n          exclude = _ref.exclude,\n          _ref$custom = _ref.custom,\n          custom = _ref$custom === void 0 ? [] : _ref$custom;\n\n      if (this.customEmojisList != custom) this.addCustomToPool(custom, this.originalPool);\n      var skinTone = store.get('skin') || 1;\n      maxResults || (maxResults = 75);\n      include || (include = []);\n      exclude || (exclude = []);\n      var results = null,\n          pool = this.originalPool;\n\n      if (value.length) {\n        if (value == '-' || value == '-1') {\n          return [this.emojis['-1'][skinTone]];\n        }\n\n        var values = value.toLowerCase().split(/[\\s|,|\\-|_]+/),\n            allResults = [];\n\n        if (values.length > 2) {\n          values = [values[0], values[1]];\n        }\n\n        if (include.length || exclude.length) {\n          pool = {};\n          this.data.categories.forEach(function (category) {\n            var isIncluded = include && include.length ? include.indexOf(category.id) > -1 : true;\n            var isExcluded = exclude && exclude.length ? exclude.indexOf(category.id) > -1 : false;\n\n            if (!isIncluded || isExcluded) {\n              return;\n            }\n\n            category.emojis.forEach(function (emojiId) {\n              return pool[emojiId] = _this4.data.emojis[emojiId];\n            });\n          });\n\n          if (custom.length) {\n            var customIsIncluded = include && include.length ? include.indexOf('custom') > -1 : true;\n            var customIsExcluded = exclude && exclude.length ? exclude.indexOf('custom') > -1 : false;\n\n            if (customIsIncluded && !customIsExcluded) {\n              this.addCustomToPool(custom, pool);\n            }\n          }\n        }\n\n        allResults = values.map(function (value) {\n          var aPool = pool,\n              aIndex = _this4.index,\n              length = 0;\n\n          for (var charIndex = 0; charIndex < value.length; charIndex++) {\n            var _char = value[charIndex];\n            length++;\n            aIndex[_char] || (aIndex[_char] = {});\n            aIndex = aIndex[_char];\n\n            if (!aIndex.results) {\n              (function () {\n                var scores = {};\n                aIndex.results = [];\n                aIndex.pool = {};\n\n                for (var id in aPool) {\n                  var emoji = aPool[id],\n                      search = emoji.search,\n                      sub = value.substr(0, length),\n                      subIndex = search.indexOf(sub);\n\n                  if (subIndex != -1) {\n                    var score = subIndex + 1;\n                    if (sub == id) score = 0;\n\n                    if (_this4.emojis[id] && _this4.emojis[id][skinTone]) {\n                      aIndex.results.push(_this4.emojis[id][skinTone]);\n                    } else {\n                      aIndex.results.push(_this4.emojis[id]);\n                    }\n\n                    aIndex.pool[id] = emoji;\n                    scores[id] = score;\n                  }\n                }\n\n                aIndex.results.sort(function (a, b) {\n                  var aScore = scores[a.id],\n                      bScore = scores[b.id];\n\n                  if (aScore == bScore) {\n                    return a.id.localeCompare(b.id);\n                  } else {\n                    return aScore - bScore;\n                  }\n                });\n              })();\n            }\n\n            aPool = aIndex.pool;\n          }\n\n          return aIndex.results;\n        }).filter(function (a) {\n          return a;\n        });\n\n        if (allResults.length > 1) {\n          results = intersect.apply(null, allResults);\n        } else if (allResults.length) {\n          results = allResults[0];\n        } else {\n          results = [];\n        }\n      }\n\n      if (results) {\n        if (emojisToShowFilter) {\n          results = results.filter(function (result) {\n            return emojisToShowFilter(pool[result.id]);\n          });\n        }\n\n        if (results && results.length > maxResults) {\n          results = results.slice(0, maxResults);\n        }\n      }\n\n      return results;\n    }\n  }]);\n\n  return NimbleEmojiIndex;\n}();\n\nexport { NimbleEmojiIndex as default };","import data from '../../../data/all.json';\nimport NimbleEmojiIndex from './nimble-emoji-index';\nvar emojiIndex = new NimbleEmojiIndex(data);\nvar emojis = emojiIndex.emojis,\n    emoticons = emojiIndex.emoticons;\n\nfunction search() {\n  return emojiIndex.search.apply(emojiIndex, arguments);\n}\n\nexport default {\n  search: search,\n  emojis: emojis,\n  emoticons: emoticons\n};","import store from './store';\nvar DEFAULTS = ['+1', 'grinning', 'kissing_heart', 'heart_eyes', 'laughing', 'stuck_out_tongue_winking_eye', 'sweat_smile', 'joy', 'scream', 'disappointed', 'unamused', 'weary', 'sob', 'sunglasses', 'heart', 'poop'];\nvar frequently, initialized;\nvar defaults = {};\n\nfunction init() {\n  initialized = true;\n  frequently = store.get('frequently');\n}\n\nfunction add(emoji) {\n  if (!initialized) init();\n  var id = emoji.id;\n  frequently || (frequently = defaults);\n  frequently[id] || (frequently[id] = 0);\n  frequently[id] += 1;\n  store.set('last', id);\n  store.set('frequently', frequently);\n}\n\nfunction get(perLine) {\n  if (!initialized) init();\n\n  if (!frequently) {\n    defaults = {};\n    var result = [];\n\n    for (var i = 0; i < perLine; i++) {\n      defaults[DEFAULTS[i]] = perLine - i;\n      result.push(DEFAULTS[i]);\n    }\n\n    return result;\n  }\n\n  var quantity = perLine * 4;\n  var frequentlyKeys = [];\n\n  for (var key in frequently) {\n    if (frequently.hasOwnProperty(key)) {\n      frequentlyKeys.push(key);\n    }\n  }\n\n  var sorted = frequentlyKeys.sort(function (a, b) {\n    return frequently[a] - frequently[b];\n  }).reverse();\n  var sliced = sorted.slice(0, quantity);\n  var last = store.get('last');\n\n  if (last && sliced.indexOf(last) == -1) {\n    sliced.pop();\n    sliced.push(last);\n  }\n\n  return sliced;\n}\n\nexport default {\n  add: add,\n  get: get\n};","import React from 'react';\nvar categories = {\n  activity: function activity() {\n    return React.createElement(\"svg\", {\n      xmlns: \"http://www.w3.org/2000/svg\",\n      viewBox: \"0 0 24 24\",\n      width: \"24\",\n      height: \"24\"\n    }, React.createElement(\"path\", {\n      d: \"M12 0C5.373 0 0 5.372 0 12c0 6.627 5.373 12 12 12 6.628 0 12-5.373 12-12 0-6.628-5.372-12-12-12m9.949 11H17.05c.224-2.527 1.232-4.773 1.968-6.113A9.966 9.966 0 0 1 21.949 11M13 11V2.051a9.945 9.945 0 0 1 4.432 1.564c-.858 1.491-2.156 4.22-2.392 7.385H13zm-2 0H8.961c-.238-3.165-1.536-5.894-2.393-7.385A9.95 9.95 0 0 1 11 2.051V11zm0 2v8.949a9.937 9.937 0 0 1-4.432-1.564c.857-1.492 2.155-4.221 2.393-7.385H11zm4.04 0c.236 3.164 1.534 5.893 2.392 7.385A9.92 9.92 0 0 1 13 21.949V13h2.04zM4.982 4.887C5.718 6.227 6.726 8.473 6.951 11h-4.9a9.977 9.977 0 0 1 2.931-6.113M2.051 13h4.9c-.226 2.527-1.233 4.771-1.969 6.113A9.972 9.972 0 0 1 2.051 13m16.967 6.113c-.735-1.342-1.744-3.586-1.968-6.113h4.899a9.961 9.961 0 0 1-2.931 6.113\"\n    }));\n  },\n  custom: function custom() {\n    return React.createElement(\"svg\", {\n      xmlns: \"http://www.w3.org/2000/svg\",\n      viewBox: \"0 0 24 24\",\n      width: \"24\",\n      height: \"24\"\n    }, React.createElement(\"g\", {\n      transform: \"translate(2.000000, 1.000000)\"\n    }, React.createElement(\"rect\", {\n      id: \"Rectangle\",\n      x: \"8\",\n      y: \"0\",\n      width: \"3\",\n      height: \"21\",\n      rx: \"1.5\"\n    }), React.createElement(\"rect\", {\n      id: \"Rectangle\",\n      transform: \"translate(9.843, 10.549) rotate(60) translate(-9.843, -10.549) \",\n      x: \"8.343\",\n      y: \"0.049\",\n      width: \"3\",\n      height: \"21\",\n      rx: \"1.5\"\n    }), React.createElement(\"rect\", {\n      id: \"Rectangle\",\n      transform: \"translate(9.843, 10.549) rotate(-60) translate(-9.843, -10.549) \",\n      x: \"8.343\",\n      y: \"0.049\",\n      width: \"3\",\n      height: \"21\",\n      rx: \"1.5\"\n    })));\n  },\n  flags: function flags() {\n    return React.createElement(\"svg\", {\n      xmlns: \"http://www.w3.org/2000/svg\",\n      viewBox: \"0 0 24 24\",\n      width: \"24\",\n      height: \"24\"\n    }, React.createElement(\"path\", {\n      d: \"M0 0l6.084 24H8L1.916 0zM21 5h-4l-1-4H4l3 12h3l1 4h13L21 5zM6.563 3h7.875l2 8H8.563l-2-8zm8.832 10l-2.856 1.904L12.063 13h3.332zM19 13l-1.5-6h1.938l2 8H16l3-2z\"\n    }));\n  },\n  foods: function foods() {\n    return React.createElement(\"svg\", {\n      xmlns: \"http://www.w3.org/2000/svg\",\n      viewBox: \"0 0 24 24\",\n      width: \"24\",\n      height: \"24\"\n    }, React.createElement(\"path\", {\n      d: \"M17 4.978c-1.838 0-2.876.396-3.68.934.513-1.172 1.768-2.934 4.68-2.934a1 1 0 0 0 0-2c-2.921 0-4.629 1.365-5.547 2.512-.064.078-.119.162-.18.244C11.73 1.838 10.798.023 9.207.023 8.579.022 7.85.306 7 .978 5.027 2.54 5.329 3.902 6.492 4.999 3.609 5.222 0 7.352 0 12.969c0 4.582 4.961 11.009 9 11.009 1.975 0 2.371-.486 3-1 .629.514 1.025 1 3 1 4.039 0 9-6.418 9-11 0-5.953-4.055-8-7-8M8.242 2.546c.641-.508.943-.523.965-.523.426.169.975 1.405 1.357 3.055-1.527-.629-2.741-1.352-2.98-1.846.059-.112.241-.356.658-.686M15 21.978c-1.08 0-1.21-.109-1.559-.402l-.176-.146c-.367-.302-.816-.452-1.266-.452s-.898.15-1.266.452l-.176.146c-.347.292-.477.402-1.557.402-2.813 0-7-5.389-7-9.009 0-5.823 4.488-5.991 5-5.991 1.939 0 2.484.471 3.387 1.251l.323.276a1.995 1.995 0 0 0 2.58 0l.323-.276c.902-.78 1.447-1.251 3.387-1.251.512 0 5 .168 5 6 0 3.617-4.187 9-7 9\"\n    }));\n  },\n  nature: function nature() {\n    return React.createElement(\"svg\", {\n      xmlns: \"http://www.w3.org/2000/svg\",\n      viewBox: \"0 0 24 24\",\n      width: \"24\",\n      height: \"24\"\n    }, React.createElement(\"path\", {\n      d: \"M15.5 8a1.5 1.5 0 1 0 .001 3.001A1.5 1.5 0 0 0 15.5 8M8.5 8a1.5 1.5 0 1 0 .001 3.001A1.5 1.5 0 0 0 8.5 8\"\n    }), React.createElement(\"path\", {\n      d: \"M18.933 0h-.027c-.97 0-2.138.787-3.018 1.497-1.274-.374-2.612-.51-3.887-.51-1.285 0-2.616.133-3.874.517C7.245.79 6.069 0 5.093 0h-.027C3.352 0 .07 2.67.002 7.026c-.039 2.479.276 4.238 1.04 5.013.254.258.882.677 1.295.882.191 3.177.922 5.238 2.536 6.38.897.637 2.187.949 3.2 1.102C8.04 20.6 8 20.795 8 21c0 1.773 2.35 3 4 3 1.648 0 4-1.227 4-3 0-.201-.038-.393-.072-.586 2.573-.385 5.435-1.877 5.925-7.587.396-.22.887-.568 1.104-.788.763-.774 1.079-2.534 1.04-5.013C23.929 2.67 20.646 0 18.933 0M3.223 9.135c-.237.281-.837 1.155-.884 1.238-.15-.41-.368-1.349-.337-3.291.051-3.281 2.478-4.972 3.091-5.031.256.015.731.27 1.265.646-1.11 1.171-2.275 2.915-2.352 5.125-.133.546-.398.858-.783 1.313M12 22c-.901 0-1.954-.693-2-1 0-.654.475-1.236 1-1.602V20a1 1 0 1 0 2 0v-.602c.524.365 1 .947 1 1.602-.046.307-1.099 1-2 1m3-3.48v.02a4.752 4.752 0 0 0-1.262-1.02c1.092-.516 2.239-1.334 2.239-2.217 0-1.842-1.781-2.195-3.977-2.195-2.196 0-3.978.354-3.978 2.195 0 .883 1.148 1.701 2.238 2.217A4.8 4.8 0 0 0 9 18.539v-.025c-1-.076-2.182-.281-2.973-.842-1.301-.92-1.838-3.045-1.853-6.478l.023-.041c.496-.826 1.49-1.45 1.804-3.102 0-2.047 1.357-3.631 2.362-4.522C9.37 3.178 10.555 3 11.948 3c1.447 0 2.685.192 3.733.57 1 .9 2.316 2.465 2.316 4.48.313 1.651 1.307 2.275 1.803 3.102.035.058.068.117.102.178-.059 5.967-1.949 7.01-4.902 7.19m6.628-8.202c-.037-.065-.074-.13-.113-.195a7.587 7.587 0 0 0-.739-.987c-.385-.455-.648-.768-.782-1.313-.076-2.209-1.241-3.954-2.353-5.124.531-.376 1.004-.63 1.261-.647.636.071 3.044 1.764 3.096 5.031.027 1.81-.347 3.218-.37 3.235\"\n    }));\n  },\n  objects: function objects() {\n    return React.createElement(\"svg\", {\n      xmlns: \"http://www.w3.org/2000/svg\",\n      viewBox: \"0 0 24 24\",\n      width: \"24\",\n      height: \"24\"\n    }, React.createElement(\"path\", {\n      d: \"M12 0a9 9 0 0 0-5 16.482V21s2.035 3 5 3 5-3 5-3v-4.518A9 9 0 0 0 12 0zm0 2c3.86 0 7 3.141 7 7s-3.14 7-7 7-7-3.141-7-7 3.14-7 7-7zM9 17.477c.94.332 1.946.523 3 .523s2.06-.19 3-.523v.834c-.91.436-1.925.689-3 .689a6.924 6.924 0 0 1-3-.69v-.833zm.236 3.07A8.854 8.854 0 0 0 12 21c.965 0 1.888-.167 2.758-.451C14.155 21.173 13.153 22 12 22c-1.102 0-2.117-.789-2.764-1.453z\"\n    }), React.createElement(\"path\", {\n      d: \"M14.745 12.449h-.004c-.852-.024-1.188-.858-1.577-1.824-.421-1.061-.703-1.561-1.182-1.566h-.009c-.481 0-.783.497-1.235 1.537-.436.982-.801 1.811-1.636 1.791l-.276-.043c-.565-.171-.853-.691-1.284-1.794-.125-.313-.202-.632-.27-.913-.051-.213-.127-.53-.195-.634C7.067 9.004 7.039 9 6.99 9A1 1 0 0 1 7 7h.01c1.662.017 2.015 1.373 2.198 2.134.486-.981 1.304-2.058 2.797-2.075 1.531.018 2.28 1.153 2.731 2.141l.002-.008C14.944 8.424 15.327 7 16.979 7h.032A1 1 0 1 1 17 9h-.011c-.149.076-.256.474-.319.709a6.484 6.484 0 0 1-.311.951c-.429.973-.79 1.789-1.614 1.789\"\n    }));\n  },\n  people: function people() {\n    return React.createElement(\"svg\", {\n      xmlns: \"http://www.w3.org/2000/svg\",\n      viewBox: \"0 0 24 24\",\n      width: \"24\",\n      height: \"24\"\n    }, React.createElement(\"path\", {\n      d: \"M12 0C5.373 0 0 5.373 0 12s5.373 12 12 12 12-5.373 12-12S18.627 0 12 0m0 22C6.486 22 2 17.514 2 12S6.486 2 12 2s10 4.486 10 10-4.486 10-10 10\"\n    }), React.createElement(\"path\", {\n      d: \"M8 7a2 2 0 1 0-.001 3.999A2 2 0 0 0 8 7M16 7a2 2 0 1 0-.001 3.999A2 2 0 0 0 16 7M15.232 15c-.693 1.195-1.87 2-3.349 2-1.477 0-2.655-.805-3.347-2H15m3-2H6a6 6 0 1 0 12 0\"\n    }));\n  },\n  places: function places() {\n    return React.createElement(\"svg\", {\n      xmlns: \"http://www.w3.org/2000/svg\",\n      viewBox: \"0 0 24 24\",\n      width: \"24\",\n      height: \"24\"\n    }, React.createElement(\"path\", {\n      d: \"M6.5 12C5.122 12 4 13.121 4 14.5S5.122 17 6.5 17 9 15.879 9 14.5 7.878 12 6.5 12m0 3c-.275 0-.5-.225-.5-.5s.225-.5.5-.5.5.225.5.5-.225.5-.5.5M17.5 12c-1.378 0-2.5 1.121-2.5 2.5s1.122 2.5 2.5 2.5 2.5-1.121 2.5-2.5-1.122-2.5-2.5-2.5m0 3c-.275 0-.5-.225-.5-.5s.225-.5.5-.5.5.225.5.5-.225.5-.5.5\"\n    }), React.createElement(\"path\", {\n      d: \"M22.482 9.494l-1.039-.346L21.4 9h.6c.552 0 1-.439 1-.992 0-.006-.003-.008-.003-.008H23c0-1-.889-2-1.984-2h-.642l-.731-1.717C19.262 3.012 18.091 2 16.764 2H7.236C5.909 2 4.738 3.012 4.357 4.283L3.626 6h-.642C1.889 6 1 7 1 8h.003S1 8.002 1 8.008C1 8.561 1.448 9 2 9h.6l-.043.148-1.039.346a2.001 2.001 0 0 0-1.359 2.097l.751 7.508a1 1 0 0 0 .994.901H3v1c0 1.103.896 2 2 2h2c1.104 0 2-.897 2-2v-1h6v1c0 1.103.896 2 2 2h2c1.104 0 2-.897 2-2v-1h1.096a.999.999 0 0 0 .994-.901l.751-7.508a2.001 2.001 0 0 0-1.359-2.097M6.273 4.857C6.402 4.43 6.788 4 7.236 4h9.527c.448 0 .834.43.963.857L19.313 9H4.688l1.585-4.143zM7 21H5v-1h2v1zm12 0h-2v-1h2v1zm2.189-3H2.811l-.662-6.607L3 11h18l.852.393L21.189 18z\"\n    }));\n  },\n  recent: function recent() {\n    return React.createElement(\"svg\", {\n      xmlns: \"http://www.w3.org/2000/svg\",\n      viewBox: \"0 0 24 24\",\n      width: \"24\",\n      height: \"24\"\n    }, React.createElement(\"path\", {\n      d: \"M13 4h-2l-.001 7H9v2h2v2h2v-2h4v-2h-4z\"\n    }), React.createElement(\"path\", {\n      d: \"M12 0C5.373 0 0 5.373 0 12s5.373 12 12 12 12-5.373 12-12S18.627 0 12 0m0 22C6.486 22 2 17.514 2 12S6.486 2 12 2s10 4.486 10 10-4.486 10-10 10\"\n    }));\n  },\n  symbols: function symbols() {\n    return React.createElement(\"svg\", {\n      xmlns: \"http://www.w3.org/2000/svg\",\n      viewBox: \"0 0 24 24\",\n      width: \"24\",\n      height: \"24\"\n    }, React.createElement(\"path\", {\n      d: \"M0 0h11v2H0zM4 11h3V6h4V4H0v2h4zM15.5 17c1.381 0 2.5-1.116 2.5-2.493s-1.119-2.493-2.5-2.493S13 13.13 13 14.507 14.119 17 15.5 17m0-2.986c.276 0 .5.222.5.493 0 .272-.224.493-.5.493s-.5-.221-.5-.493.224-.493.5-.493M21.5 19.014c-1.381 0-2.5 1.116-2.5 2.493S20.119 24 21.5 24s2.5-1.116 2.5-2.493-1.119-2.493-2.5-2.493m0 2.986a.497.497 0 0 1-.5-.493c0-.271.224-.493.5-.493s.5.222.5.493a.497.497 0 0 1-.5.493M22 13l-9 9 1.513 1.5 8.99-9.009zM17 11c2.209 0 4-1.119 4-2.5V2s.985-.161 1.498.949C23.01 4.055 23 6 23 6s1-1.119 1-3.135C24-.02 21 0 21 0h-2v6.347A5.853 5.853 0 0 0 17 6c-2.209 0-4 1.119-4 2.5s1.791 2.5 4 2.5M10.297 20.482l-1.475-1.585a47.54 47.54 0 0 1-1.442 1.129c-.307-.288-.989-1.016-2.045-2.183.902-.836 1.479-1.466 1.729-1.892s.376-.871.376-1.336c0-.592-.273-1.178-.818-1.759-.546-.581-1.329-.871-2.349-.871-1.008 0-1.79.293-2.344.879-.556.587-.832 1.181-.832 1.784 0 .813.419 1.748 1.256 2.805-.847.614-1.444 1.208-1.794 1.784a3.465 3.465 0 0 0-.523 1.833c0 .857.308 1.56.924 2.107.616.549 1.423.823 2.42.823 1.173 0 2.444-.379 3.813-1.137L8.235 24h2.819l-2.09-2.383 1.333-1.135zm-6.736-6.389a1.02 1.02 0 0 1 .73-.286c.31 0 .559.085.747.254a.849.849 0 0 1 .283.659c0 .518-.419 1.112-1.257 1.784-.536-.651-.805-1.231-.805-1.742a.901.901 0 0 1 .302-.669M3.74 22c-.427 0-.778-.116-1.057-.349-.279-.232-.418-.487-.418-.766 0-.594.509-1.288 1.527-2.083.968 1.134 1.717 1.946 2.248 2.438-.921.507-1.686.76-2.3.76\"\n    }));\n  }\n};\nvar search = {\n  search: function search() {\n    return React.createElement(\"svg\", {\n      xmlns: \"http://www.w3.org/2000/svg\",\n      width: \"13\",\n      height: \"13\",\n      viewBox: \"0 0 20 20\",\n      opacity: \"0.5\"\n    }, React.createElement(\"path\", {\n      d: \"M12.9 14.32a8 8 0 1 1 1.41-1.41l5.35 5.33-1.42 1.42-5.33-5.34zM8 14A6 6 0 1 0 8 2a6 6 0 0 0 0 12z\"\n    }));\n  },\n  \"delete\": function _delete() {\n    return React.createElement(\"svg\", {\n      xmlns: \"http://www.w3.org/2000/svg\",\n      width: \"13\",\n      height: \"13\",\n      viewBox: \"0 0 20 20\",\n      opacity: \"0.5\"\n    }, React.createElement(\"path\", {\n      d: \"M10 8.586L2.929 1.515 1.515 2.929 8.586 10l-7.071 7.071 1.414 1.414L10 11.414l7.071 7.071 1.414-1.414L11.414 10l7.071-7.071-1.414-1.414L10 8.586z\"\n    }));\n  }\n};\nexport { categories, search };","import PropTypes from 'prop-types';\nvar EmojiPropTypes = {\n  data: PropTypes.object.isRequired,\n  onOver: PropTypes.func,\n  onLeave: PropTypes.func,\n  onClick: PropTypes.func,\n  fallback: PropTypes.func,\n  backgroundImageFn: PropTypes.func,\n  \"native\": PropTypes.bool,\n  forceSize: PropTypes.bool,\n  tooltip: PropTypes.bool,\n  useButton: PropTypes.bool,\n  skin: PropTypes.oneOf([1, 2, 3, 4, 5, 6]),\n  sheetSize: PropTypes.oneOf([16, 20, 32, 64]),\n  sheetColumns: PropTypes.number,\n  sheetRows: PropTypes.number,\n  set: PropTypes.oneOf(['apple', 'google', 'twitter', 'facebook']),\n  size: PropTypes.number.isRequired,\n  emoji: PropTypes.oneOfType([PropTypes.string, PropTypes.object]).isRequired\n};\nvar PickerPropTypes = {\n  onClick: PropTypes.func,\n  onSelect: PropTypes.func,\n  onSkinChange: PropTypes.func,\n  perLine: PropTypes.number,\n  emojiSize: PropTypes.number,\n  i18n: PropTypes.object,\n  style: PropTypes.object,\n  title: PropTypes.string,\n  emoji: PropTypes.string,\n  color: PropTypes.string,\n  set: EmojiPropTypes.set,\n  skin: EmojiPropTypes.skin,\n  \"native\": PropTypes.bool,\n  backgroundImageFn: EmojiPropTypes.backgroundImageFn,\n  sheetSize: EmojiPropTypes.sheetSize,\n  emojisToShowFilter: PropTypes.func,\n  showPreview: PropTypes.bool,\n  showSkinTones: PropTypes.bool,\n  emojiTooltip: EmojiPropTypes.tooltip,\n  useButton: EmojiPropTypes.useButton,\n  theme: PropTypes.oneOf(['auto', 'light', 'dark']),\n  include: PropTypes.arrayOf(PropTypes.string),\n  exclude: PropTypes.arrayOf(PropTypes.string),\n  recent: PropTypes.arrayOf(PropTypes.string),\n  autoFocus: PropTypes.bool,\n  enableFrequentEmojiSort: PropTypes.bool,\n  custom: PropTypes.arrayOf(PropTypes.shape({\n    name: PropTypes.string.isRequired,\n    short_names: PropTypes.arrayOf(PropTypes.string).isRequired,\n    emoticons: PropTypes.arrayOf(PropTypes.string),\n    keywords: PropTypes.arrayOf(PropTypes.string),\n    imageUrl: PropTypes.string,\n    spriteUrl: PropTypes.string,\n    sheet_x: PropTypes.number,\n    sheet_y: PropTypes.number,\n    size: PropTypes.number,\n    sheetColumns: PropTypes.number,\n    sheetRows: PropTypes.number\n  })),\n  skinEmoji: PropTypes.string,\n  notFound: PropTypes.func,\n  notFoundEmoji: PropTypes.string,\n  icons: PropTypes.object\n};\nexport { EmojiPropTypes, PickerPropTypes };","import _classCallCheck from \"@babel/runtime/helpers/classCallCheck\";\nimport _createClass from \"@babel/runtime/helpers/createClass\";\nimport _possibleConstructorReturn from \"@babel/runtime/helpers/possibleConstructorReturn\";\nimport _getPrototypeOf from \"@babel/runtime/helpers/getPrototypeOf\";\nimport _assertThisInitialized from \"@babel/runtime/helpers/assertThisInitialized\";\nimport _inherits from \"@babel/runtime/helpers/inherits\";\nimport React from 'react';\nimport PropTypes from 'prop-types';\n\nvar Anchors =\n/*#__PURE__*/\nfunction (_React$PureComponent) {\n  _inherits(Anchors, _React$PureComponent);\n\n  function Anchors(props) {\n    var _this;\n\n    _classCallCheck(this, Anchors);\n\n    _this = _possibleConstructorReturn(this, _getPrototypeOf(Anchors).call(this, props));\n    var defaultCategory = props.categories.filter(function (category) {\n      return category.first;\n    })[0];\n    _this.state = {\n      selected: defaultCategory.name\n    };\n    _this.handleClick = _this.handleClick.bind(_assertThisInitialized(_this));\n    return _this;\n  }\n\n  _createClass(Anchors, [{\n    key: \"handleClick\",\n    value: function handleClick(e) {\n      var index = e.currentTarget.getAttribute('data-index');\n      var _this$props = this.props,\n          categories = _this$props.categories,\n          onAnchorClick = _this$props.onAnchorClick;\n      onAnchorClick(categories[index], index);\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      var _this2 = this;\n\n      var _this$props2 = this.props,\n          categories = _this$props2.categories,\n          color = _this$props2.color,\n          i18n = _this$props2.i18n,\n          icons = _this$props2.icons,\n          selected = this.state.selected;\n      return React.createElement(\"nav\", {\n        className: \"emoji-mart-anchors\",\n        \"aria-label\": i18n.categorieslabel\n      }, categories.map(function (category, i) {\n        var id = category.id,\n            name = category.name,\n            anchor = category.anchor,\n            isSelected = name == selected;\n\n        if (anchor === false) {\n          return null;\n        }\n\n        var iconId = id.startsWith('custom-') ? 'custom' : id;\n        return React.createElement(\"button\", {\n          key: id,\n          \"aria-label\": i18n.categories[id],\n          title: i18n.categories[id],\n          \"data-index\": i,\n          type: 'button',\n          onClick: _this2.handleClick,\n          className: \"emoji-mart-anchor \".concat(isSelected ? 'emoji-mart-anchor-selected' : ''),\n          style: {\n            color: isSelected ? color : null\n          }\n        }, React.createElement(\"div\", {\n          className: \"emoji-mart-anchor-icon\"\n        }, icons.categories[iconId]()), React.createElement(\"span\", {\n          className: \"emoji-mart-anchor-bar\",\n          style: {\n            backgroundColor: color\n          }\n        }));\n      }));\n    }\n  }]);\n\n  return Anchors;\n}(React.PureComponent);\n\nexport { Anchors as default };\nAnchors.propTypes\n/* remove-proptypes */\n= {\n  categories: PropTypes.array,\n  onAnchorClick: PropTypes.func,\n  icons: PropTypes.object\n};\nAnchors.defaultProps = {\n  categories: [],\n  onAnchorClick: function onAnchorClick() {},\n  icons: {}\n};","var EmojiDefaultProps = {\n  skin: 1,\n  set: 'apple',\n  sheetSize: 64,\n  sheetColumns: 57,\n  sheetRows: 57,\n  \"native\": false,\n  forceSize: false,\n  tooltip: false,\n  useButton: true,\n  backgroundImageFn: function backgroundImageFn(set, sheetSize) {\n    return \"https://unpkg.com/emoji-datasource-\".concat(set, \"@\").concat(\"5.0.1\", \"/img/\").concat(set, \"/sheets-256/\").concat(sheetSize, \".png\");\n  }\n};\nvar PickerDefaultProps = {\n  onClick: function onClick() {},\n  onSelect: function onSelect() {},\n  onSkinChange: function onSkinChange() {},\n  emojiSize: 24,\n  perLine: 9,\n  i18n: {},\n  style: {},\n  title: 'Emoji Mart',\n  emoji: 'department_store',\n  color: '#ae65c5',\n  set: EmojiDefaultProps.set,\n  theme: 'light',\n  skin: null,\n  defaultSkin: EmojiDefaultProps.skin,\n  \"native\": EmojiDefaultProps[\"native\"],\n  sheetSize: EmojiDefaultProps.sheetSize,\n  backgroundImageFn: EmojiDefaultProps.backgroundImageFn,\n  emojisToShowFilter: null,\n  showPreview: true,\n  showSkinTones: true,\n  emojiTooltip: EmojiDefaultProps.tooltip,\n  useButton: EmojiDefaultProps.useButton,\n  autoFocus: false,\n  enableFrequentEmojiSort: false,\n  custom: [],\n  skinEmoji: '',\n  notFound: function notFound() {},\n  notFoundEmoji: 'sleuth_or_spy',\n  icons: {}\n};\nexport { PickerDefaultProps, EmojiDefaultProps };","import _extends from \"@babel/runtime/helpers/extends\";\nimport _defineProperty from \"@babel/runtime/helpers/defineProperty\";\n\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(Object(source), true).forEach(function (key) { _defineProperty(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }\n\nimport React from 'react';\nimport PropTypes from 'prop-types';\nimport { getData, getSanitizedData, unifiedToNative } from '../../utils';\nimport { uncompress } from '../../utils/data';\nimport { EmojiPropTypes } from '../../utils/shared-props';\nimport { EmojiDefaultProps } from '../../utils/shared-default-props';\n\nvar _getData = function _getData(props) {\n  var emoji = props.emoji,\n      skin = props.skin,\n      set = props.set,\n      data = props.data;\n  return getData(emoji, skin, set, data);\n};\n\nvar _getPosition = function _getPosition(props) {\n  var _getData2 = _getData(props),\n      sheet_x = _getData2.sheet_x,\n      sheet_y = _getData2.sheet_y,\n      multiplyX = 100 / (props.sheetColumns - 1),\n      multiplyY = 100 / (props.sheetRows - 1);\n\n  return \"\".concat(multiplyX * sheet_x, \"% \").concat(multiplyY * sheet_y, \"%\");\n};\n\nvar _getSanitizedData = function _getSanitizedData(props) {\n  var emoji = props.emoji,\n      skin = props.skin,\n      set = props.set,\n      data = props.data;\n  return getSanitizedData(emoji, skin, set, data);\n};\n\nvar _handleClick = function _handleClick(e, props) {\n  if (!props.onClick) {\n    return;\n  }\n\n  var onClick = props.onClick,\n      emoji = _getSanitizedData(props);\n\n  onClick(emoji, e);\n};\n\nvar _handleOver = function _handleOver(e, props) {\n  if (!props.onOver) {\n    return;\n  }\n\n  var onOver = props.onOver,\n      emoji = _getSanitizedData(props);\n\n  onOver(emoji, e);\n};\n\nvar _handleLeave = function _handleLeave(e, props) {\n  if (!props.onLeave) {\n    return;\n  }\n\n  var onLeave = props.onLeave,\n      emoji = _getSanitizedData(props);\n\n  onLeave(emoji, e);\n};\n\nvar _isNumeric = function _isNumeric(value) {\n  return !isNaN(value - parseFloat(value));\n};\n\nvar _convertStyleToCSS = function _convertStyleToCSS(style) {\n  var div = document.createElement('div');\n\n  for (var key in style) {\n    var value = style[key];\n\n    if (_isNumeric(value)) {\n      value += 'px';\n    }\n\n    div.style[key] = value;\n  }\n\n  return div.getAttribute('style');\n};\n\nvar NimbleEmoji = function NimbleEmoji(props) {\n  if (props.data.compressed) {\n    uncompress(props.data);\n  }\n\n  for (var k in NimbleEmoji.defaultProps) {\n    if (props[k] == undefined && NimbleEmoji.defaultProps[k] != undefined) {\n      props[k] = NimbleEmoji.defaultProps[k];\n    }\n  }\n\n  var data = _getData(props);\n\n  if (!data) {\n    if (props.fallback) {\n      return props.fallback(null, props);\n    } else {\n      return null;\n    }\n  }\n\n  var unified = data.unified,\n      custom = data.custom,\n      short_names = data.short_names,\n      imageUrl = data.imageUrl,\n      style = {},\n      children = props.children,\n      className = 'emoji-mart-emoji',\n      nativeEmoji = unified && unifiedToNative(unified),\n      label = [nativeEmoji].concat(short_names).filter(Boolean).join(', '),\n      title = null;\n\n  if (!unified && !custom) {\n    if (props.fallback) {\n      return props.fallback(data, props);\n    } else {\n      return null;\n    }\n  }\n\n  if (props.tooltip) {\n    title = short_names[0];\n  }\n\n  if (props[\"native\"] && unified) {\n    className += ' emoji-mart-emoji-native';\n    style = {\n      fontSize: props.size\n    };\n    children = nativeEmoji;\n\n    if (props.forceSize) {\n      style.display = 'inline-block';\n      style.width = props.size;\n      style.height = props.size;\n      style.wordBreak = 'keep-all';\n    }\n  } else if (custom) {\n    className += ' emoji-mart-emoji-custom';\n    style = {\n      width: props.size,\n      height: props.size,\n      display: 'inline-block'\n    };\n\n    if (data.spriteUrl) {\n      style = _objectSpread({}, style, {\n        backgroundImage: \"url(\".concat(data.spriteUrl, \")\"),\n        backgroundSize: \"\".concat(100 * props.sheetColumns, \"% \").concat(100 * props.sheetRows, \"%\"),\n        backgroundPosition: _getPosition(props)\n      });\n    } else {\n      style = _objectSpread({}, style, {\n        backgroundImage: \"url(\".concat(imageUrl, \")\"),\n        backgroundSize: 'contain',\n        backgroundRepeat: 'no-repeat',\n        backgroundPosition: 'center'\n      });\n    }\n  } else {\n    var setHasEmoji = data[\"has_img_\".concat(props.set)] == undefined || data[\"has_img_\".concat(props.set)];\n\n    if (!setHasEmoji) {\n      if (props.fallback) {\n        return props.fallback(data, props);\n      } else {\n        return null;\n      }\n    } else {\n      style = {\n        width: props.size,\n        height: props.size,\n        display: 'inline-block',\n        backgroundImage: \"url(\".concat(props.backgroundImageFn(props.set, props.sheetSize), \")\"),\n        backgroundSize: \"\".concat(100 * props.sheetColumns, \"% \").concat(100 * props.sheetRows, \"%\"),\n        backgroundPosition: _getPosition(props)\n      };\n    }\n  }\n\n  var Tag = {\n    name: 'span',\n    props: {}\n  };\n\n  if (props.onClick && props.useButton) {\n    Tag.name = 'button';\n    Tag.props = {\n      type: 'button'\n    };\n  }\n\n  if (props.html) {\n    style = _convertStyleToCSS(style);\n    return \"<\".concat(Tag.name, \" style='\").concat(style, \"' aria-label='\").concat(label, \"' \").concat(title ? \"title='\".concat(title, \"'\") : '', \" class='\").concat(className, \"'>\").concat(children || '', \"</\").concat(Tag.name, \">\");\n  } else {\n    return React.createElement(Tag.name, _extends({\n      onClick: function onClick(e) {\n        return _handleClick(e, props);\n      },\n      onMouseEnter: function onMouseEnter(e) {\n        return _handleOver(e, props);\n      },\n      onMouseLeave: function onMouseLeave(e) {\n        return _handleLeave(e, props);\n      },\n      \"aria-label\": label,\n      title: title,\n      className: className\n    }, Tag.props), React.createElement(\"span\", {\n      style: style\n    }, children));\n  }\n};\n\nNimbleEmoji.propTypes\n/* remove-proptypes */\n= _objectSpread({}, EmojiPropTypes, {\n  data: PropTypes.object.isRequired\n});\nNimbleEmoji.defaultProps = EmojiDefaultProps;\nexport default NimbleEmoji;","import _defineProperty from \"@babel/runtime/helpers/defineProperty\";\nimport _classCallCheck from \"@babel/runtime/helpers/classCallCheck\";\nimport _createClass from \"@babel/runtime/helpers/createClass\";\nimport _possibleConstructorReturn from \"@babel/runtime/helpers/possibleConstructorReturn\";\nimport _getPrototypeOf from \"@babel/runtime/helpers/getPrototypeOf\";\nimport _inherits from \"@babel/runtime/helpers/inherits\";\n\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(Object(source), true).forEach(function (key) { _defineProperty(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }\n\nimport React from 'react';\nimport PropTypes from 'prop-types';\nimport NimbleEmoji from './emoji/nimble-emoji';\n\nvar NotFound =\n/*#__PURE__*/\nfunction (_React$PureComponent) {\n  _inherits(NotFound, _React$PureComponent);\n\n  function NotFound() {\n    _classCallCheck(this, NotFound);\n\n    return _possibleConstructorReturn(this, _getPrototypeOf(NotFound).apply(this, arguments));\n  }\n\n  _createClass(NotFound, [{\n    key: \"render\",\n    value: function render() {\n      var _this$props = this.props,\n          data = _this$props.data,\n          emojiProps = _this$props.emojiProps,\n          i18n = _this$props.i18n,\n          notFound = _this$props.notFound,\n          notFoundEmoji = _this$props.notFoundEmoji;\n      var component = notFound && notFound() || React.createElement(\"div\", {\n        className: \"emoji-mart-no-results\"\n      }, NimbleEmoji(_objectSpread({\n        data: data\n      }, emojiProps, {\n        size: 38,\n        emoji: notFoundEmoji,\n        onOver: null,\n        onLeave: null,\n        onClick: null\n      })), React.createElement(\"div\", {\n        className: \"emoji-mart-no-results-label\"\n      }, i18n.notfound));\n      return component;\n    }\n  }]);\n\n  return NotFound;\n}(React.PureComponent);\n\nexport { NotFound as default };\nNotFound.propTypes\n/* remove-proptypes */\n= {\n  notFound: PropTypes.func.isRequired,\n  emojiProps: PropTypes.object.isRequired\n};","import _defineProperty from \"@babel/runtime/helpers/defineProperty\";\nimport _classCallCheck from \"@babel/runtime/helpers/classCallCheck\";\nimport _createClass from \"@babel/runtime/helpers/createClass\";\nimport _possibleConstructorReturn from \"@babel/runtime/helpers/possibleConstructorReturn\";\nimport _getPrototypeOf from \"@babel/runtime/helpers/getPrototypeOf\";\nimport _assertThisInitialized from \"@babel/runtime/helpers/assertThisInitialized\";\nimport _inherits from \"@babel/runtime/helpers/inherits\";\n\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(Object(source), true).forEach(function (key) { _defineProperty(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }\n\nimport React from 'react';\nimport PropTypes from 'prop-types';\nimport frequently from '../utils/frequently';\nimport { getData } from '../utils';\nimport NimbleEmoji from './emoji/nimble-emoji';\nimport NotFound from './not-found';\n\nvar Category =\n/*#__PURE__*/\nfunction (_React$Component) {\n  _inherits(Category, _React$Component);\n\n  function Category(props) {\n    var _this;\n\n    _classCallCheck(this, Category);\n\n    _this = _possibleConstructorReturn(this, _getPrototypeOf(Category).call(this, props));\n    _this.data = props.data;\n    _this.setContainerRef = _this.setContainerRef.bind(_assertThisInitialized(_this));\n    _this.setLabelRef = _this.setLabelRef.bind(_assertThisInitialized(_this));\n    return _this;\n  }\n\n  _createClass(Category, [{\n    key: \"componentDidMount\",\n    value: function componentDidMount() {\n      this.margin = 0;\n      this.minMargin = 0;\n      this.memoizeSize();\n    }\n  }, {\n    key: \"shouldComponentUpdate\",\n    value: function shouldComponentUpdate(nextProps, nextState) {\n      var _this$props = this.props,\n          name = _this$props.name,\n          perLine = _this$props.perLine,\n          _native = _this$props[\"native\"],\n          hasStickyPosition = _this$props.hasStickyPosition,\n          emojis = _this$props.emojis,\n          emojiProps = _this$props.emojiProps,\n          skin = emojiProps.skin,\n          size = emojiProps.size,\n          set = emojiProps.set,\n          nextPerLine = nextProps.perLine,\n          nextNative = nextProps[\"native\"],\n          nextHasStickyPosition = nextProps.hasStickyPosition,\n          nextEmojis = nextProps.emojis,\n          nextEmojiProps = nextProps.emojiProps,\n          nextSkin = nextEmojiProps.skin,\n          nextSize = nextEmojiProps.size,\n          nextSet = nextEmojiProps.set,\n          shouldUpdate = false;\n\n      if (name == 'Recent' && perLine != nextPerLine) {\n        shouldUpdate = true;\n      }\n\n      if (name == 'Search') {\n        shouldUpdate = !(emojis == nextEmojis);\n      }\n\n      if (skin != nextSkin || size != nextSize || _native != nextNative || set != nextSet || hasStickyPosition != nextHasStickyPosition) {\n        shouldUpdate = true;\n      }\n\n      return shouldUpdate;\n    }\n  }, {\n    key: \"memoizeSize\",\n    value: function memoizeSize() {\n      if (!this.container) {\n        // probably this is a test environment, e.g. jest\n        this.top = 0;\n        this.maxMargin = 0;\n        return;\n      }\n\n      var parent = this.container.parentElement;\n\n      var _this$container$getBo = this.container.getBoundingClientRect(),\n          top = _this$container$getBo.top,\n          height = _this$container$getBo.height;\n\n      var _parent$getBoundingCl = parent.getBoundingClientRect(),\n          parentTop = _parent$getBoundingCl.top;\n\n      var _this$label$getBoundi = this.label.getBoundingClientRect(),\n          labelHeight = _this$label$getBoundi.height;\n\n      this.top = top - parentTop + parent.scrollTop;\n\n      if (height == 0) {\n        this.maxMargin = 0;\n      } else {\n        this.maxMargin = height - labelHeight;\n      }\n    }\n  }, {\n    key: \"handleScroll\",\n    value: function handleScroll(scrollTop) {\n      var margin = scrollTop - this.top;\n      margin = margin < this.minMargin ? this.minMargin : margin;\n      margin = margin > this.maxMargin ? this.maxMargin : margin;\n      if (margin == this.margin) return;\n\n      if (!this.props.hasStickyPosition) {\n        this.label.style.top = \"\".concat(margin, \"px\");\n      }\n\n      this.margin = margin;\n      return true;\n    }\n  }, {\n    key: \"getEmojis\",\n    value: function getEmojis() {\n      var _this2 = this;\n\n      var _this$props2 = this.props,\n          name = _this$props2.name,\n          emojis = _this$props2.emojis,\n          recent = _this$props2.recent,\n          perLine = _this$props2.perLine;\n\n      if (name == 'Recent') {\n        var custom = this.props.custom;\n        var frequentlyUsed = recent || frequently.get(perLine);\n\n        if (frequentlyUsed.length) {\n          emojis = frequentlyUsed.map(function (id) {\n            var emoji = custom.filter(function (e) {\n              return e.id === id;\n            })[0];\n\n            if (emoji) {\n              return emoji;\n            }\n\n            return id;\n          }).filter(function (id) {\n            return !!getData(id, null, null, _this2.data);\n          });\n        }\n\n        if (emojis.length === 0 && frequentlyUsed.length > 0) {\n          return null;\n        }\n      }\n\n      if (emojis) {\n        emojis = emojis.slice(0);\n      }\n\n      return emojis;\n    }\n  }, {\n    key: \"updateDisplay\",\n    value: function updateDisplay(display) {\n      var emojis = this.getEmojis();\n\n      if (!emojis || !this.container) {\n        return;\n      }\n\n      this.container.style.display = display;\n    }\n  }, {\n    key: \"setContainerRef\",\n    value: function setContainerRef(c) {\n      this.container = c;\n    }\n  }, {\n    key: \"setLabelRef\",\n    value: function setLabelRef(c) {\n      this.label = c;\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      var _this3 = this;\n\n      var _this$props3 = this.props,\n          id = _this$props3.id,\n          name = _this$props3.name,\n          hasStickyPosition = _this$props3.hasStickyPosition,\n          emojiProps = _this$props3.emojiProps,\n          i18n = _this$props3.i18n,\n          notFound = _this$props3.notFound,\n          notFoundEmoji = _this$props3.notFoundEmoji,\n          emojis = this.getEmojis(),\n          labelStyles = {},\n          labelSpanStyles = {},\n          containerStyles = {};\n\n      if (!emojis) {\n        containerStyles = {\n          display: 'none'\n        };\n      }\n\n      if (!hasStickyPosition) {\n        labelStyles = {\n          height: 28\n        };\n        labelSpanStyles = {\n          position: 'absolute'\n        };\n      }\n\n      var label = i18n.categories[id] || name;\n      return React.createElement(\"section\", {\n        ref: this.setContainerRef,\n        className: \"emoji-mart-category\",\n        \"aria-label\": label,\n        style: containerStyles\n      }, React.createElement(\"div\", {\n        style: labelStyles,\n        \"data-name\": name,\n        className: \"emoji-mart-category-label\"\n      }, React.createElement(\"span\", {\n        style: labelSpanStyles,\n        ref: this.setLabelRef,\n        \"aria-hidden\": true\n        /* already labeled by the section aria-label */\n\n      }, label)), React.createElement(\"ul\", {\n        className: \"emoji-mart-category-list\"\n      }, emojis && emojis.map(function (emoji) {\n        return React.createElement(\"li\", {\n          key: emoji.short_names && emoji.short_names.join('_') || emoji\n        }, NimbleEmoji(_objectSpread({\n          emoji: emoji,\n          data: _this3.data\n        }, emojiProps)));\n      })), emojis && !emojis.length && React.createElement(NotFound, {\n        i18n: i18n,\n        notFound: notFound,\n        notFoundEmoji: notFoundEmoji,\n        data: this.data,\n        emojiProps: emojiProps\n      }));\n    }\n  }]);\n\n  return Category;\n}(React.Component);\n\nexport { Category as default };\nCategory.propTypes\n/* remove-proptypes */\n= {\n  emojis: PropTypes.array,\n  hasStickyPosition: PropTypes.bool,\n  name: PropTypes.string.isRequired,\n  \"native\": PropTypes.bool.isRequired,\n  perLine: PropTypes.number.isRequired,\n  emojiProps: PropTypes.object.isRequired,\n  recent: PropTypes.arrayOf(PropTypes.string),\n  notFound: PropTypes.func,\n  notFoundEmoji: PropTypes.string.isRequired\n};\nCategory.defaultProps = {\n  emojis: [],\n  hasStickyPosition: true\n};","import _classCallCheck from \"@babel/runtime/helpers/classCallCheck\";\nimport _createClass from \"@babel/runtime/helpers/createClass\";\nimport _possibleConstructorReturn from \"@babel/runtime/helpers/possibleConstructorReturn\";\nimport _getPrototypeOf from \"@babel/runtime/helpers/getPrototypeOf\";\nimport _inherits from \"@babel/runtime/helpers/inherits\";\nimport React from 'react';\nimport PropTypes from 'prop-types';\n\nvar Skins =\n/*#__PURE__*/\nfunction (_React$PureComponent) {\n  _inherits(Skins, _React$PureComponent);\n\n  function Skins(props) {\n    var _this;\n\n    _classCallCheck(this, Skins);\n\n    _this = _possibleConstructorReturn(this, _getPrototypeOf(Skins).call(this, props));\n    _this.state = {\n      opened: false\n    };\n    return _this;\n  }\n\n  _createClass(Skins, [{\n    key: \"handleClick\",\n    value: function handleClick(e) {\n      var skin = parseInt(e.currentTarget.getAttribute('data-skin'));\n      var onChange = this.props.onChange;\n\n      if (!this.state.opened) {\n        this.setState({\n          opened: true\n        });\n      } else {\n        this.setState({\n          opened: false\n        });\n\n        if (skin != this.props.skin) {\n          onChange(skin);\n        }\n      }\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      return null;\n    }\n  }]);\n\n  return Skins;\n}(React.PureComponent);\n\nexport { Skins as default };\nSkins.propTypes\n/* remove-proptypes */\n= {\n  onChange: PropTypes.func,\n  skin: PropTypes.number.isRequired\n};\nSkins.defaultProps = {\n  onChange: function onChange() {}\n};","import _classCallCheck from \"@babel/runtime/helpers/classCallCheck\";\nimport _createClass from \"@babel/runtime/helpers/createClass\";\nimport _possibleConstructorReturn from \"@babel/runtime/helpers/possibleConstructorReturn\";\nimport _getPrototypeOf from \"@babel/runtime/helpers/getPrototypeOf\";\nimport _assertThisInitialized from \"@babel/runtime/helpers/assertThisInitialized\";\nimport _inherits from \"@babel/runtime/helpers/inherits\";\nimport React from 'react';\nimport PropTypes from 'prop-types';\nimport NimbleEmoji from './emoji/nimble-emoji';\nimport Skins from './skins';\n\nvar SkinsEmoji =\n/*#__PURE__*/\nfunction (_Skins) {\n  _inherits(SkinsEmoji, _Skins);\n\n  function SkinsEmoji(props) {\n    var _this;\n\n    _classCallCheck(this, SkinsEmoji);\n\n    _this = _possibleConstructorReturn(this, _getPrototypeOf(SkinsEmoji).call(this, props));\n    _this.handleClick = _this.handleClick.bind(_assertThisInitialized(_this));\n    return _this;\n  }\n\n  _createClass(SkinsEmoji, [{\n    key: \"render\",\n    value: function render() {\n      var _this$props = this.props,\n          skin = _this$props.skin,\n          emojiProps = _this$props.emojiProps,\n          data = _this$props.data,\n          skinEmoji = _this$props.skinEmoji,\n          i18n = _this$props.i18n;\n      var opened = this.state.opened;\n      var skinToneNodes = [];\n\n      for (var skinTone = 1; skinTone <= 6; skinTone++) {\n        var selected = skinTone === skin;\n        skinToneNodes.push(React.createElement(\"span\", {\n          key: \"skin-tone-\".concat(skinTone),\n          className: \"emoji-mart-skin-swatch custom\".concat(selected ? ' selected' : '')\n        }, React.createElement(\"span\", {\n          onClick: this.handleClick,\n          \"data-skin\": skinTone,\n          className: \"emoji-mart-skin-tone-\".concat(skinTone)\n        }, NimbleEmoji({\n          emoji: skinEmoji,\n          data: data,\n          skin: skinTone,\n          backgroundImageFn: emojiProps.backgroundImageFn,\n          \"native\": emojiProps[\"native\"],\n          set: emojiProps.set,\n          sheetSize: emojiProps.sheetSize,\n          size: 23\n        }))));\n      }\n\n      return React.createElement(\"div\", {\n        className: \"emoji-mart-skin-swatches custom\".concat(opened ? ' opened' : '')\n      }, React.createElement(\"div\", {\n        className: \"emoji-mart-skin-text\".concat(opened ? ' opened' : '')\n      }, i18n.skintext), skinToneNodes);\n    }\n  }]);\n\n  return SkinsEmoji;\n}(Skins);\n\nexport { SkinsEmoji as default };\nSkinsEmoji.propTypes\n/* remove-proptypes */\n= {\n  onChange: PropTypes.func,\n  skin: PropTypes.number.isRequired,\n  emojiProps: PropTypes.object.isRequired,\n  skinTone: PropTypes.number,\n  skinEmoji: PropTypes.string.isRequired,\n  i18n: PropTypes.object\n};\nSkinsEmoji.defaultProps = {\n  onChange: function onChange() {},\n  skinTone: null\n};","import _extends from \"@babel/runtime/helpers/extends\";\nimport _classCallCheck from \"@babel/runtime/helpers/classCallCheck\";\nimport _createClass from \"@babel/runtime/helpers/createClass\";\nimport _possibleConstructorReturn from \"@babel/runtime/helpers/possibleConstructorReturn\";\nimport _getPrototypeOf from \"@babel/runtime/helpers/getPrototypeOf\";\nimport _assertThisInitialized from \"@babel/runtime/helpers/assertThisInitialized\";\nimport _inherits from \"@babel/runtime/helpers/inherits\";\nimport React from 'react';\nimport PropTypes from 'prop-types';\nimport Skins from './skins';\n\nvar SkinsDot =\n/*#__PURE__*/\nfunction (_Skins) {\n  _inherits(SkinsDot, _Skins);\n\n  function SkinsDot(props) {\n    var _this;\n\n    _classCallCheck(this, SkinsDot);\n\n    _this = _possibleConstructorReturn(this, _getPrototypeOf(SkinsDot).call(this, props));\n    _this.handleClick = _this.handleClick.bind(_assertThisInitialized(_this));\n    _this.handleKeyDown = _this.handleKeyDown.bind(_assertThisInitialized(_this));\n    return _this;\n  }\n\n  _createClass(SkinsDot, [{\n    key: \"handleKeyDown\",\n    value: function handleKeyDown(event) {\n      // if either enter or space is pressed, then execute\n      if (event.keyCode === 13 || event.keyCode === 32) {\n        event.preventDefault();\n        this.handleClick(event);\n      }\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      var _this$props = this.props,\n          skin = _this$props.skin,\n          i18n = _this$props.i18n;\n      var opened = this.state.opened;\n      var skinToneNodes = [];\n\n      for (var skinTone = 1; skinTone <= 6; skinTone++) {\n        var selected = skinTone === skin;\n        var visible = opened || selected;\n        skinToneNodes.push(React.createElement(\"span\", _extends({\n          key: \"skin-tone-\".concat(skinTone),\n          className: \"emoji-mart-skin-swatch\".concat(selected ? ' selected' : ''),\n          \"aria-label\": i18n.skintones[skinTone],\n          \"aria-hidden\": !visible\n        }, opened ? {\n          role: 'menuitem'\n        } : {}), React.createElement(\"span\", _extends({\n          onClick: this.handleClick,\n          onKeyDown: this.handleKeyDown,\n          role: \"button\"\n        }, selected ? {\n          'aria-haspopup': true,\n          'aria-expanded': !!opened\n        } : {}, opened ? {\n          'aria-pressed': !!selected\n        } : {}, {\n          tabIndex: visible ? '0' : '',\n          \"aria-label\": i18n.skintones[skinTone],\n          title: i18n.skintones[skinTone],\n          \"data-skin\": skinTone,\n          className: \"emoji-mart-skin emoji-mart-skin-tone-\".concat(skinTone)\n        }))));\n      }\n\n      return React.createElement(\"section\", {\n        className: \"emoji-mart-skin-swatches\".concat(opened ? ' opened' : ''),\n        \"aria-label\": i18n.skintext\n      }, React.createElement(\"div\", opened ? {\n        role: 'menubar'\n      } : {}, skinToneNodes));\n    }\n  }]);\n\n  return SkinsDot;\n}(Skins);\n\nexport { SkinsDot as default };\nSkinsDot.propTypes\n/* remove-proptypes */\n= {\n  onChange: PropTypes.func,\n  skin: PropTypes.number.isRequired,\n  i18n: PropTypes.object\n};\nSkinsDot.defaultProps = {\n  onChange: function onChange() {}\n};","import _defineProperty from \"@babel/runtime/helpers/defineProperty\";\nimport _classCallCheck from \"@babel/runtime/helpers/classCallCheck\";\nimport _createClass from \"@babel/runtime/helpers/createClass\";\nimport _possibleConstructorReturn from \"@babel/runtime/helpers/possibleConstructorReturn\";\nimport _getPrototypeOf from \"@babel/runtime/helpers/getPrototypeOf\";\nimport _inherits from \"@babel/runtime/helpers/inherits\";\n\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(Object(source), true).forEach(function (key) { _defineProperty(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }\n\nimport React from 'react';\nimport PropTypes from 'prop-types';\nimport { getData } from '../utils';\nimport NimbleEmoji from './emoji/nimble-emoji';\nimport SkinsEmoji from './skins-emoji';\nimport SkinsDot from './skins-dot';\n\nvar Preview =\n/*#__PURE__*/\nfunction (_React$PureComponent) {\n  _inherits(Preview, _React$PureComponent);\n\n  function Preview(props) {\n    var _this;\n\n    _classCallCheck(this, Preview);\n\n    _this = _possibleConstructorReturn(this, _getPrototypeOf(Preview).call(this, props));\n    _this.data = props.data;\n    _this.state = {\n      emoji: null\n    };\n    return _this;\n  }\n\n  _createClass(Preview, [{\n    key: \"render\",\n    value: function render() {\n      var emoji = this.state.emoji,\n          _this$props = this.props,\n          emojiProps = _this$props.emojiProps,\n          skinsProps = _this$props.skinsProps,\n          showSkinTones = _this$props.showSkinTones,\n          title = _this$props.title,\n          idleEmoji = _this$props.emoji,\n          i18n = _this$props.i18n,\n          showPreview = _this$props.showPreview;\n\n      if (emoji && showPreview) {\n        var emojiData = getData(emoji, null, null, this.data),\n            _emojiData$emoticons = emojiData.emoticons,\n            emoticons = _emojiData$emoticons === void 0 ? [] : _emojiData$emoticons,\n            knownEmoticons = [],\n            listedEmoticons = [];\n        emoticons.forEach(function (emoticon) {\n          if (knownEmoticons.indexOf(emoticon.toLowerCase()) >= 0) {\n            return;\n          }\n\n          knownEmoticons.push(emoticon.toLowerCase());\n          listedEmoticons.push(emoticon);\n        });\n        return React.createElement(\"div\", {\n          className: \"emoji-mart-preview\"\n        }, React.createElement(\"div\", {\n          className: \"emoji-mart-preview-emoji\",\n          \"aria-hidden\": \"true\"\n        }, NimbleEmoji(_objectSpread({\n          key: emoji.id,\n          emoji: emoji,\n          data: this.data\n        }, emojiProps))), React.createElement(\"div\", {\n          className: \"emoji-mart-preview-data\",\n          \"aria-hidden\": \"true\"\n        }, React.createElement(\"div\", {\n          className: \"emoji-mart-preview-name\"\n        }, emoji.name), React.createElement(\"div\", {\n          className: \"emoji-mart-preview-shortnames\"\n        }, emojiData.short_names.map(function (short_name) {\n          return React.createElement(\"span\", {\n            key: short_name,\n            className: \"emoji-mart-preview-shortname\"\n          }, \":\", short_name, \":\");\n        })), React.createElement(\"div\", {\n          className: \"emoji-mart-preview-emoticons\"\n        }, listedEmoticons.map(function (emoticon) {\n          return React.createElement(\"span\", {\n            key: emoticon,\n            className: \"emoji-mart-preview-emoticon\"\n          }, emoticon);\n        }))));\n      } else {\n        return React.createElement(\"div\", {\n          className: \"emoji-mart-preview\"\n        }, React.createElement(\"div\", {\n          className: \"emoji-mart-preview-emoji\",\n          \"aria-hidden\": \"true\"\n        }, idleEmoji && idleEmoji.length && NimbleEmoji(_objectSpread({\n          emoji: idleEmoji,\n          data: this.data\n        }, emojiProps))), React.createElement(\"div\", {\n          className: \"emoji-mart-preview-data\",\n          \"aria-hidden\": \"true\"\n        }, React.createElement(\"span\", {\n          className: \"emoji-mart-title-label\"\n        }, title)), showSkinTones && React.createElement(\"div\", {\n          className: \"emoji-mart-preview-skins\".concat(skinsProps.skinEmoji ? ' custom' : '')\n        }, skinsProps.skinEmoji ? React.createElement(SkinsEmoji, {\n          skin: skinsProps.skin,\n          emojiProps: emojiProps,\n          data: this.data,\n          skinEmoji: skinsProps.skinEmoji,\n          i18n: i18n,\n          onChange: skinsProps.onChange\n        }) : React.createElement(SkinsDot, {\n          skin: skinsProps.skin,\n          i18n: i18n,\n          onChange: skinsProps.onChange\n        })));\n      }\n    }\n  }]);\n\n  return Preview;\n}(React.PureComponent);\n\nexport { Preview as default };\nPreview.propTypes\n/* remove-proptypes */\n= {\n  showSkinTones: PropTypes.bool,\n  title: PropTypes.string.isRequired,\n  emoji: PropTypes.string.isRequired,\n  emojiProps: PropTypes.object.isRequired,\n  skinsProps: PropTypes.object.isRequired\n};\nPreview.defaultProps = {\n  showSkinTones: true,\n  onChange: function onChange() {}\n};","import _classCallCheck from \"@babel/runtime/helpers/classCallCheck\";\nimport _createClass from \"@babel/runtime/helpers/createClass\";\nimport _possibleConstructorReturn from \"@babel/runtime/helpers/possibleConstructorReturn\";\nimport _getPrototypeOf from \"@babel/runtime/helpers/getPrototypeOf\";\nimport _assertThisInitialized from \"@babel/runtime/helpers/assertThisInitialized\";\nimport _inherits from \"@babel/runtime/helpers/inherits\";\nimport React from 'react';\nimport PropTypes from 'prop-types';\nimport { search as icons } from '../svgs';\nimport NimbleEmojiIndex from '../utils/emoji-index/nimble-emoji-index';\nimport { throttleIdleTask } from '../utils/index';\nvar id = 0;\n\nvar Search =\n/*#__PURE__*/\nfunction (_React$PureComponent) {\n  _inherits(Search, _React$PureComponent);\n\n  function Search(props) {\n    var _this;\n\n    _classCallCheck(this, Search);\n\n    _this = _possibleConstructorReturn(this, _getPrototypeOf(Search).call(this, props));\n    _this.state = {\n      icon: icons.search,\n      isSearching: false,\n      id: ++id\n    };\n    _this.data = props.data;\n    _this.emojiIndex = new NimbleEmojiIndex(_this.data);\n    _this.setRef = _this.setRef.bind(_assertThisInitialized(_this));\n    _this.clear = _this.clear.bind(_assertThisInitialized(_this));\n    _this.handleKeyUp = _this.handleKeyUp.bind(_assertThisInitialized(_this)); // throttle keyboard input so that typing isn't delayed\n\n    _this.handleChange = throttleIdleTask(_this.handleChange.bind(_assertThisInitialized(_this)));\n    return _this;\n  }\n\n  _createClass(Search, [{\n    key: \"componentDidMount\",\n    value: function componentDidMount() {\n      // in some cases (e.g. preact) the input may already be pre-populated\n      // this.input is undefined in Jest tests\n      if (this.input && this.input.value) {\n        this.search(this.input.value);\n      }\n    }\n  }, {\n    key: \"search\",\n    value: function search(value) {\n      if (value == '') this.setState({\n        icon: icons.search,\n        isSearching: false\n      });else this.setState({\n        icon: icons[\"delete\"],\n        isSearching: true\n      });\n      this.props.onSearch(this.emojiIndex.search(value, {\n        emojisToShowFilter: this.props.emojisToShowFilter,\n        maxResults: this.props.maxResults,\n        include: this.props.include,\n        exclude: this.props.exclude,\n        custom: this.props.custom\n      }));\n    }\n  }, {\n    key: \"clear\",\n    value: function clear() {\n      if (this.input.value == '') return;\n      this.input.value = '';\n      this.input.focus();\n      this.search('');\n    }\n  }, {\n    key: \"handleChange\",\n    value: function handleChange() {\n      this.search(this.input.value);\n    }\n  }, {\n    key: \"handleKeyUp\",\n    value: function handleKeyUp(e) {\n      if (e.keyCode === 13) {\n        this.clear();\n      }\n    }\n  }, {\n    key: \"setRef\",\n    value: function setRef(c) {\n      this.input = c;\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      var _this$props = this.props,\n          i18n = _this$props.i18n,\n          autoFocus = _this$props.autoFocus;\n      var _this$state = this.state,\n          icon = _this$state.icon,\n          isSearching = _this$state.isSearching,\n          id = _this$state.id;\n      var inputId = \"emoji-mart-search-\".concat(id);\n      return React.createElement(\"section\", {\n        className: \"emoji-mart-search\",\n        \"aria-label\": i18n.search\n      }, React.createElement(\"input\", {\n        id: inputId,\n        ref: this.setRef,\n        type: \"search\",\n        onChange: this.handleChange,\n        placeholder: i18n.search,\n        autoFocus: autoFocus\n      }), React.createElement(\"label\", {\n        className: \"emoji-mart-sr-only\",\n        htmlFor: inputId\n      }, i18n.search), React.createElement(\"button\", {\n        className: \"emoji-mart-search-icon\",\n        onClick: this.clear,\n        onKeyUp: this.handleKeyUp,\n        \"aria-label\": i18n.clear,\n        disabled: !isSearching\n      }, icon()));\n    }\n  }]);\n\n  return Search;\n}(React.PureComponent);\n\nexport { Search as default };\nSearch.propTypes\n/* remove-proptypes */\n= {\n  onSearch: PropTypes.func,\n  maxResults: PropTypes.number,\n  emojisToShowFilter: PropTypes.func,\n  autoFocus: PropTypes.bool\n};\nSearch.defaultProps = {\n  onSearch: function onSearch() {},\n  maxResults: 75,\n  emojisToShowFilter: null,\n  autoFocus: false\n};","import _defineProperty from \"@babel/runtime/helpers/defineProperty\";\nimport _classCallCheck from \"@babel/runtime/helpers/classCallCheck\";\nimport _createClass from \"@babel/runtime/helpers/createClass\";\nimport _possibleConstructorReturn from \"@babel/runtime/helpers/possibleConstructorReturn\";\nimport _getPrototypeOf from \"@babel/runtime/helpers/getPrototypeOf\";\nimport _assertThisInitialized from \"@babel/runtime/helpers/assertThisInitialized\";\nimport _inherits from \"@babel/runtime/helpers/inherits\";\n\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(Object(source), true).forEach(function (key) { _defineProperty(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }\n\nimport React from 'react';\nimport PropTypes from 'prop-types';\nimport * as icons from '../../svgs';\nimport store from '../../utils/store';\nimport frequently from '../../utils/frequently';\nimport { deepMerge, measureScrollbar, getSanitizedData } from '../../utils';\nimport { uncompress } from '../../utils/data';\nimport { PickerPropTypes } from '../../utils/shared-props';\nimport Anchors from '../anchors';\nimport Category from '../category';\nimport Preview from '../preview';\nimport Search from '../search';\nimport { PickerDefaultProps } from '../../utils/shared-default-props';\nvar I18N = {\n  search: 'Search',\n  clear: 'Clear',\n  // Accessible label on \"clear\" button\n  notfound: 'No Emoji Found',\n  skintext: 'Choose your default skin tone',\n  categories: {\n    search: 'Search Results',\n    recent: 'Frequently Used',\n    people: 'Smileys & People',\n    nature: 'Animals & Nature',\n    foods: 'Food & Drink',\n    activity: 'Activity',\n    places: 'Travel & Places',\n    objects: 'Objects',\n    symbols: 'Symbols',\n    flags: 'Flags',\n    custom: 'Custom'\n  },\n  categorieslabel: 'Emoji categories',\n  // Accessible title for the list of categories\n  skintones: {\n    1: 'Default Skin Tone',\n    2: 'Light Skin Tone',\n    3: 'Medium-Light Skin Tone',\n    4: 'Medium Skin Tone',\n    5: 'Medium-Dark Skin Tone',\n    6: 'Dark Skin Tone'\n  }\n};\n\nvar NimblePicker =\n/*#__PURE__*/\nfunction (_React$PureComponent) {\n  _inherits(NimblePicker, _React$PureComponent);\n\n  function NimblePicker(props) {\n    var _this;\n\n    _classCallCheck(this, NimblePicker);\n\n    _this = _possibleConstructorReturn(this, _getPrototypeOf(NimblePicker).call(this, props));\n    _this.CUSTOM = [];\n    _this.RECENT_CATEGORY = {\n      id: 'recent',\n      name: 'Recent',\n      emojis: null\n    };\n    _this.SEARCH_CATEGORY = {\n      id: 'search',\n      name: 'Search',\n      emojis: null,\n      anchor: false\n    };\n\n    if (props.data.compressed) {\n      uncompress(props.data);\n    }\n\n    _this.data = props.data;\n    _this.i18n = deepMerge(I18N, props.i18n);\n    _this.icons = deepMerge(icons, props.icons);\n    _this.state = {\n      firstRender: true\n    };\n    _this.categories = [];\n    var allCategories = [].concat(_this.data.categories);\n\n    if (props.custom.length > 0) {\n      var customCategories = {};\n      var customCategoriesCreated = 0;\n      props.custom.forEach(function (emoji) {\n        if (!customCategories[emoji.customCategory]) {\n          customCategories[emoji.customCategory] = {\n            id: emoji.customCategory ? \"custom-\".concat(emoji.customCategory) : 'custom',\n            name: emoji.customCategory || 'Custom',\n            emojis: [],\n            anchor: customCategoriesCreated === 0\n          };\n          customCategoriesCreated++;\n        }\n\n        var category = customCategories[emoji.customCategory];\n\n        var customEmoji = _objectSpread({}, emoji, {\n          // `<Category />` expects emoji to have an `id`.\n          id: emoji.short_names[0],\n          custom: true\n        });\n\n        category.emojis.push(customEmoji);\n\n        _this.CUSTOM.push(customEmoji);\n      });\n      allCategories = allCategories.concat(Object.keys(customCategories).map(function (key) {\n        return customCategories[key];\n      }));\n    }\n\n    _this.hideRecent = true;\n\n    if (props.include != undefined) {\n      allCategories.sort(function (a, b) {\n        if (props.include.indexOf(a.id) > props.include.indexOf(b.id)) {\n          return 1;\n        }\n\n        return -1;\n      });\n    }\n\n    for (var categoryIndex = 0; categoryIndex < allCategories.length; categoryIndex++) {\n      var category = allCategories[categoryIndex];\n      var isIncluded = props.include && props.include.length ? props.include.indexOf(category.id) > -1 : true;\n      var isExcluded = props.exclude && props.exclude.length ? props.exclude.indexOf(category.id) > -1 : false;\n\n      if (!isIncluded || isExcluded) {\n        continue;\n      }\n\n      if (props.emojisToShowFilter) {\n        var newEmojis = [];\n        var emojis = category.emojis;\n\n        for (var emojiIndex = 0; emojiIndex < emojis.length; emojiIndex++) {\n          var emoji = emojis[emojiIndex];\n\n          if (props.emojisToShowFilter(_this.data.emojis[emoji] || emoji)) {\n            newEmojis.push(emoji);\n          }\n        }\n\n        if (newEmojis.length) {\n          var newCategory = {\n            emojis: newEmojis,\n            name: category.name,\n            id: category.id\n          };\n\n          _this.categories.push(newCategory);\n        }\n      } else {\n        _this.categories.push(category);\n      }\n    }\n\n    var includeRecent = props.include && props.include.length ? props.include.indexOf(_this.RECENT_CATEGORY.id) > -1 : true;\n    var excludeRecent = props.exclude && props.exclude.length ? props.exclude.indexOf(_this.RECENT_CATEGORY.id) > -1 : false;\n\n    if (includeRecent && !excludeRecent) {\n      _this.hideRecent = false;\n\n      _this.categories.unshift(_this.RECENT_CATEGORY);\n    }\n\n    if (_this.categories[0]) {\n      _this.categories[0].first = true;\n    }\n\n    _this.categories.unshift(_this.SEARCH_CATEGORY);\n\n    _this.setAnchorsRef = _this.setAnchorsRef.bind(_assertThisInitialized(_this));\n    _this.handleAnchorClick = _this.handleAnchorClick.bind(_assertThisInitialized(_this));\n    _this.setSearchRef = _this.setSearchRef.bind(_assertThisInitialized(_this));\n    _this.handleSearch = _this.handleSearch.bind(_assertThisInitialized(_this));\n    _this.setScrollRef = _this.setScrollRef.bind(_assertThisInitialized(_this));\n    _this.handleScroll = _this.handleScroll.bind(_assertThisInitialized(_this));\n    _this.handleScrollPaint = _this.handleScrollPaint.bind(_assertThisInitialized(_this));\n    _this.handleEmojiOver = _this.handleEmojiOver.bind(_assertThisInitialized(_this));\n    _this.handleEmojiLeave = _this.handleEmojiLeave.bind(_assertThisInitialized(_this));\n    _this.handleEmojiClick = _this.handleEmojiClick.bind(_assertThisInitialized(_this));\n    _this.handleEmojiSelect = _this.handleEmojiSelect.bind(_assertThisInitialized(_this));\n    _this.setPreviewRef = _this.setPreviewRef.bind(_assertThisInitialized(_this));\n    _this.handleSkinChange = _this.handleSkinChange.bind(_assertThisInitialized(_this));\n    _this.handleKeyDown = _this.handleKeyDown.bind(_assertThisInitialized(_this));\n    _this.handleDarkMatchMediaChange = _this.handleDarkMatchMediaChange.bind(_assertThisInitialized(_this));\n    return _this;\n  }\n\n  _createClass(NimblePicker, [{\n    key: \"componentDidMount\",\n    value: function componentDidMount() {\n      var _this2 = this;\n\n      if (this.state.firstRender) {\n        this.testStickyPosition();\n        this.firstRenderTimeout = setTimeout(function () {\n          _this2.setState({\n            firstRender: false\n          });\n        }, 60);\n      }\n    }\n  }, {\n    key: \"componentDidUpdate\",\n    value: function componentDidUpdate() {\n      this.updateCategoriesSize();\n      this.handleScroll();\n    }\n  }, {\n    key: \"componentWillUnmount\",\n    value: function componentWillUnmount() {\n      this.SEARCH_CATEGORY.emojis = null;\n      clearTimeout(this.leaveTimeout);\n      clearTimeout(this.firstRenderTimeout);\n\n      if (this.darkMatchMedia) {\n        this.darkMatchMedia.removeListener(this.handleDarkMatchMediaChange);\n      }\n    }\n  }, {\n    key: \"testStickyPosition\",\n    value: function testStickyPosition() {\n      var stickyTestElement = document.createElement('div');\n      var prefixes = ['', '-webkit-', '-ms-', '-moz-', '-o-'];\n      prefixes.forEach(function (prefix) {\n        return stickyTestElement.style.position = \"\".concat(prefix, \"sticky\");\n      });\n      this.hasStickyPosition = !!stickyTestElement.style.position.length;\n    }\n  }, {\n    key: \"getPreferredTheme\",\n    value: function getPreferredTheme() {\n      if (this.props.theme != 'auto') return this.props.theme;\n      if (this.state.theme) return this.state.theme;\n      if (typeof matchMedia !== 'function') return PickerDefaultProps.theme;\n\n      if (!this.darkMatchMedia) {\n        this.darkMatchMedia = matchMedia('(prefers-color-scheme: dark)');\n        this.darkMatchMedia.addListener(this.handleDarkMatchMediaChange);\n      }\n\n      if (this.darkMatchMedia.media.match(/^not/)) return PickerDefaultProps.theme;\n      return this.darkMatchMedia.matches ? 'dark' : 'light';\n    }\n  }, {\n    key: \"handleDarkMatchMediaChange\",\n    value: function handleDarkMatchMediaChange() {\n      this.setState({\n        theme: this.darkMatchMedia.matches ? 'dark' : 'light'\n      });\n    }\n  }, {\n    key: \"handleEmojiOver\",\n    value: function handleEmojiOver(emoji) {\n      var preview = this.preview;\n\n      if (!preview) {\n        return;\n      } // Use Array.prototype.find() when it is more widely supported.\n\n\n      var emojiData = this.CUSTOM.filter(function (customEmoji) {\n        return customEmoji.id === emoji.id;\n      })[0];\n\n      for (var key in emojiData) {\n        if (emojiData.hasOwnProperty(key)) {\n          emoji[key] = emojiData[key];\n        }\n      }\n\n      preview.setState({\n        emoji: emoji\n      });\n      clearTimeout(this.leaveTimeout);\n    }\n  }, {\n    key: \"handleEmojiLeave\",\n    value: function handleEmojiLeave(emoji) {\n      var preview = this.preview;\n\n      if (!preview) {\n        return;\n      }\n\n      this.leaveTimeout = setTimeout(function () {\n        preview.setState({\n          emoji: null\n        });\n      }, 16);\n    }\n  }, {\n    key: \"handleEmojiClick\",\n    value: function handleEmojiClick(emoji, e) {\n      this.props.onClick(emoji, e);\n      this.handleEmojiSelect(emoji);\n    }\n  }, {\n    key: \"handleEmojiSelect\",\n    value: function handleEmojiSelect(emoji) {\n      var _this3 = this;\n\n      this.props.onSelect(emoji);\n      if (!this.hideRecent && !this.props.recent) frequently.add(emoji);\n      var component = this.categoryRefs['category-1'];\n\n      if (component) {\n        var maxMargin = component.maxMargin;\n\n        if (this.props.enableFrequentEmojiSort) {\n          component.forceUpdate();\n        }\n\n        requestAnimationFrame(function () {\n          if (!_this3.scroll) return;\n          component.memoizeSize();\n          if (maxMargin == component.maxMargin) return;\n\n          _this3.updateCategoriesSize();\n\n          _this3.handleScrollPaint();\n\n          if (_this3.SEARCH_CATEGORY.emojis) {\n            component.updateDisplay('none');\n          }\n        });\n      }\n    }\n  }, {\n    key: \"handleScroll\",\n    value: function handleScroll() {\n      if (!this.waitingForPaint) {\n        this.waitingForPaint = true;\n        requestAnimationFrame(this.handleScrollPaint);\n      }\n    }\n  }, {\n    key: \"handleScrollPaint\",\n    value: function handleScrollPaint() {\n      this.waitingForPaint = false;\n\n      if (!this.scroll) {\n        return;\n      }\n\n      var activeCategory = null;\n\n      if (this.SEARCH_CATEGORY.emojis) {\n        activeCategory = this.SEARCH_CATEGORY;\n      } else {\n        var target = this.scroll,\n            scrollTop = target.scrollTop,\n            scrollingDown = scrollTop > (this.scrollTop || 0),\n            minTop = 0;\n\n        for (var i = 0, l = this.categories.length; i < l; i++) {\n          var ii = scrollingDown ? this.categories.length - 1 - i : i,\n              category = this.categories[ii],\n              component = this.categoryRefs[\"category-\".concat(ii)];\n\n          if (component) {\n            var active = component.handleScroll(scrollTop);\n\n            if (!minTop || component.top < minTop) {\n              if (component.top > 0) {\n                minTop = component.top;\n              }\n            }\n\n            if (active && !activeCategory) {\n              activeCategory = category;\n            }\n          }\n        }\n\n        if (scrollTop < minTop) {\n          activeCategory = this.categories.filter(function (category) {\n            return !(category.anchor === false);\n          })[0];\n        } else if (scrollTop + this.clientHeight >= this.scrollHeight) {\n          activeCategory = this.categories[this.categories.length - 1];\n        }\n      }\n\n      if (activeCategory) {\n        var anchors = this.anchors,\n            _activeCategory = activeCategory,\n            categoryName = _activeCategory.name;\n\n        if (anchors.state.selected != categoryName) {\n          anchors.setState({\n            selected: categoryName\n          });\n        }\n      }\n\n      this.scrollTop = scrollTop;\n    }\n  }, {\n    key: \"handleSearch\",\n    value: function handleSearch(emojis) {\n      this.SEARCH_CATEGORY.emojis = emojis;\n\n      for (var i = 0, l = this.categories.length; i < l; i++) {\n        var component = this.categoryRefs[\"category-\".concat(i)];\n\n        if (component && component.props.name != 'Search') {\n          var display = emojis ? 'none' : 'inherit';\n          component.updateDisplay(display);\n        }\n      }\n\n      this.forceUpdate();\n\n      if (this.scroll) {\n        this.scroll.scrollTop = 0;\n      }\n\n      this.handleScroll();\n    }\n  }, {\n    key: \"handleAnchorClick\",\n    value: function handleAnchorClick(category, i) {\n      var component = this.categoryRefs[\"category-\".concat(i)],\n          scroll = this.scroll,\n          anchors = this.anchors,\n          scrollToComponent = null;\n\n      scrollToComponent = function scrollToComponent() {\n        if (component) {\n          var top = component.top;\n\n          if (category.first) {\n            top = 0;\n          } else {\n            top += 1;\n          }\n\n          scroll.scrollTop = top;\n        }\n      };\n\n      if (this.SEARCH_CATEGORY.emojis) {\n        this.handleSearch(null);\n        this.search.clear();\n        requestAnimationFrame(scrollToComponent);\n      } else {\n        scrollToComponent();\n      }\n    }\n  }, {\n    key: \"handleSkinChange\",\n    value: function handleSkinChange(skin) {\n      var newState = {\n        skin: skin\n      },\n          onSkinChange = this.props.onSkinChange;\n      this.setState(newState);\n      store.update(newState);\n      onSkinChange(skin);\n    }\n  }, {\n    key: \"handleKeyDown\",\n    value: function handleKeyDown(e) {\n      var handled = false;\n\n      switch (e.keyCode) {\n        case 13:\n          var emoji;\n\n          if (this.SEARCH_CATEGORY.emojis && this.SEARCH_CATEGORY.emojis.length && (emoji = getSanitizedData(this.SEARCH_CATEGORY.emojis[0], this.state.skin, this.props.set, this.props.data))) {\n            this.handleEmojiSelect(emoji);\n            handled = true;\n          }\n\n          break;\n      }\n\n      if (handled) {\n        e.preventDefault();\n      }\n    }\n  }, {\n    key: \"updateCategoriesSize\",\n    value: function updateCategoriesSize() {\n      for (var i = 0, l = this.categories.length; i < l; i++) {\n        var component = this.categoryRefs[\"category-\".concat(i)];\n        if (component) component.memoizeSize();\n      }\n\n      if (this.scroll) {\n        var target = this.scroll;\n        this.scrollHeight = target.scrollHeight;\n        this.clientHeight = target.clientHeight;\n      }\n    }\n  }, {\n    key: \"getCategories\",\n    value: function getCategories() {\n      return this.state.firstRender ? this.categories.slice(0, 3) : this.categories;\n    }\n  }, {\n    key: \"setAnchorsRef\",\n    value: function setAnchorsRef(c) {\n      this.anchors = c;\n    }\n  }, {\n    key: \"setSearchRef\",\n    value: function setSearchRef(c) {\n      this.search = c;\n    }\n  }, {\n    key: \"setPreviewRef\",\n    value: function setPreviewRef(c) {\n      this.preview = c;\n    }\n  }, {\n    key: \"setScrollRef\",\n    value: function setScrollRef(c) {\n      this.scroll = c;\n    }\n  }, {\n    key: \"setCategoryRef\",\n    value: function setCategoryRef(name, c) {\n      if (!this.categoryRefs) {\n        this.categoryRefs = {};\n      }\n\n      this.categoryRefs[name] = c;\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      var _this4 = this;\n\n      var _this$props = this.props,\n          perLine = _this$props.perLine,\n          emojiSize = _this$props.emojiSize,\n          set = _this$props.set,\n          sheetSize = _this$props.sheetSize,\n          sheetColumns = _this$props.sheetColumns,\n          sheetRows = _this$props.sheetRows,\n          style = _this$props.style,\n          title = _this$props.title,\n          emoji = _this$props.emoji,\n          color = _this$props.color,\n          _native = _this$props[\"native\"],\n          backgroundImageFn = _this$props.backgroundImageFn,\n          emojisToShowFilter = _this$props.emojisToShowFilter,\n          showPreview = _this$props.showPreview,\n          showSkinTones = _this$props.showSkinTones,\n          emojiTooltip = _this$props.emojiTooltip,\n          useButton = _this$props.useButton,\n          include = _this$props.include,\n          exclude = _this$props.exclude,\n          recent = _this$props.recent,\n          autoFocus = _this$props.autoFocus,\n          skinEmoji = _this$props.skinEmoji,\n          notFound = _this$props.notFound,\n          notFoundEmoji = _this$props.notFoundEmoji;\n      var width = perLine * (emojiSize + 12) + 12 + 2 + measureScrollbar();\n      var theme = this.getPreferredTheme();\n      var skin = this.props.skin || this.state.skin || store.get('skin') || this.props.defaultSkin;\n      return React.createElement(\"section\", {\n        style: _objectSpread({\n          width: width\n        }, style),\n        className: \"emoji-mart emoji-mart-\".concat(theme),\n        \"aria-label\": title,\n        onKeyDown: this.handleKeyDown\n      }, React.createElement(\"div\", {\n        className: \"emoji-mart-bar\"\n      }, React.createElement(Anchors, {\n        ref: this.setAnchorsRef,\n        data: this.data,\n        i18n: this.i18n,\n        color: color,\n        categories: this.categories,\n        onAnchorClick: this.handleAnchorClick,\n        icons: this.icons\n      })), React.createElement(Search, {\n        ref: this.setSearchRef,\n        onSearch: this.handleSearch,\n        data: this.data,\n        i18n: this.i18n,\n        emojisToShowFilter: emojisToShowFilter,\n        include: include,\n        exclude: exclude,\n        custom: this.CUSTOM,\n        autoFocus: autoFocus\n      }), React.createElement(\"div\", {\n        ref: this.setScrollRef,\n        className: \"emoji-mart-scroll\",\n        onScroll: this.handleScroll\n      }, this.getCategories().map(function (category, i) {\n        return React.createElement(Category, {\n          ref: _this4.setCategoryRef.bind(_this4, \"category-\".concat(i)),\n          key: category.name,\n          id: category.id,\n          name: category.name,\n          emojis: category.emojis,\n          perLine: perLine,\n          \"native\": _native,\n          hasStickyPosition: _this4.hasStickyPosition,\n          data: _this4.data,\n          i18n: _this4.i18n,\n          recent: category.id == _this4.RECENT_CATEGORY.id ? recent : undefined,\n          custom: category.id == _this4.RECENT_CATEGORY.id ? _this4.CUSTOM : undefined,\n          emojiProps: {\n            \"native\": _native,\n            skin: skin,\n            size: emojiSize,\n            set: set,\n            sheetSize: sheetSize,\n            sheetColumns: sheetColumns,\n            sheetRows: sheetRows,\n            forceSize: _native,\n            tooltip: emojiTooltip,\n            backgroundImageFn: backgroundImageFn,\n            useButton: useButton,\n            onOver: _this4.handleEmojiOver,\n            onLeave: _this4.handleEmojiLeave,\n            onClick: _this4.handleEmojiClick\n          },\n          notFound: notFound,\n          notFoundEmoji: notFoundEmoji\n        });\n      })), (showPreview || showSkinTones) && React.createElement(\"div\", {\n        className: \"emoji-mart-bar\"\n      }, React.createElement(Preview, {\n        ref: this.setPreviewRef,\n        data: this.data,\n        title: title,\n        emoji: emoji,\n        showSkinTones: showSkinTones,\n        showPreview: showPreview,\n        emojiProps: {\n          \"native\": _native,\n          size: 38,\n          skin: skin,\n          set: set,\n          sheetSize: sheetSize,\n          sheetColumns: sheetColumns,\n          sheetRows: sheetRows,\n          backgroundImageFn: backgroundImageFn\n        },\n        skinsProps: {\n          skin: skin,\n          onChange: this.handleSkinChange,\n          skinEmoji: skinEmoji\n        },\n        i18n: this.i18n\n      })));\n    }\n  }]);\n\n  return NimblePicker;\n}(React.PureComponent);\n\nexport { NimblePicker as default };\nNimblePicker.propTypes\n/* remove-proptypes */\n= _objectSpread({}, PickerPropTypes, {\n  data: PropTypes.object.isRequired\n});\nNimblePicker.defaultProps = _objectSpread({}, PickerDefaultProps);","import _defineProperty from \"@babel/runtime/helpers/defineProperty\";\nimport _extends from \"@babel/runtime/helpers/extends\";\nimport _classCallCheck from \"@babel/runtime/helpers/classCallCheck\";\nimport _createClass from \"@babel/runtime/helpers/createClass\";\nimport _possibleConstructorReturn from \"@babel/runtime/helpers/possibleConstructorReturn\";\nimport _getPrototypeOf from \"@babel/runtime/helpers/getPrototypeOf\";\nimport _inherits from \"@babel/runtime/helpers/inherits\";\n\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(Object(source), true).forEach(function (key) { _defineProperty(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }\n\nimport React from 'react';\nimport data from '../../../data/all.json';\nimport NimblePicker from './nimble-picker';\nimport { PickerPropTypes } from '../../utils/shared-props';\nimport { PickerDefaultProps } from '../../utils/shared-default-props';\n\nvar Picker =\n/*#__PURE__*/\nfunction (_React$PureComponent) {\n  _inherits(Picker, _React$PureComponent);\n\n  function Picker() {\n    _classCallCheck(this, Picker);\n\n    return _possibleConstructorReturn(this, _getPrototypeOf(Picker).apply(this, arguments));\n  }\n\n  _createClass(Picker, [{\n    key: \"render\",\n    value: function render() {\n      return React.createElement(NimblePicker, _extends({}, this.props, this.state));\n    }\n  }]);\n\n  return Picker;\n}(React.PureComponent);\n\nexport { Picker as default };\nPicker.propTypes\n/* remove-proptypes */\n= PickerPropTypes;\nPicker.defaultProps = _objectSpread({}, PickerDefaultProps, {\n  data: data\n});","import _defineProperty from \"@babel/runtime/helpers/defineProperty\";\n\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(Object(source), true).forEach(function (key) { _defineProperty(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }\n\nimport React from 'react';\nimport data from '../../../data/all.json';\nimport NimbleEmoji from './nimble-emoji';\nimport { EmojiPropTypes } from '../../utils/shared-props';\nimport { EmojiDefaultProps } from '../../utils/shared-default-props';\n\nvar Emoji = function Emoji(props) {\n  for (var k in Emoji.defaultProps) {\n    if (props[k] == undefined && Emoji.defaultProps[k] != undefined) {\n      props[k] = Emoji.defaultProps[k];\n    }\n  }\n\n  return NimbleEmoji(_objectSpread({}, props));\n};\n\nEmoji.propTypes\n/* remove-proptypes */\n= EmojiPropTypes;\nEmoji.defaultProps = _objectSpread({}, EmojiDefaultProps, {\n  data: data\n});\nexport default Emoji;","import arrayWithoutHoles from \"./arrayWithoutHoles\";\nimport iterableToArray from \"./iterableToArray\";\nimport unsupportedIterableToArray from \"./unsupportedIterableToArray\";\nimport nonIterableSpread from \"./nonIterableSpread\";\nexport default function _toConsumableArray(arr) {\n  return arrayWithoutHoles(arr) || iterableToArray(arr) || unsupportedIterableToArray(arr) || nonIterableSpread();\n}","import arrayLikeToArray from \"./arrayLikeToArray\";\nexport default function _arrayWithoutHoles(arr) {\n  if (Array.isArray(arr)) return arrayLikeToArray(arr);\n}","export default function _iterableToArray(iter) {\n  if (typeof Symbol !== \"undefined\" && Symbol.iterator in Object(iter)) return Array.from(iter);\n}","export default function _nonIterableSpread() {\n  throw new TypeError(\"Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\");\n}","/*!\n * isobject <https://github.com/jonschlinkert/isobject>\n *\n * Copyright (c) 2014-2017, Jon Schlinkert.\n * Released under the MIT License.\n */\n\nfunction isObject(val) {\n  return val != null && typeof val === 'object' && Array.isArray(val) === false;\n}\n\n/*!\n * is-plain-object <https://github.com/jonschlinkert/is-plain-object>\n *\n * Copyright (c) 2014-2017, Jon Schlinkert.\n * Released under the MIT License.\n */\n\nfunction isObjectObject(o) {\n  return isObject(o) === true\n    && Object.prototype.toString.call(o) === '[object Object]';\n}\n\nfunction isPlainObject(o) {\n  var ctor,prot;\n\n  if (isObjectObject(o) === false) return false;\n\n  // If has modified constructor\n  ctor = o.constructor;\n  if (typeof ctor !== 'function') return false;\n\n  // If has modified prototype\n  prot = ctor.prototype;\n  if (isObjectObject(prot) === false) return false;\n\n  // If constructor does not have an Object-specific method\n  if (prot.hasOwnProperty('isPrototypeOf') === false) {\n    return false;\n  }\n\n  // Most likely a plain Object\n  return true;\n}\n\nexport default isPlainObject;\n","import isPlainObject from 'is-plain-object'\nimport { Operation } from 'slate'\n\n/**\n * `History` objects hold all of the operations that are applied to a value, so\n * they can be undone or redone as necessary.\n */\n\nexport interface History {\n  redos: Operation[][]\n  undos: Operation[][]\n}\n\nexport const History = {\n  /**\n   * Check if a value is a `History` object.\n   */\n\n  isHistory(value: any): value is History {\n    return (\n      isPlainObject(value) &&\n      Array.isArray(value.redos) &&\n      Array.isArray(value.undos) &&\n      (value.redos.length === 0 || Operation.isOperationList(value.redos[0])) &&\n      (value.undos.length === 0 || Operation.isOperationList(value.undos[0]))\n    )\n  },\n}\n","import { Editor } from 'slate'\nimport { History } from './history'\n\n/**\n * Weakmaps for attaching state to the editor.\n */\n\nexport const HISTORY = new WeakMap<Editor, History>()\nexport const SAVING = new WeakMap<Editor, boolean | undefined>()\nexport const MERGING = new WeakMap<Editor, boolean | undefined>()\n\n/**\n * `HistoryEditor` contains helpers for history-enabled editors.\n */\n\nexport interface HistoryEditor extends Editor {\n  history: History\n  undo: () => void\n  redo: () => void\n}\n\nexport const HistoryEditor = {\n  /**\n   * Check if a value is a `HistoryEditor` object.\n   */\n\n  isHistoryEditor(value: any): value is HistoryEditor {\n    return Editor.isEditor(value) && History.isHistory(value.history)\n  },\n\n  /**\n   * Get the merge flag's current value.\n   */\n\n  isMerging(editor: HistoryEditor): boolean | undefined {\n    return MERGING.get(editor)\n  },\n\n  /**\n   * Get the saving flag's current value.\n   */\n\n  isSaving(editor: HistoryEditor): boolean | undefined {\n    return SAVING.get(editor)\n  },\n\n  /**\n   * Redo to the previous saved state.\n   */\n\n  redo(editor: HistoryEditor): void {\n    editor.redo()\n  },\n\n  /**\n   * Undo to the previous saved state.\n   */\n\n  undo(editor: HistoryEditor): void {\n    editor.undo()\n  },\n\n  /**\n   * Apply a series of changes inside a synchronous `fn`, without merging any of\n   * the new operations into previous save point in the history.\n   */\n\n  withoutMerging(editor: HistoryEditor, fn: () => void): void {\n    const prev = HistoryEditor.isMerging(editor)\n    MERGING.set(editor, false)\n    fn()\n    MERGING.set(editor, prev)\n  },\n\n  /**\n   * Apply a series of changes inside a synchronous `fn`, without saving any of\n   * their operations into the history.\n   */\n\n  withoutSaving(editor: HistoryEditor, fn: () => void): void {\n    const prev = HistoryEditor.isSaving(editor)\n    SAVING.set(editor, false)\n    fn()\n    SAVING.set(editor, prev)\n  },\n}\n","import { Editor, Operation, Path } from 'slate'\n\nimport { HistoryEditor } from './history-editor'\n\n/**\n * The `withHistory` plugin keeps track of the operation history of a Slate\n * editor as operations are applied to it, using undo and redo stacks.\n */\n\nexport const withHistory = <T extends Editor>(editor: T) => {\n  const e = editor as T & HistoryEditor\n  const { apply } = e\n  e.history = { undos: [], redos: [] }\n\n  e.redo = () => {\n    const { history } = e\n    const { redos } = history\n\n    if (redos.length > 0) {\n      const batch = redos[redos.length - 1]\n\n      HistoryEditor.withoutSaving(e, () => {\n        Editor.withoutNormalizing(e, () => {\n          for (const op of batch) {\n            e.apply(op)\n          }\n        })\n      })\n\n      history.redos.pop()\n      history.undos.push(batch)\n    }\n  }\n\n  e.undo = () => {\n    const { history } = e\n    const { undos } = history\n\n    if (undos.length > 0) {\n      const batch = undos[undos.length - 1]\n\n      HistoryEditor.withoutSaving(e, () => {\n        Editor.withoutNormalizing(e, () => {\n          const inverseOps = batch.map(Operation.inverse).reverse()\n\n          for (const op of inverseOps) {\n            // If the final operation is deselecting the editor, skip it. This is\n            if (\n              op === inverseOps[inverseOps.length - 1] &&\n              op.type === 'set_selection' &&\n              op.newProperties == null\n            ) {\n              continue\n            } else {\n              e.apply(op)\n            }\n          }\n        })\n      })\n\n      history.redos.push(batch)\n      history.undos.pop()\n    }\n  }\n\n  e.apply = (op: Operation) => {\n    const { operations, history } = e\n    const { undos } = history\n    const lastBatch = undos[undos.length - 1]\n    const lastOp = lastBatch && lastBatch[lastBatch.length - 1]\n    const overwrite = shouldOverwrite(op, lastOp)\n    let save = HistoryEditor.isSaving(e)\n    let merge = HistoryEditor.isMerging(e)\n\n    if (save == null) {\n      save = shouldSave(op, lastOp)\n    }\n\n    if (save) {\n      if (merge == null) {\n        if (lastBatch == null) {\n          merge = false\n        } else if (operations.length !== 0) {\n          merge = true\n        } else {\n          merge = shouldMerge(op, lastOp) || overwrite\n        }\n      }\n\n      if (lastBatch && merge) {\n        if (overwrite) {\n          lastBatch.pop()\n        }\n\n        lastBatch.push(op)\n      } else {\n        const batch = [op]\n        undos.push(batch)\n      }\n\n      while (undos.length > 100) {\n        undos.shift()\n      }\n\n      if (shouldClear(op)) {\n        history.redos = []\n      }\n    }\n\n    apply(op)\n  }\n\n  return e\n}\n\n/**\n * Check whether to merge an operation into the previous operation.\n */\n\nconst shouldMerge = (op: Operation, prev: Operation | undefined): boolean => {\n  if (op.type === 'set_selection') {\n    return true\n  }\n\n  if (\n    prev &&\n    op.type === 'insert_text' &&\n    prev.type === 'insert_text' &&\n    op.offset === prev.offset + prev.text.length &&\n    Path.equals(op.path, prev.path)\n  ) {\n    return true\n  }\n\n  if (\n    prev &&\n    op.type === 'remove_text' &&\n    prev.type === 'remove_text' &&\n    op.offset + op.text.length === prev.offset &&\n    Path.equals(op.path, prev.path)\n  ) {\n    return true\n  }\n\n  return false\n}\n\n/**\n * Check whether an operation needs to be saved to the history.\n */\n\nconst shouldSave = (op: Operation, prev: Operation | undefined): boolean => {\n  if (op.type === 'set_selection' && op.newProperties == null) {\n    return false\n  }\n\n  return true\n}\n\n/**\n * Check whether an operation should overwrite the previous one.\n */\n\nconst shouldOverwrite = (\n  op: Operation,\n  prev: Operation | undefined\n): boolean => {\n  if (prev && op.type === 'set_selection' && prev.type === 'set_selection') {\n    return true\n  }\n\n  return false\n}\n\n/**\n * Check whether an operation should clear the redos stack.\n */\n\nconst shouldClear = (op: Operation): boolean => {\n  if (op.type === 'set_selection') {\n    return false\n  }\n\n  return true\n}\n","function _typeof(obj) {\n  \"@babel/helpers - typeof\";\n\n  if (typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\") {\n    module.exports = _typeof = function _typeof(obj) {\n      return typeof obj;\n    };\n  } else {\n    module.exports = _typeof = function _typeof(obj) {\n      return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj;\n    };\n  }\n\n  return _typeof(obj);\n}\n\nmodule.exports = _typeof;","var freeGlobal = require('./_freeGlobal');\n\n/** Detect free variable `self`. */\nvar freeSelf = typeof self == 'object' && self && self.Object === Object && self;\n\n/** Used as a reference to the global object. */\nvar root = freeGlobal || freeSelf || Function('return this')();\n\nmodule.exports = root;\n","var root = require('./_root');\n\n/** Built-in value references. */\nvar Symbol = root.Symbol;\n\nmodule.exports = Symbol;\n","function _setPrototypeOf(o, p) {\n  module.exports = _setPrototypeOf = Object.setPrototypeOf || function _setPrototypeOf(o, p) {\n    o.__proto__ = p;\n    return o;\n  };\n\n  return _setPrototypeOf(o, p);\n}\n\nmodule.exports = _setPrototypeOf;","var debounce = require('./debounce'),\n    isObject = require('./isObject');\n\n/** Error message constants. */\nvar FUNC_ERROR_TEXT = 'Expected a function';\n\n/**\n * Creates a throttled function that only invokes `func` at most once per\n * every `wait` milliseconds. The throttled function comes with a `cancel`\n * method to cancel delayed `func` invocations and a `flush` method to\n * immediately invoke them. Provide `options` to indicate whether `func`\n * should be invoked on the leading and/or trailing edge of the `wait`\n * timeout. The `func` is invoked with the last arguments provided to the\n * throttled function. Subsequent calls to the throttled function return the\n * result of the last `func` invocation.\n *\n * **Note:** If `leading` and `trailing` options are `true`, `func` is\n * invoked on the trailing edge of the timeout only if the throttled function\n * is invoked more than once during the `wait` timeout.\n *\n * If `wait` is `0` and `leading` is `false`, `func` invocation is deferred\n * until to the next tick, similar to `setTimeout` with a timeout of `0`.\n *\n * See [David Corbacho's article](https://css-tricks.com/debouncing-throttling-explained-examples/)\n * for details over the differences between `_.throttle` and `_.debounce`.\n *\n * @static\n * @memberOf _\n * @since 0.1.0\n * @category Function\n * @param {Function} func The function to throttle.\n * @param {number} [wait=0] The number of milliseconds to throttle invocations to.\n * @param {Object} [options={}] The options object.\n * @param {boolean} [options.leading=true]\n *  Specify invoking on the leading edge of the timeout.\n * @param {boolean} [options.trailing=true]\n *  Specify invoking on the trailing edge of the timeout.\n * @returns {Function} Returns the new throttled function.\n * @example\n *\n * // Avoid excessively updating the position while scrolling.\n * jQuery(window).on('scroll', _.throttle(updatePosition, 100));\n *\n * // Invoke `renewToken` when the click event is fired, but not more than once every 5 minutes.\n * var throttled = _.throttle(renewToken, 300000, { 'trailing': false });\n * jQuery(element).on('click', throttled);\n *\n * // Cancel the trailing throttled invocation.\n * jQuery(window).on('popstate', throttled.cancel);\n */\nfunction throttle(func, wait, options) {\n  var leading = true,\n      trailing = true;\n\n  if (typeof func != 'function') {\n    throw new TypeError(FUNC_ERROR_TEXT);\n  }\n  if (isObject(options)) {\n    leading = 'leading' in options ? !!options.leading : leading;\n    trailing = 'trailing' in options ? !!options.trailing : trailing;\n  }\n  return debounce(func, wait, {\n    'leading': leading,\n    'maxWait': wait,\n    'trailing': trailing\n  });\n}\n\nmodule.exports = throttle;\n","var isObject = require('./isObject'),\n    now = require('./now'),\n    toNumber = require('./toNumber');\n\n/** Error message constants. */\nvar FUNC_ERROR_TEXT = 'Expected a function';\n\n/* Built-in method references for those with the same name as other `lodash` methods. */\nvar nativeMax = Math.max,\n    nativeMin = Math.min;\n\n/**\n * Creates a debounced function that delays invoking `func` until after `wait`\n * milliseconds have elapsed since the last time the debounced function was\n * invoked. The debounced function comes with a `cancel` method to cancel\n * delayed `func` invocations and a `flush` method to immediately invoke them.\n * Provide `options` to indicate whether `func` should be invoked on the\n * leading and/or trailing edge of the `wait` timeout. The `func` is invoked\n * with the last arguments provided to the debounced function. Subsequent\n * calls to the debounced function return the result of the last `func`\n * invocation.\n *\n * **Note:** If `leading` and `trailing` options are `true`, `func` is\n * invoked on the trailing edge of the timeout only if the debounced function\n * is invoked more than once during the `wait` timeout.\n *\n * If `wait` is `0` and `leading` is `false`, `func` invocation is deferred\n * until to the next tick, similar to `setTimeout` with a timeout of `0`.\n *\n * See [David Corbacho's article](https://css-tricks.com/debouncing-throttling-explained-examples/)\n * for details over the differences between `_.debounce` and `_.throttle`.\n *\n * @static\n * @memberOf _\n * @since 0.1.0\n * @category Function\n * @param {Function} func The function to debounce.\n * @param {number} [wait=0] The number of milliseconds to delay.\n * @param {Object} [options={}] The options object.\n * @param {boolean} [options.leading=false]\n *  Specify invoking on the leading edge of the timeout.\n * @param {number} [options.maxWait]\n *  The maximum time `func` is allowed to be delayed before it's invoked.\n * @param {boolean} [options.trailing=true]\n *  Specify invoking on the trailing edge of the timeout.\n * @returns {Function} Returns the new debounced function.\n * @example\n *\n * // Avoid costly calculations while the window size is in flux.\n * jQuery(window).on('resize', _.debounce(calculateLayout, 150));\n *\n * // Invoke `sendMail` when clicked, debouncing subsequent calls.\n * jQuery(element).on('click', _.debounce(sendMail, 300, {\n *   'leading': true,\n *   'trailing': false\n * }));\n *\n * // Ensure `batchLog` is invoked once after 1 second of debounced calls.\n * var debounced = _.debounce(batchLog, 250, { 'maxWait': 1000 });\n * var source = new EventSource('/stream');\n * jQuery(source).on('message', debounced);\n *\n * // Cancel the trailing debounced invocation.\n * jQuery(window).on('popstate', debounced.cancel);\n */\nfunction debounce(func, wait, options) {\n  var lastArgs,\n      lastThis,\n      maxWait,\n      result,\n      timerId,\n      lastCallTime,\n      lastInvokeTime = 0,\n      leading = false,\n      maxing = false,\n      trailing = true;\n\n  if (typeof func != 'function') {\n    throw new TypeError(FUNC_ERROR_TEXT);\n  }\n  wait = toNumber(wait) || 0;\n  if (isObject(options)) {\n    leading = !!options.leading;\n    maxing = 'maxWait' in options;\n    maxWait = maxing ? nativeMax(toNumber(options.maxWait) || 0, wait) : maxWait;\n    trailing = 'trailing' in options ? !!options.trailing : trailing;\n  }\n\n  function invokeFunc(time) {\n    var args = lastArgs,\n        thisArg = lastThis;\n\n    lastArgs = lastThis = undefined;\n    lastInvokeTime = time;\n    result = func.apply(thisArg, args);\n    return result;\n  }\n\n  function leadingEdge(time) {\n    // Reset any `maxWait` timer.\n    lastInvokeTime = time;\n    // Start the timer for the trailing edge.\n    timerId = setTimeout(timerExpired, wait);\n    // Invoke the leading edge.\n    return leading ? invokeFunc(time) : result;\n  }\n\n  function remainingWait(time) {\n    var timeSinceLastCall = time - lastCallTime,\n        timeSinceLastInvoke = time - lastInvokeTime,\n        timeWaiting = wait - timeSinceLastCall;\n\n    return maxing\n      ? nativeMin(timeWaiting, maxWait - timeSinceLastInvoke)\n      : timeWaiting;\n  }\n\n  function shouldInvoke(time) {\n    var timeSinceLastCall = time - lastCallTime,\n        timeSinceLastInvoke = time - lastInvokeTime;\n\n    // Either this is the first call, activity has stopped and we're at the\n    // trailing edge, the system time has gone backwards and we're treating\n    // it as the trailing edge, or we've hit the `maxWait` limit.\n    return (lastCallTime === undefined || (timeSinceLastCall >= wait) ||\n      (timeSinceLastCall < 0) || (maxing && timeSinceLastInvoke >= maxWait));\n  }\n\n  function timerExpired() {\n    var time = now();\n    if (shouldInvoke(time)) {\n      return trailingEdge(time);\n    }\n    // Restart the timer.\n    timerId = setTimeout(timerExpired, remainingWait(time));\n  }\n\n  function trailingEdge(time) {\n    timerId = undefined;\n\n    // Only invoke if we have `lastArgs` which means `func` has been\n    // debounced at least once.\n    if (trailing && lastArgs) {\n      return invokeFunc(time);\n    }\n    lastArgs = lastThis = undefined;\n    return result;\n  }\n\n  function cancel() {\n    if (timerId !== undefined) {\n      clearTimeout(timerId);\n    }\n    lastInvokeTime = 0;\n    lastArgs = lastCallTime = lastThis = timerId = undefined;\n  }\n\n  function flush() {\n    return timerId === undefined ? result : trailingEdge(now());\n  }\n\n  function debounced() {\n    var time = now(),\n        isInvoking = shouldInvoke(time);\n\n    lastArgs = arguments;\n    lastThis = this;\n    lastCallTime = time;\n\n    if (isInvoking) {\n      if (timerId === undefined) {\n        return leadingEdge(lastCallTime);\n      }\n      if (maxing) {\n        // Handle invocations in a tight loop.\n        clearTimeout(timerId);\n        timerId = setTimeout(timerExpired, wait);\n        return invokeFunc(lastCallTime);\n      }\n    }\n    if (timerId === undefined) {\n      timerId = setTimeout(timerExpired, wait);\n    }\n    return result;\n  }\n  debounced.cancel = cancel;\n  debounced.flush = flush;\n  return debounced;\n}\n\nmodule.exports = debounce;\n","var root = require('./_root');\n\n/**\n * Gets the timestamp of the number of milliseconds that have elapsed since\n * the Unix epoch (1 January 1970 00:00:00 UTC).\n *\n * @static\n * @memberOf _\n * @since 2.4.0\n * @category Date\n * @returns {number} Returns the timestamp.\n * @example\n *\n * _.defer(function(stamp) {\n *   console.log(_.now() - stamp);\n * }, _.now());\n * // => Logs the number of milliseconds it took for the deferred invocation.\n */\nvar now = function() {\n  return root.Date.now();\n};\n\nmodule.exports = now;\n","/** Detect free variable `global` from Node.js. */\nvar freeGlobal = typeof global == 'object' && global && global.Object === Object && global;\n\nmodule.exports = freeGlobal;\n","var isObject = require('./isObject'),\n    isSymbol = require('./isSymbol');\n\n/** Used as references for various `Number` constants. */\nvar NAN = 0 / 0;\n\n/** Used to match leading and trailing whitespace. */\nvar reTrim = /^\\s+|\\s+$/g;\n\n/** Used to detect bad signed hexadecimal string values. */\nvar reIsBadHex = /^[-+]0x[0-9a-f]+$/i;\n\n/** Used to detect binary string values. */\nvar reIsBinary = /^0b[01]+$/i;\n\n/** Used to detect octal string values. */\nvar reIsOctal = /^0o[0-7]+$/i;\n\n/** Built-in method references without a dependency on `root`. */\nvar freeParseInt = parseInt;\n\n/**\n * Converts `value` to a number.\n *\n * @static\n * @memberOf _\n * @since 4.0.0\n * @category Lang\n * @param {*} value The value to process.\n * @returns {number} Returns the number.\n * @example\n *\n * _.toNumber(3.2);\n * // => 3.2\n *\n * _.toNumber(Number.MIN_VALUE);\n * // => 5e-324\n *\n * _.toNumber(Infinity);\n * // => Infinity\n *\n * _.toNumber('3.2');\n * // => 3.2\n */\nfunction toNumber(value) {\n  if (typeof value == 'number') {\n    return value;\n  }\n  if (isSymbol(value)) {\n    return NAN;\n  }\n  if (isObject(value)) {\n    var other = typeof value.valueOf == 'function' ? value.valueOf() : value;\n    value = isObject(other) ? (other + '') : other;\n  }\n  if (typeof value != 'string') {\n    return value === 0 ? value : +value;\n  }\n  value = value.replace(reTrim, '');\n  var isBinary = reIsBinary.test(value);\n  return (isBinary || reIsOctal.test(value))\n    ? freeParseInt(value.slice(2), isBinary ? 2 : 8)\n    : (reIsBadHex.test(value) ? NAN : +value);\n}\n\nmodule.exports = toNumber;\n","var baseGetTag = require('./_baseGetTag'),\n    isObjectLike = require('./isObjectLike');\n\n/** `Object#toString` result references. */\nvar symbolTag = '[object Symbol]';\n\n/**\n * Checks if `value` is classified as a `Symbol` primitive or object.\n *\n * @static\n * @memberOf _\n * @since 4.0.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is a symbol, else `false`.\n * @example\n *\n * _.isSymbol(Symbol.iterator);\n * // => true\n *\n * _.isSymbol('abc');\n * // => false\n */\nfunction isSymbol(value) {\n  return typeof value == 'symbol' ||\n    (isObjectLike(value) && baseGetTag(value) == symbolTag);\n}\n\nmodule.exports = isSymbol;\n","var Symbol = require('./_Symbol'),\n    getRawTag = require('./_getRawTag'),\n    objectToString = require('./_objectToString');\n\n/** `Object#toString` result references. */\nvar nullTag = '[object Null]',\n    undefinedTag = '[object Undefined]';\n\n/** Built-in value references. */\nvar symToStringTag = Symbol ? Symbol.toStringTag : undefined;\n\n/**\n * The base implementation of `getTag` without fallbacks for buggy environments.\n *\n * @private\n * @param {*} value The value to query.\n * @returns {string} Returns the `toStringTag`.\n */\nfunction baseGetTag(value) {\n  if (value == null) {\n    return value === undefined ? undefinedTag : nullTag;\n  }\n  return (symToStringTag && symToStringTag in Object(value))\n    ? getRawTag(value)\n    : objectToString(value);\n}\n\nmodule.exports = baseGetTag;\n","var Symbol = require('./_Symbol');\n\n/** Used for built-in method references. */\nvar objectProto = Object.prototype;\n\n/** Used to check objects for own properties. */\nvar hasOwnProperty = objectProto.hasOwnProperty;\n\n/**\n * Used to resolve the\n * [`toStringTag`](http://ecma-international.org/ecma-262/7.0/#sec-object.prototype.tostring)\n * of values.\n */\nvar nativeObjectToString = objectProto.toString;\n\n/** Built-in value references. */\nvar symToStringTag = Symbol ? Symbol.toStringTag : undefined;\n\n/**\n * A specialized version of `baseGetTag` which ignores `Symbol.toStringTag` values.\n *\n * @private\n * @param {*} value The value to query.\n * @returns {string} Returns the raw `toStringTag`.\n */\nfunction getRawTag(value) {\n  var isOwn = hasOwnProperty.call(value, symToStringTag),\n      tag = value[symToStringTag];\n\n  try {\n    value[symToStringTag] = undefined;\n    var unmasked = true;\n  } catch (e) {}\n\n  var result = nativeObjectToString.call(value);\n  if (unmasked) {\n    if (isOwn) {\n      value[symToStringTag] = tag;\n    } else {\n      delete value[symToStringTag];\n    }\n  }\n  return result;\n}\n\nmodule.exports = getRawTag;\n","/** Used for built-in method references. */\nvar objectProto = Object.prototype;\n\n/**\n * Used to resolve the\n * [`toStringTag`](http://ecma-international.org/ecma-262/7.0/#sec-object.prototype.tostring)\n * of values.\n */\nvar nativeObjectToString = objectProto.toString;\n\n/**\n * Converts `value` to a string using `Object.prototype.toString`.\n *\n * @private\n * @param {*} value The value to convert.\n * @returns {string} Returns the converted string.\n */\nfunction objectToString(value) {\n  return nativeObjectToString.call(value);\n}\n\nmodule.exports = objectToString;\n","/**\n * Checks if `value` is object-like. A value is object-like if it's not `null`\n * and has a `typeof` result of \"object\".\n *\n * @static\n * @memberOf _\n * @since 4.0.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is object-like, else `false`.\n * @example\n *\n * _.isObjectLike({});\n * // => true\n *\n * _.isObjectLike([1, 2, 3]);\n * // => true\n *\n * _.isObjectLike(_.noop);\n * // => false\n *\n * _.isObjectLike(null);\n * // => false\n */\nfunction isObjectLike(value) {\n  return value != null && typeof value == 'object';\n}\n\nmodule.exports = isObjectLike;\n","'use strict'\n\nmodule.exports = direction\n\nvar RTL = '\\u0591-\\u07FF\\uFB1D-\\uFDFD\\uFE70-\\uFEFC'\nvar LTR =\n  'A-Za-z\\u00C0-\\u00D6\\u00D8-\\u00F6' +\n  '\\u00F8-\\u02B8\\u0300-\\u0590\\u0800-\\u1FFF\\u200E\\u2C00-\\uFB1C' +\n  '\\uFE00-\\uFE6F\\uFEFD-\\uFFFF'\n\nvar rtl = new RegExp('^[^' + LTR + ']*[' + RTL + ']')\nvar ltr = new RegExp('^[^' + RTL + ']*[' + LTR + ']')\n\nfunction direction(value) {\n  value = String(value || '')\n\n  if (rtl.test(value)) {\n    return 'rtl'\n  }\n\n  if (ltr.test(value)) {\n    return 'ltr'\n  }\n\n  return 'neutral'\n}\n","'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\n/**\n * Constants.\n */\n\nvar IS_MAC = typeof window != 'undefined' && /Mac|iPod|iPhone|iPad/.test(window.navigator.platform);\n\nvar MODIFIERS = {\n  alt: 'altKey',\n  control: 'ctrlKey',\n  meta: 'metaKey',\n  shift: 'shiftKey'\n};\n\nvar ALIASES = {\n  add: '+',\n  break: 'pause',\n  cmd: 'meta',\n  command: 'meta',\n  ctl: 'control',\n  ctrl: 'control',\n  del: 'delete',\n  down: 'arrowdown',\n  esc: 'escape',\n  ins: 'insert',\n  left: 'arrowleft',\n  mod: IS_MAC ? 'meta' : 'control',\n  opt: 'alt',\n  option: 'alt',\n  return: 'enter',\n  right: 'arrowright',\n  space: ' ',\n  spacebar: ' ',\n  up: 'arrowup',\n  win: 'meta',\n  windows: 'meta'\n};\n\nvar CODES = {\n  backspace: 8,\n  tab: 9,\n  enter: 13,\n  shift: 16,\n  control: 17,\n  alt: 18,\n  pause: 19,\n  capslock: 20,\n  escape: 27,\n  ' ': 32,\n  pageup: 33,\n  pagedown: 34,\n  end: 35,\n  home: 36,\n  arrowleft: 37,\n  arrowup: 38,\n  arrowright: 39,\n  arrowdown: 40,\n  insert: 45,\n  delete: 46,\n  meta: 91,\n  numlock: 144,\n  scrolllock: 145,\n  ';': 186,\n  '=': 187,\n  ',': 188,\n  '-': 189,\n  '.': 190,\n  '/': 191,\n  '`': 192,\n  '[': 219,\n  '\\\\': 220,\n  ']': 221,\n  '\\'': 222\n};\n\nfor (var f = 1; f < 20; f++) {\n  CODES['f' + f] = 111 + f;\n}\n\n/**\n * Is hotkey?\n */\n\nfunction isHotkey(hotkey, options, event) {\n  if (options && !('byKey' in options)) {\n    event = options;\n    options = null;\n  }\n\n  if (!Array.isArray(hotkey)) {\n    hotkey = [hotkey];\n  }\n\n  var array = hotkey.map(function (string) {\n    return parseHotkey(string, options);\n  });\n  var check = function check(e) {\n    return array.some(function (object) {\n      return compareHotkey(object, e);\n    });\n  };\n  var ret = event == null ? check : check(event);\n  return ret;\n}\n\nfunction isCodeHotkey(hotkey, event) {\n  return isHotkey(hotkey, event);\n}\n\nfunction isKeyHotkey(hotkey, event) {\n  return isHotkey(hotkey, { byKey: true }, event);\n}\n\n/**\n * Parse.\n */\n\nfunction parseHotkey(hotkey, options) {\n  var byKey = options && options.byKey;\n  var ret = {};\n\n  // Special case to handle the `+` key since we use it as a separator.\n  hotkey = hotkey.replace('++', '+add');\n  var values = hotkey.split('+');\n  var length = values.length;\n\n  // Ensure that all the modifiers are set to false unless the hotkey has them.\n\n  for (var k in MODIFIERS) {\n    ret[MODIFIERS[k]] = false;\n  }\n\n  var _iteratorNormalCompletion = true;\n  var _didIteratorError = false;\n  var _iteratorError = undefined;\n\n  try {\n    for (var _iterator = values[Symbol.iterator](), _step; !(_iteratorNormalCompletion = (_step = _iterator.next()).done); _iteratorNormalCompletion = true) {\n      var value = _step.value;\n\n      var optional = value.endsWith('?') && value.length > 1;\n\n      if (optional) {\n        value = value.slice(0, -1);\n      }\n\n      var name = toKeyName(value);\n      var modifier = MODIFIERS[name];\n\n      if (length === 1 || !modifier) {\n        if (byKey) {\n          ret.key = name;\n        } else {\n          ret.which = toKeyCode(value);\n        }\n      }\n\n      if (modifier) {\n        ret[modifier] = optional ? null : true;\n      }\n    }\n  } catch (err) {\n    _didIteratorError = true;\n    _iteratorError = err;\n  } finally {\n    try {\n      if (!_iteratorNormalCompletion && _iterator.return) {\n        _iterator.return();\n      }\n    } finally {\n      if (_didIteratorError) {\n        throw _iteratorError;\n      }\n    }\n  }\n\n  return ret;\n}\n\n/**\n * Compare.\n */\n\nfunction compareHotkey(object, event) {\n  for (var key in object) {\n    var expected = object[key];\n    var actual = void 0;\n\n    if (expected == null) {\n      continue;\n    }\n\n    if (key === 'key' && event.key != null) {\n      actual = event.key.toLowerCase();\n    } else if (key === 'which') {\n      actual = expected === 91 && event.which === 93 ? 91 : event.which;\n    } else {\n      actual = event[key];\n    }\n\n    if (actual == null && expected === false) {\n      continue;\n    }\n\n    if (actual !== expected) {\n      return false;\n    }\n  }\n\n  return true;\n}\n\n/**\n * Utils.\n */\n\nfunction toKeyCode(name) {\n  name = toKeyName(name);\n  var code = CODES[name] || name.toUpperCase().charCodeAt(0);\n  return code;\n}\n\nfunction toKeyName(name) {\n  name = name.toLowerCase();\n  name = ALIASES[name] || name;\n  return name;\n}\n\n/**\n * Export.\n */\n\nexports.default = isHotkey;\nexports.isHotkey = isHotkey;\nexports.isCodeHotkey = isCodeHotkey;\nexports.isKeyHotkey = isKeyHotkey;\nexports.parseHotkey = parseHotkey;\nexports.compareHotkey = compareHotkey;\nexports.toKeyCode = toKeyCode;\nexports.toKeyName = toKeyName;","/*! https://mths.be/esrever v0.2.0 by @mathias */\n;(function(root) {\n\n\t// Detect free variables `exports`\n\tvar freeExports = typeof exports == 'object' && exports;\n\n\t// Detect free variable `module`\n\tvar freeModule = typeof module == 'object' && module &&\n\t\tmodule.exports == freeExports && module;\n\n\t// Detect free variable `global`, from Node.js or Browserified code,\n\t// and use it as `root`\n\tvar freeGlobal = typeof global == 'object' && global;\n\tif (freeGlobal.global === freeGlobal || freeGlobal.window === freeGlobal) {\n\t\troot = freeGlobal;\n\t}\n\n\t/*--------------------------------------------------------------------------*/\n\n\tvar regexSymbolWithCombiningMarks = /([\\0-\\u02FF\\u0370-\\u1AAF\\u1B00-\\u1DBF\\u1E00-\\u20CF\\u2100-\\uD7FF\\uE000-\\uFE1F\\uFE30-\\uFFFF]|[\\uD800-\\uDBFF][\\uDC00-\\uDFFF]|[\\uD800-\\uDBFF](?![\\uDC00-\\uDFFF])|(?:[^\\uD800-\\uDBFF]|^)[\\uDC00-\\uDFFF])([\\u0300-\\u036F\\u1AB0-\\u1AFF\\u1DC0-\\u1DFF\\u20D0-\\u20FF\\uFE20-\\uFE2F]+)/g;\n\tvar regexSurrogatePair = /([\\uD800-\\uDBFF])([\\uDC00-\\uDFFF])/g;\n\n\tvar reverse = function(string) {\n\t\t// Step 1: deal with combining marks and astral symbols (surrogate pairs)\n\t\tstring = string\n\t\t\t// Swap symbols with their combining marks so the combining marks go first\n\t\t\t.replace(regexSymbolWithCombiningMarks, function($0, $1, $2) {\n\t\t\t\t// Reverse the combining marks so they will end up in the same order\n\t\t\t\t// later on (after another round of reversing)\n\t\t\t\treturn reverse($2) + $1;\n\t\t\t})\n\t\t\t// Swap high and low surrogates so the low surrogates go first\n\t\t\t.replace(regexSurrogatePair, '$2$1');\n\t\t// Step 2: reverse the code units in the string\n\t\tvar result = '';\n\t\tvar index = string.length;\n\t\twhile (index--) {\n\t\t\tresult += string.charAt(index);\n\t\t}\n\t\treturn result;\n\t};\n\n\t/*--------------------------------------------------------------------------*/\n\n\tvar esrever = {\n\t\t'version': '0.2.0',\n\t\t'reverse': reverse\n\t};\n\n\t// Some AMD build optimizers, like r.js, check for specific condition patterns\n\t// like the following:\n\tif (\n\t\ttypeof define == 'function' &&\n\t\ttypeof define.amd == 'object' &&\n\t\tdefine.amd\n\t) {\n\t\tdefine(function() {\n\t\t\treturn esrever;\n\t\t});\n\t}\telse if (freeExports && !freeExports.nodeType) {\n\t\tif (freeModule) { // in Node.js, io.js, or RingoJS v0.8.0+\n\t\t\tfreeModule.exports = esrever;\n\t\t} else { // in Narwhal or RingoJS v0.7.0-\n\t\t\tfor (var key in esrever) {\n\t\t\t\tesrever.hasOwnProperty(key) && (freeExports[key] = esrever[key]);\n\t\t\t}\n\t\t}\n\t} else { // in Rhino or a web browser\n\t\troot.esrever = esrever;\n\t}\n\n}(this));\n","module.exports = function(module) {\n\tif (!module.webpackPolyfill) {\n\t\tmodule.deprecate = function() {};\n\t\tmodule.paths = [];\n\t\t// module.parent = undefined by default\n\t\tif (!module.children) module.children = [];\n\t\tObject.defineProperty(module, \"loaded\", {\n\t\t\tenumerable: true,\n\t\t\tget: function() {\n\t\t\t\treturn module.l;\n\t\t\t}\n\t\t});\n\t\tObject.defineProperty(module, \"id\", {\n\t\t\tenumerable: true,\n\t\t\tget: function() {\n\t\t\t\treturn module.i;\n\t\t\t}\n\t\t});\n\t\tmodule.webpackPolyfill = 1;\n\t}\n\treturn module;\n};\n","// Should be no imports here!\n\n// SOme things that should be evaluated before all else...\nconst hasSymbol = typeof Symbol !== \"undefined\"\nexport const hasMap = typeof Map !== \"undefined\"\nexport const hasSet = typeof Set !== \"undefined\"\n\n/**\n * The sentinel value returned by producers to replace the draft with undefined.\n */\nexport const NOTHING: Nothing = hasSymbol\n\t? Symbol(\"immer-nothing\")\n\t: ({[\"immer-nothing\"]: true} as any)\n\n/**\n * To let Immer treat your class instances as plain immutable objects\n * (albeit with a custom prototype), you must define either an instance property\n * or a static property on each of your custom classes.\n *\n * Otherwise, your class instance will never be drafted, which means it won't be\n * safe to mutate in a produce callback.\n */\nexport const DRAFTABLE: unique symbol = hasSymbol\n\t? Symbol(\"immer-draftable\")\n\t: (\"__$immer_draftable\" as any)\n\nexport const DRAFT_STATE: unique symbol = hasSymbol\n\t? Symbol(\"immer-state\")\n\t: (\"__$immer_state\" as any)\n\nexport const iteratorSymbol: typeof Symbol.iterator = hasSymbol\n\t? Symbol.iterator\n\t: (\"@@iterator\" as any)\n\n/** Use a class type for `nothing` so its type is unique */\nexport class Nothing {\n\t// This lets us do `Exclude<T, Nothing>`\n\t// @ts-ignore\n\tprivate _!: unique symbol\n}\n","import {\n\tSetState,\n\tImmerScope,\n\tProxyObjectState,\n\tProxyArrayState,\n\tES5ObjectState,\n\tES5ArrayState,\n\tMapState,\n\tDRAFT_STATE\n} from \"./internal\"\n\nexport type Objectish = AnyObject | AnyArray | AnyMap | AnySet\nexport type ObjectishNoSet = AnyObject | AnyArray | AnyMap\n\nexport type AnyObject = {[key: string]: any}\nexport type AnyArray = Array<any>\nexport type AnySet = Set<any>\nexport type AnyMap = Map<any, any>\nexport enum Archtype {\n\tObject,\n\tArray,\n\tMap,\n\tSet\n}\n\nexport enum ProxyType {\n\tProxyObject,\n\tProxyArray,\n\tES5Object,\n\tES5Array,\n\tMap,\n\tSet\n}\n\nexport interface ImmerBaseState {\n\tparent?: ImmerState\n\tscope: ImmerScope\n\tmodified: boolean\n\tfinalized: boolean\n\tisManual: boolean\n}\n\nexport type ImmerState =\n\t| ProxyObjectState\n\t| ProxyArrayState\n\t| ES5ObjectState\n\t| ES5ArrayState\n\t| MapState\n\t| SetState\n\n// The _internal_ type used for drafts (not to be confused with Draft, which is public facing)\nexport type Drafted<Base = any, T extends ImmerState = ImmerState> = {\n\t[DRAFT_STATE]: T\n} & Base\n","/* istanbul ignore next */\nvar extendStatics = function(d: any, b: any): any {\n\textendStatics =\n\t\tObject.setPrototypeOf ||\n\t\t({__proto__: []} instanceof Array &&\n\t\t\tfunction(d, b) {\n\t\t\t\td.__proto__ = b\n\t\t\t}) ||\n\t\tfunction(d, b) {\n\t\t\tfor (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]\n\t\t}\n\treturn extendStatics(d, b)\n}\n\n// Ugly hack to resolve #502 and inherit built in Map / Set\nexport function __extends(d: any, b: any): any {\n\textendStatics(d, b)\n\tfunction __(this: any): any {\n\t\tthis.constructor = d\n\t}\n\td.prototype =\n\t\t// @ts-ignore\n\t\t((__.prototype = b.prototype), new __())\n}\n","import {\n\tDRAFT_STATE,\n\tDRAFTABLE,\n\thasSet,\n\tObjectish,\n\tDrafted,\n\tAnyObject,\n\tAnyArray,\n\tAnyMap,\n\tAnySet,\n\tImmerState,\n\tProxyType,\n\tArchtype,\n\thasMap\n} from \"./internal\"\n\n/** Returns true if the given value is an Immer draft */\nexport function isDraft(value: any): boolean {\n\treturn !!value && !!value[DRAFT_STATE]\n}\n\n/** Returns true if the given value can be drafted by Immer */\nexport function isDraftable(value: any): boolean {\n\tif (!value) return false\n\treturn (\n\t\tisPlainObject(value) ||\n\t\tArray.isArray(value) ||\n\t\t!!value[DRAFTABLE] ||\n\t\t!!value.constructor[DRAFTABLE] ||\n\t\tisMap(value) ||\n\t\tisSet(value)\n\t)\n}\n\nexport function isPlainObject(value: any): boolean {\n\tif (!value || typeof value !== \"object\") return false\n\tconst proto = Object.getPrototypeOf(value)\n\treturn !proto || proto === Object.prototype\n}\n\n/** Get the underlying object that is represented by the given draft */\nexport function original<T>(value: T): T | undefined\nexport function original(value: Drafted<any>): any {\n\tif (value && value[DRAFT_STATE]) {\n\t\treturn value[DRAFT_STATE].base as any\n\t}\n\t// otherwise return undefined\n}\n\nexport const ownKeys: (target: AnyObject) => PropertyKey[] =\n\ttypeof Reflect !== \"undefined\" && Reflect.ownKeys\n\t\t? Reflect.ownKeys\n\t\t: typeof Object.getOwnPropertySymbols !== \"undefined\"\n\t\t? obj =>\n\t\t\t\tObject.getOwnPropertyNames(obj).concat(\n\t\t\t\t\tObject.getOwnPropertySymbols(obj) as any\n\t\t\t\t)\n\t\t: /* istanbul ignore next */ Object.getOwnPropertyNames\n\nexport function each<T extends Objectish>(\n\tobj: T,\n\titer: (key: string | number, value: any, source: T) => void\n): void\nexport function each(obj: any, iter: any) {\n\tif (getArchtype(obj) === Archtype.Object) {\n\t\townKeys(obj).forEach(key => iter(key, obj[key], obj))\n\t} else {\n\t\tobj.forEach((entry: any, index: any) => iter(index, entry, obj))\n\t}\n}\n\nexport function isEnumerable(base: AnyObject, prop: PropertyKey): boolean {\n\tconst desc = Object.getOwnPropertyDescriptor(base, prop)\n\treturn desc && desc.enumerable ? true : false\n}\n\nexport function getArchtype(thing: any): Archtype {\n\t/* istanbul ignore next */\n\tif (!thing) die()\n\tif (thing[DRAFT_STATE]) {\n\t\tswitch ((thing as Drafted)[DRAFT_STATE].type) {\n\t\t\tcase ProxyType.ES5Object:\n\t\t\tcase ProxyType.ProxyObject:\n\t\t\t\treturn Archtype.Object\n\t\t\tcase ProxyType.ES5Array:\n\t\t\tcase ProxyType.ProxyArray:\n\t\t\t\treturn Archtype.Array\n\t\t\tcase ProxyType.Map:\n\t\t\t\treturn Archtype.Map\n\t\t\tcase ProxyType.Set:\n\t\t\t\treturn Archtype.Set\n\t\t}\n\t}\n\treturn Array.isArray(thing)\n\t\t? Archtype.Array\n\t\t: isMap(thing)\n\t\t? Archtype.Map\n\t\t: isSet(thing)\n\t\t? Archtype.Set\n\t\t: Archtype.Object\n}\n\nexport function has(thing: any, prop: PropertyKey): boolean {\n\treturn getArchtype(thing) === Archtype.Map\n\t\t? thing.has(prop)\n\t\t: Object.prototype.hasOwnProperty.call(thing, prop)\n}\n\nexport function get(thing: AnyMap | AnyObject, prop: PropertyKey): any {\n\t// @ts-ignore\n\treturn getArchtype(thing) === Archtype.Map ? thing.get(prop) : thing[prop]\n}\n\nexport function set(thing: any, propOrOldValue: PropertyKey, value: any) {\n\tswitch (getArchtype(thing)) {\n\t\tcase Archtype.Map:\n\t\t\tthing.set(propOrOldValue, value)\n\t\t\tbreak\n\t\tcase Archtype.Set:\n\t\t\tthing.delete(propOrOldValue)\n\t\t\tthing.add(value)\n\t\t\tbreak\n\t\tdefault:\n\t\t\tthing[propOrOldValue] = value\n\t}\n}\n\nexport function is(x: any, y: any): boolean {\n\t// From: https://github.com/facebook/fbjs/blob/c69904a511b900266935168223063dd8772dfc40/packages/fbjs/src/core/shallowEqual.js\n\tif (x === y) {\n\t\treturn x !== 0 || 1 / x === 1 / y\n\t} else {\n\t\treturn x !== x && y !== y\n\t}\n}\n\nexport function isMap(target: any): target is AnyMap {\n\treturn hasMap && target instanceof Map\n}\n\nexport function isSet(target: any): target is AnySet {\n\treturn hasSet && target instanceof Set\n}\n\nexport function latest(state: ImmerState): any {\n\treturn state.copy || state.base\n}\n\nexport function shallowCopy<T extends AnyObject | AnyArray>(\n\tbase: T,\n\tinvokeGetters?: boolean\n): T\nexport function shallowCopy(base: any, invokeGetters = false) {\n\tif (Array.isArray(base)) return base.slice()\n\tconst clone = Object.create(Object.getPrototypeOf(base))\n\townKeys(base).forEach(key => {\n\t\tif (key === DRAFT_STATE) {\n\t\t\treturn // Never copy over draft state.\n\t\t}\n\t\tconst desc = Object.getOwnPropertyDescriptor(base, key)!\n\t\tlet {value} = desc\n\t\tif (desc.get) {\n\t\t\tif (!invokeGetters) {\n\t\t\t\tthrow new Error(\"Immer drafts cannot have computed properties\")\n\t\t\t}\n\t\t\tvalue = desc.get.call(base)\n\t\t}\n\t\tif (desc.enumerable) {\n\t\t\tclone[key] = value\n\t\t} else {\n\t\t\tObject.defineProperty(clone, key, {\n\t\t\t\tvalue,\n\t\t\t\twritable: true,\n\t\t\t\tconfigurable: true\n\t\t\t})\n\t\t}\n\t})\n\treturn clone\n}\n\nexport function freeze(obj: any, deep: boolean): void {\n\tif (!isDraftable(obj) || isDraft(obj) || Object.isFrozen(obj)) return\n\tconst type = getArchtype(obj)\n\tif (type === Archtype.Set) {\n\t\tobj.add = obj.clear = obj.delete = dontMutateFrozenCollections as any\n\t} else if (type === Archtype.Map) {\n\t\tobj.set = obj.clear = obj.delete = dontMutateFrozenCollections as any\n\t}\n\tObject.freeze(obj)\n\tif (deep) each(obj, (_, value) => freeze(value, true))\n}\n\nfunction dontMutateFrozenCollections() {\n\tthrow new Error(\"This object has been frozen and should not be mutated\")\n}\n\nexport function createHiddenProperty(\n\ttarget: AnyObject,\n\tprop: PropertyKey,\n\tvalue: any\n) {\n\tObject.defineProperty(target, prop, {\n\t\tvalue: value,\n\t\tenumerable: false,\n\t\twritable: true\n\t})\n}\n\n/* istanbul ignore next */\nexport function die(): never {\n\tthrow new Error(\"Illegal state, please file a bug\")\n}\n","import {\n\tPatch,\n\tPatchListener,\n\tDrafted,\n\tProxyType,\n\tImmer,\n\tDRAFT_STATE\n} from \"./internal\"\n\n/** Each scope represents a `produce` call. */\nexport class ImmerScope {\n\tstatic current?: ImmerScope\n\n\tpatches?: Patch[]\n\tinversePatches?: Patch[]\n\tcanAutoFreeze: boolean\n\tdrafts: any[]\n\tparent?: ImmerScope\n\tpatchListener?: PatchListener\n\timmer: Immer\n\n\tconstructor(parent: ImmerScope | undefined, immer: Immer) {\n\t\tthis.drafts = []\n\t\tthis.parent = parent\n\t\tthis.immer = immer\n\n\t\t// Whenever the modified draft contains a draft from another scope, we\n\t\t// need to prevent auto-freezing so the unowned draft can be finalized.\n\t\tthis.canAutoFreeze = true\n\t}\n\n\tusePatches(patchListener?: PatchListener) {\n\t\tif (patchListener) {\n\t\t\tthis.patches = []\n\t\t\tthis.inversePatches = []\n\t\t\tthis.patchListener = patchListener\n\t\t}\n\t}\n\n\trevoke() {\n\t\tthis.leave()\n\t\tthis.drafts.forEach(revoke)\n\t\t// @ts-ignore\n\t\tthis.drafts = null\n\t}\n\n\tleave() {\n\t\tif (this === ImmerScope.current) {\n\t\t\tImmerScope.current = this.parent\n\t\t}\n\t}\n\n\tstatic enter(immer: Immer) {\n\t\tconst scope = new ImmerScope(ImmerScope.current, immer)\n\t\tImmerScope.current = scope\n\t\treturn scope\n\t}\n}\n\nfunction revoke(draft: Drafted) {\n\tconst state = draft[DRAFT_STATE]\n\tif (\n\t\tstate.type === ProxyType.ProxyObject ||\n\t\tstate.type === ProxyType.ProxyArray\n\t)\n\t\tstate.revoke()\n\telse state.revoked = true\n}\n","import {\n\tImmer,\n\tImmerScope,\n\tDRAFT_STATE,\n\tisDraftable,\n\tNOTHING,\n\tDrafted,\n\tPatchPath,\n\tProxyType,\n\teach,\n\thas,\n\tfreeze,\n\tgeneratePatches,\n\tshallowCopy,\n\tImmerState,\n\tisSet,\n\tisDraft,\n\tSetState,\n\tset,\n\tis,\n\tget\n} from \"./internal\"\n\nexport function processResult(immer: Immer, result: any, scope: ImmerScope) {\n\tconst baseDraft = scope.drafts![0]\n\tconst isReplaced = result !== undefined && result !== baseDraft\n\timmer.willFinalize(scope, result, isReplaced)\n\tif (isReplaced) {\n\t\tif (baseDraft[DRAFT_STATE].modified) {\n\t\t\tscope.revoke()\n\t\t\tthrow new Error(\"An immer producer returned a new value *and* modified its draft. Either return a new value *or* modify the draft.\") // prettier-ignore\n\t\t}\n\t\tif (isDraftable(result)) {\n\t\t\t// Finalize the result in case it contains (or is) a subset of the draft.\n\t\t\tresult = finalize(immer, result, scope)\n\t\t\tif (!scope.parent) maybeFreeze(immer, result)\n\t\t}\n\t\tif (scope.patches) {\n\t\t\tscope.patches.push({\n\t\t\t\top: \"replace\",\n\t\t\t\tpath: [],\n\t\t\t\tvalue: result\n\t\t\t})\n\t\t\tscope.inversePatches!.push({\n\t\t\t\top: \"replace\",\n\t\t\t\tpath: [],\n\t\t\t\tvalue: baseDraft[DRAFT_STATE].base\n\t\t\t})\n\t\t}\n\t} else {\n\t\t// Finalize the base draft.\n\t\tresult = finalize(immer, baseDraft, scope, [])\n\t}\n\tscope.revoke()\n\tif (scope.patches) {\n\t\tscope.patchListener!(scope.patches, scope.inversePatches!)\n\t}\n\treturn result !== NOTHING ? result : undefined\n}\n\nfunction finalize(\n\timmer: Immer,\n\tdraft: Drafted,\n\tscope: ImmerScope,\n\tpath?: PatchPath\n) {\n\tconst state = draft[DRAFT_STATE]\n\tif (!state) {\n\t\tif (Object.isFrozen(draft)) return draft\n\t\treturn finalizeTree(immer, draft, scope)\n\t}\n\t// Never finalize drafts owned by another scope.\n\tif (state.scope !== scope) {\n\t\treturn draft\n\t}\n\tif (!state.modified) {\n\t\tmaybeFreeze(immer, state.base, true)\n\t\treturn state.base\n\t}\n\tif (!state.finalized) {\n\t\tstate.finalized = true\n\t\tfinalizeTree(immer, state.draft, scope, path)\n\n\t\t// We cannot really delete anything inside of a Set. We can only replace the whole Set.\n\t\tif (immer.onDelete && state.type !== ProxyType.Set) {\n\t\t\t// The `assigned` object is unreliable with ES5 drafts.\n\t\t\tif (immer.useProxies) {\n\t\t\t\tconst {assigned} = state\n\t\t\t\teach(assigned, (prop, exists) => {\n\t\t\t\t\tif (!exists) immer.onDelete!(state, prop as any)\n\t\t\t\t})\n\t\t\t} else {\n\t\t\t\tconst {base, copy} = state\n\t\t\t\teach(base, prop => {\n\t\t\t\t\tif (!has(copy, prop)) immer.onDelete!(state, prop as any)\n\t\t\t\t})\n\t\t\t}\n\t\t}\n\t\tif (immer.onCopy) {\n\t\t\timmer.onCopy(state)\n\t\t}\n\n\t\t// At this point, all descendants of `state.copy` have been finalized,\n\t\t// so we can be sure that `scope.canAutoFreeze` is accurate.\n\t\tif (immer.autoFreeze && scope.canAutoFreeze) {\n\t\t\tfreeze(state.copy, false)\n\t\t}\n\n\t\tif (path && scope.patches) {\n\t\t\tgeneratePatches(state, path, scope.patches, scope.inversePatches!)\n\t\t}\n\t}\n\treturn state.copy\n}\n\nfunction finalizeTree(\n\timmer: Immer,\n\troot: Drafted,\n\tscope: ImmerScope,\n\trootPath?: PatchPath\n) {\n\tconst state = root[DRAFT_STATE]\n\tif (state) {\n\t\tif (\n\t\t\tstate.type === ProxyType.ES5Object ||\n\t\t\tstate.type === ProxyType.ES5Array\n\t\t) {\n\t\t\t// Create the final copy, with added keys and without deleted keys.\n\t\t\tstate.copy = shallowCopy(state.draft, true)\n\t\t}\n\t\troot = state.copy\n\t}\n\teach(root, (key, value) =>\n\t\tfinalizeProperty(immer, scope, root, state, root, key, value, rootPath)\n\t)\n\treturn root\n}\n\nfunction finalizeProperty(\n\timmer: Immer,\n\tscope: ImmerScope,\n\troot: Drafted,\n\trootState: ImmerState,\n\tparentValue: Drafted,\n\tprop: string | number,\n\tchildValue: any,\n\trootPath?: PatchPath\n) {\n\tif (childValue === parentValue) {\n\t\tthrow Error(\"Immer forbids circular references\")\n\t}\n\n\t// In the `finalizeTree` method, only the `root` object may be a draft.\n\tconst isDraftProp = !!rootState && parentValue === root\n\tconst isSetMember = isSet(parentValue)\n\n\tif (isDraft(childValue)) {\n\t\tconst path =\n\t\t\trootPath &&\n\t\t\tisDraftProp &&\n\t\t\t!isSetMember && // Set objects are atomic since they have no keys.\n\t\t\t!has((rootState as Exclude<ImmerState, SetState>).assigned!, prop) // Skip deep patches for assigned keys.\n\t\t\t\t? rootPath!.concat(prop)\n\t\t\t\t: undefined\n\n\t\t// Drafts owned by `scope` are finalized here.\n\t\tchildValue = finalize(immer, childValue, scope, path)\n\t\tset(parentValue, prop, childValue)\n\n\t\t// Drafts from another scope must prevent auto-freezing.\n\t\tif (isDraft(childValue)) {\n\t\t\tscope.canAutoFreeze = false\n\t\t}\n\t}\n\t// Unchanged draft properties are ignored.\n\telse if (isDraftProp && is(childValue, get(rootState.base, prop))) {\n\t\treturn\n\t}\n\t// Search new objects for unfinalized drafts. Frozen objects should never contain drafts.\n\t// TODO: the recursion over here looks weird, shouldn't non-draft stuff have it's own recursion?\n\t// especially the passing on of root and rootState doesn't make sense...\n\telse if (isDraftable(childValue)) {\n\t\teach(childValue, (key, grandChild) =>\n\t\t\tfinalizeProperty(\n\t\t\t\timmer,\n\t\t\t\tscope,\n\t\t\t\troot,\n\t\t\t\trootState,\n\t\t\t\tchildValue,\n\t\t\t\tkey,\n\t\t\t\tgrandChild,\n\t\t\t\trootPath\n\t\t\t)\n\t\t)\n\t\tif (!scope.parent) maybeFreeze(immer, childValue)\n\t}\n\n\tif (isDraftProp && immer.onAssign && !isSetMember) {\n\t\timmer.onAssign(rootState, prop, childValue)\n\t}\n}\n\nexport function maybeFreeze(immer: Immer, value: any, deep = false) {\n\tif (immer.autoFreeze && !isDraft(value)) {\n\t\tfreeze(value, deep)\n\t}\n}\n","import {\n\tget,\n\teach,\n\thas,\n\tdie,\n\tgetArchtype,\n\tImmerState,\n\tPatch,\n\tProxyType,\n\tSetState,\n\tES5ArrayState,\n\tProxyArrayState,\n\tMapState,\n\tES5ObjectState,\n\tProxyObjectState,\n\tArchtype,\n\tisMap,\n\tisSet\n} from \"./internal\"\n\nexport type PatchPath = (string | number)[]\n\nexport function generatePatches(\n\tstate: ImmerState,\n\tbasePath: PatchPath,\n\tpatches: Patch[],\n\tinversePatches: Patch[]\n): void {\n\tswitch (state.type) {\n\t\tcase ProxyType.ProxyObject:\n\t\tcase ProxyType.ES5Object:\n\t\tcase ProxyType.Map:\n\t\t\treturn generatePatchesFromAssigned(\n\t\t\t\tstate,\n\t\t\t\tbasePath,\n\t\t\t\tpatches,\n\t\t\t\tinversePatches\n\t\t\t)\n\t\tcase ProxyType.ES5Array:\n\t\tcase ProxyType.ProxyArray:\n\t\t\treturn generateArrayPatches(state, basePath, patches, inversePatches)\n\t\tcase ProxyType.Set:\n\t\t\treturn generateSetPatches(\n\t\t\t\t(state as any) as SetState,\n\t\t\t\tbasePath,\n\t\t\t\tpatches,\n\t\t\t\tinversePatches\n\t\t\t)\n\t}\n}\n\nfunction generateArrayPatches(\n\tstate: ES5ArrayState | ProxyArrayState,\n\tbasePath: PatchPath,\n\tpatches: Patch[],\n\tinversePatches: Patch[]\n) {\n\tlet {base, assigned, copy} = state\n\t/* istanbul ignore next */\n\tif (!copy) die()\n\n\t// Reduce complexity by ensuring `base` is never longer.\n\tif (copy.length < base.length) {\n\t\t// @ts-ignore\n\t\t;[base, copy] = [copy, base]\n\t\t;[patches, inversePatches] = [inversePatches, patches]\n\t}\n\n\tconst delta = copy.length - base.length\n\n\t// Find the first replaced index.\n\tlet start = 0\n\twhile (base[start] === copy[start] && start < base.length) {\n\t\t++start\n\t}\n\n\t// Find the last replaced index. Search from the end to optimize splice patches.\n\tlet end = base.length\n\twhile (end > start && base[end - 1] === copy[end + delta - 1]) {\n\t\t--end\n\t}\n\n\t// Process replaced indices.\n\tfor (let i = start; i < end; ++i) {\n\t\tif (assigned[i] && copy[i] !== base[i]) {\n\t\t\tconst path = basePath.concat([i])\n\t\t\tpatches.push({\n\t\t\t\top: \"replace\",\n\t\t\t\tpath,\n\t\t\t\tvalue: copy[i]\n\t\t\t})\n\t\t\tinversePatches.push({\n\t\t\t\top: \"replace\",\n\t\t\t\tpath,\n\t\t\t\tvalue: base[i]\n\t\t\t})\n\t\t}\n\t}\n\n\tconst replaceCount = patches.length\n\n\t// Process added indices.\n\tfor (let i = end + delta - 1; i >= end; --i) {\n\t\tconst path = basePath.concat([i])\n\t\tpatches[replaceCount + i - end] = {\n\t\t\top: \"add\",\n\t\t\tpath,\n\t\t\tvalue: copy[i]\n\t\t}\n\t\tinversePatches.push({\n\t\t\top: \"remove\",\n\t\t\tpath\n\t\t})\n\t}\n}\n\n// This is used for both Map objects and normal objects.\nfunction generatePatchesFromAssigned(\n\tstate: MapState | ES5ObjectState | ProxyObjectState,\n\tbasePath: PatchPath,\n\tpatches: Patch[],\n\tinversePatches: Patch[]\n) {\n\tconst {base, copy} = state\n\teach(state.assigned!, (key, assignedValue) => {\n\t\tconst origValue = get(base, key)\n\t\tconst value = get(copy!, key)\n\t\tconst op = !assignedValue ? \"remove\" : has(base, key) ? \"replace\" : \"add\"\n\t\tif (origValue === value && op === \"replace\") return\n\t\tconst path = basePath.concat(key as any)\n\t\tpatches.push(op === \"remove\" ? {op, path} : {op, path, value})\n\t\tinversePatches.push(\n\t\t\top === \"add\"\n\t\t\t\t? {op: \"remove\", path}\n\t\t\t\t: op === \"remove\"\n\t\t\t\t? {op: \"add\", path, value: origValue}\n\t\t\t\t: {op: \"replace\", path, value: origValue}\n\t\t)\n\t})\n}\n\nfunction generateSetPatches(\n\tstate: SetState,\n\tbasePath: PatchPath,\n\tpatches: Patch[],\n\tinversePatches: Patch[]\n) {\n\tlet {base, copy} = state\n\n\tlet i = 0\n\tbase.forEach(value => {\n\t\tif (!copy!.has(value)) {\n\t\t\tconst path = basePath.concat([i])\n\t\t\tpatches.push({\n\t\t\t\top: \"remove\",\n\t\t\t\tpath,\n\t\t\t\tvalue\n\t\t\t})\n\t\t\tinversePatches.unshift({\n\t\t\t\top: \"add\",\n\t\t\t\tpath,\n\t\t\t\tvalue\n\t\t\t})\n\t\t}\n\t\ti++\n\t})\n\ti = 0\n\tcopy!.forEach(value => {\n\t\tif (!base.has(value)) {\n\t\t\tconst path = basePath.concat([i])\n\t\t\tpatches.push({\n\t\t\t\top: \"add\",\n\t\t\t\tpath,\n\t\t\t\tvalue\n\t\t\t})\n\t\t\tinversePatches.unshift({\n\t\t\t\top: \"remove\",\n\t\t\t\tpath,\n\t\t\t\tvalue\n\t\t\t})\n\t\t}\n\t\ti++\n\t})\n}\n\nexport function applyPatches<T>(draft: T, patches: Patch[]): T {\n\tpatches.forEach(patch => {\n\t\tconst {path, op} = patch\n\n\t\t/* istanbul ignore next */\n\t\tif (!path.length) die()\n\n\t\tlet base: any = draft\n\t\tfor (let i = 0; i < path.length - 1; i++) {\n\t\t\tbase = get(base, path[i])\n\t\t\tif (!base || typeof base !== \"object\")\n\t\t\t\tthrow new Error(\"Cannot apply patch, path doesn't resolve: \" + path.join(\"/\")) // prettier-ignore\n\t\t}\n\n\t\tconst type = getArchtype(base)\n\t\tconst value = deepClonePatchValue(patch.value) // used to clone patch to ensure original patch is not modified, see #411\n\t\tconst key = path[path.length - 1]\n\t\tswitch (op) {\n\t\t\tcase \"replace\":\n\t\t\t\tswitch (type) {\n\t\t\t\t\tcase Archtype.Map:\n\t\t\t\t\t\treturn base.set(key, value)\n\t\t\t\t\t/* istanbul ignore next */\n\t\t\t\t\tcase Archtype.Set:\n\t\t\t\t\t\tthrow new Error('Sets cannot have \"replace\" patches.')\n\t\t\t\t\tdefault:\n\t\t\t\t\t\t// if value is an object, then it's assigned by reference\n\t\t\t\t\t\t// in the following add or remove ops, the value field inside the patch will also be modifyed\n\t\t\t\t\t\t// so we use value from the cloned patch\n\t\t\t\t\t\t// @ts-ignore\n\t\t\t\t\t\treturn (base[key] = value)\n\t\t\t\t}\n\t\t\tcase \"add\":\n\t\t\t\tswitch (type) {\n\t\t\t\t\tcase Archtype.Array:\n\t\t\t\t\t\treturn base.splice(key as any, 0, value)\n\t\t\t\t\tcase Archtype.Map:\n\t\t\t\t\t\treturn base.set(key, value)\n\t\t\t\t\tcase Archtype.Set:\n\t\t\t\t\t\treturn base.add(value)\n\t\t\t\t\tdefault:\n\t\t\t\t\t\treturn (base[key] = value)\n\t\t\t\t}\n\t\t\tcase \"remove\":\n\t\t\t\tswitch (type) {\n\t\t\t\t\tcase Archtype.Array:\n\t\t\t\t\t\treturn base.splice(key as any, 1)\n\t\t\t\t\tcase Archtype.Map:\n\t\t\t\t\t\treturn base.delete(key)\n\t\t\t\t\tcase Archtype.Set:\n\t\t\t\t\t\treturn base.delete(patch.value)\n\t\t\t\t\tdefault:\n\t\t\t\t\t\treturn delete base[key]\n\t\t\t\t}\n\t\t\tdefault:\n\t\t\t\tthrow new Error(\"Unsupported patch operation: \" + op)\n\t\t}\n\t})\n\n\treturn draft\n}\n\n// TODO: optimize: this is quite a performance hit, can we detect intelligently when it is needed?\n// E.g. auto-draft when new objects from outside are assigned and modified?\n// (See failing test when deepClone just returns obj)\nfunction deepClonePatchValue<T>(obj: T): T\nfunction deepClonePatchValue(obj: any) {\n\tif (!obj || typeof obj !== \"object\") return obj\n\tif (Array.isArray(obj)) return obj.map(deepClonePatchValue)\n\tif (isMap(obj))\n\t\treturn new Map(\n\t\t\tArray.from(obj.entries()).map(([k, v]) => [k, deepClonePatchValue(v)])\n\t\t)\n\tif (isSet(obj)) return new Set(Array.from(obj).map(deepClonePatchValue))\n\tconst cloned = Object.create(Object.getPrototypeOf(obj))\n\tfor (const key in obj) cloned[key] = deepClonePatchValue(obj[key])\n\treturn cloned\n}\n","\"use strict\"\nimport {\n\teach,\n\thas,\n\tis,\n\tisDraftable,\n\tshallowCopy,\n\tlatest,\n\tImmerBaseState,\n\tImmerState,\n\tDrafted,\n\tProxyType,\n\tAnyObject,\n\tAnyArray,\n\tObjectish,\n\tImmerScope,\n\tDRAFT_STATE\n} from \"./internal\"\n\ninterface ProxyBaseState extends ImmerBaseState {\n\tassigned: {\n\t\t[property: string]: boolean\n\t}\n\tparent?: ImmerState\n\tdrafts?: {\n\t\t[property: string]: Drafted<any, any>\n\t}\n\trevoke(): void\n}\n\nexport interface ProxyObjectState extends ProxyBaseState {\n\ttype: ProxyType.ProxyObject\n\tbase: AnyObject\n\tcopy: AnyObject | null\n\tdraft: Drafted<AnyObject, ProxyObjectState>\n}\n\nexport interface ProxyArrayState extends ProxyBaseState {\n\ttype: ProxyType.ProxyArray\n\tbase: AnyArray\n\tcopy: AnyArray | null\n\tdraft: Drafted<AnyArray, ProxyArrayState>\n}\n\ntype ProxyState = ProxyObjectState | ProxyArrayState\n\n/**\n * Returns a new draft of the `base` object.\n *\n * The second argument is the parent draft-state (used internally).\n */\nexport function createProxy<T extends Objectish>(\n\tbase: T,\n\tparent?: ImmerState\n): Drafted<T, ProxyState> {\n\tconst isArray = Array.isArray(base)\n\tconst state: ProxyState = {\n\t\ttype: isArray ? ProxyType.ProxyArray : (ProxyType.ProxyObject as any),\n\t\t// Track which produce call this is associated with.\n\t\tscope: parent ? parent.scope : ImmerScope.current!,\n\t\t// True for both shallow and deep changes.\n\t\tmodified: false,\n\t\t// Used during finalization.\n\t\tfinalized: false,\n\t\t// Track which properties have been assigned (true) or deleted (false).\n\t\tassigned: {},\n\t\t// The parent draft state.\n\t\tparent,\n\t\t// The base state.\n\t\tbase,\n\t\t// The base proxy.\n\t\tdraft: null as any, // set below\n\t\t// Any property proxies.\n\t\tdrafts: {},\n\t\t// The base copy with any updated values.\n\t\tcopy: null,\n\t\t// Called by the `produce` function.\n\t\trevoke: null as any,\n\t\tisManual: false\n\t}\n\n\t// the traps must target something, a bit like the 'real' base.\n\t// but also, we need to be able to determine from the target what the relevant state is\n\t// (to avoid creating traps per instance to capture the state in closure,\n\t// and to avoid creating weird hidden properties as well)\n\t// So the trick is to use 'state' as the actual 'target'! (and make sure we intercept everything)\n\t// Note that in the case of an array, we put the state in an array to have better Reflect defaults ootb\n\tlet target: T = state as any\n\tlet traps: ProxyHandler<object | Array<any>> = objectTraps\n\tif (isArray) {\n\t\ttarget = [state] as any\n\t\ttraps = arrayTraps\n\t}\n\n\t// TODO: optimization: might be faster, cheaper if we created a non-revocable proxy\n\t// and administrate revoking ourselves\n\tconst {revoke, proxy} = Proxy.revocable(target, traps)\n\tstate.draft = proxy as any\n\tstate.revoke = revoke\n\treturn proxy as any\n}\n\n/**\n * Object drafts\n */\nconst objectTraps: ProxyHandler<ProxyState> = {\n\tget(state, prop) {\n\t\tif (prop === DRAFT_STATE) return state\n\t\tlet {drafts} = state\n\n\t\t// Check for existing draft in unmodified state.\n\t\tif (!state.modified && has(drafts, prop)) {\n\t\t\treturn drafts![prop as any]\n\t\t}\n\n\t\tconst value = latest(state)[prop]\n\t\tif (state.finalized || !isDraftable(value)) {\n\t\t\treturn value\n\t\t}\n\n\t\t// Check for existing draft in modified state.\n\t\tif (state.modified) {\n\t\t\t// Assigned values are never drafted. This catches any drafts we created, too.\n\t\t\tif (value !== peek(state.base, prop)) return value\n\t\t\t// Store drafts on the copy (when one exists).\n\t\t\t// @ts-ignore\n\t\t\tdrafts = state.copy\n\t\t}\n\n\t\treturn (drafts![prop as any] = state.scope.immer.createProxy(value, state))\n\t},\n\thas(state, prop) {\n\t\treturn prop in latest(state)\n\t},\n\townKeys(state) {\n\t\treturn Reflect.ownKeys(latest(state))\n\t},\n\tset(state, prop: string /* strictly not, but helps TS */, value) {\n\t\tif (!state.modified) {\n\t\t\tconst baseValue = peek(state.base, prop)\n\t\t\t// Optimize based on value's truthiness. Truthy values are guaranteed to\n\t\t\t// never be undefined, so we can avoid the `in` operator. Lastly, truthy\n\t\t\t// values may be drafts, but falsy values are never drafts.\n\t\t\tconst isUnchanged = value\n\t\t\t\t? is(baseValue, value) || value === state.drafts![prop]\n\t\t\t\t: is(baseValue, value) && prop in state.base\n\t\t\tif (isUnchanged) return true\n\t\t\tprepareCopy(state)\n\t\t\tmarkChanged(state)\n\t\t}\n\t\tstate.assigned[prop] = true\n\t\t// @ts-ignore\n\t\tstate.copy![prop] = value\n\t\treturn true\n\t},\n\tdeleteProperty(state, prop: string) {\n\t\t// The `undefined` check is a fast path for pre-existing keys.\n\t\tif (peek(state.base, prop) !== undefined || prop in state.base) {\n\t\t\tstate.assigned[prop] = false\n\t\t\tprepareCopy(state)\n\t\t\tmarkChanged(state)\n\t\t} else if (state.assigned[prop]) {\n\t\t\t// if an originally not assigned property was deleted\n\t\t\tdelete state.assigned[prop]\n\t\t}\n\t\t// @ts-ignore\n\t\tif (state.copy) delete state.copy[prop]\n\t\treturn true\n\t},\n\t// Note: We never coerce `desc.value` into an Immer draft, because we can't make\n\t// the same guarantee in ES5 mode.\n\tgetOwnPropertyDescriptor(state, prop) {\n\t\tconst owner = latest(state)\n\t\tconst desc = Reflect.getOwnPropertyDescriptor(owner, prop)\n\t\tif (desc) {\n\t\t\tdesc.writable = true\n\t\t\tdesc.configurable =\n\t\t\t\tstate.type !== ProxyType.ProxyArray || prop !== \"length\"\n\t\t}\n\t\treturn desc\n\t},\n\tdefineProperty() {\n\t\tthrow new Error(\"Object.defineProperty() cannot be used on an Immer draft\") // prettier-ignore\n\t},\n\tgetPrototypeOf(state) {\n\t\treturn Object.getPrototypeOf(state.base)\n\t},\n\tsetPrototypeOf() {\n\t\tthrow new Error(\"Object.setPrototypeOf() cannot be used on an Immer draft\") // prettier-ignore\n\t}\n}\n\n/**\n * Array drafts\n */\n\nconst arrayTraps: ProxyHandler<[ProxyArrayState]> = {}\neach(objectTraps, (key, fn) => {\n\t// @ts-ignore\n\tarrayTraps[key] = function() {\n\t\targuments[0] = arguments[0][0]\n\t\treturn fn.apply(this, arguments)\n\t}\n})\narrayTraps.deleteProperty = function(state, prop) {\n\tif (isNaN(parseInt(prop as any))) {\n\t\tthrow new Error(\"Immer only supports deleting array indices\") // prettier-ignore\n\t}\n\treturn objectTraps.deleteProperty!.call(this, state[0], prop)\n}\narrayTraps.set = function(state, prop, value) {\n\tif (prop !== \"length\" && isNaN(parseInt(prop as any))) {\n\t\tthrow new Error(\"Immer only supports setting array indices and the 'length' property\") // prettier-ignore\n\t}\n\treturn objectTraps.set!.call(this, state[0], prop, value, state[0])\n}\n\n/**\n * Map drafts\n */\n\n// Access a property without creating an Immer draft.\nfunction peek(draft: Drafted, prop: PropertyKey): any {\n\tconst state = draft[DRAFT_STATE]\n\tconst desc = Reflect.getOwnPropertyDescriptor(\n\t\tstate ? latest(state) : draft,\n\t\tprop\n\t)\n\treturn desc && desc.value\n}\n\nexport function markChanged(state: ImmerState) {\n\tif (!state.modified) {\n\t\tstate.modified = true\n\t\tif (\n\t\t\tstate.type === ProxyType.ProxyObject ||\n\t\t\tstate.type === ProxyType.ProxyArray\n\t\t) {\n\t\t\tconst copy = (state.copy = shallowCopy(state.base))\n\t\t\teach(state.drafts!, (key, value) => {\n\t\t\t\t// @ts-ignore\n\t\t\t\tcopy[key] = value\n\t\t\t})\n\t\t\tstate.drafts = undefined\n\t\t}\n\n\t\tif (state.parent) {\n\t\t\tmarkChanged(state.parent)\n\t\t}\n\t}\n}\n\nfunction prepareCopy(state: ProxyState) {\n\tif (!state.copy) {\n\t\tstate.copy = shallowCopy(state.base)\n\t}\n}\n","\"use strict\"\nimport {\n\teach,\n\thas,\n\tis,\n\tisDraft,\n\tisDraftable,\n\tisEnumerable,\n\tshallowCopy,\n\tlatest,\n\tcreateHiddenProperty,\n\tImmerScope,\n\tImmerState,\n\tDrafted,\n\tAnyObject,\n\tObjectish,\n\tImmerBaseState,\n\tAnyArray,\n\tProxyType,\n\tMapState,\n\tSetState,\n\tDRAFT_STATE\n} from \"./internal\"\n\ninterface ES5BaseState extends ImmerBaseState {\n\tfinalizing: boolean\n\tassigned: {[key: string]: any}\n\tparent?: ImmerState\n\trevoked: boolean\n}\n\nexport interface ES5ObjectState extends ES5BaseState {\n\ttype: ProxyType.ES5Object\n\tdraft: Drafted<AnyObject, ES5ObjectState>\n\tbase: AnyObject\n\tcopy: AnyObject | null\n}\n\nexport interface ES5ArrayState extends ES5BaseState {\n\ttype: ProxyType.ES5Array\n\tdraft: Drafted<AnyObject, ES5ArrayState>\n\tbase: AnyArray\n\tcopy: AnyArray | null\n}\n\ntype ES5State = ES5ArrayState | ES5ObjectState\n\nexport function willFinalizeES5(\n\tscope: ImmerScope,\n\tresult: any,\n\tisReplaced: boolean\n) {\n\tscope.drafts!.forEach(draft => {\n\t\tdraft[DRAFT_STATE].finalizing = true\n\t})\n\tif (!isReplaced) {\n\t\tif (scope.patches) {\n\t\t\tmarkChangesRecursively(scope.drafts![0])\n\t\t}\n\t\t// This is faster when we don't care about which attributes changed.\n\t\tmarkChangesSweep(scope.drafts)\n\t}\n\t// When a child draft is returned, look for changes.\n\telse if (isDraft(result) && result[DRAFT_STATE].scope === scope) {\n\t\tmarkChangesSweep(scope.drafts)\n\t}\n}\n\nexport function createES5Proxy<T>(\n\tbase: T,\n\tparent?: ImmerState\n): Drafted<T, ES5ObjectState | ES5ArrayState> {\n\tconst isArray = Array.isArray(base)\n\tconst draft = clonePotentialDraft(base)\n\n\teach(draft, prop => {\n\t\tproxyProperty(draft, prop, isArray || isEnumerable(base, prop))\n\t})\n\n\tconst state: ES5ObjectState | ES5ArrayState = {\n\t\ttype: isArray ? ProxyType.ES5Array : (ProxyType.ES5Object as any),\n\t\tscope: parent ? parent.scope : ImmerScope.current!,\n\t\tmodified: false,\n\t\tfinalizing: false,\n\t\tfinalized: false,\n\t\tassigned: {},\n\t\tparent,\n\t\tbase,\n\t\tdraft,\n\t\tcopy: null,\n\t\trevoked: false,\n\t\tisManual: false\n\t}\n\n\tcreateHiddenProperty(draft, DRAFT_STATE, state)\n\treturn draft\n}\n\n// Access a property without creating an Immer draft.\nfunction peek(draft: Drafted, prop: PropertyKey) {\n\tconst state = draft[DRAFT_STATE]\n\tif (state && !state.finalizing) {\n\t\tstate.finalizing = true\n\t\tconst value = draft[prop]\n\t\tstate.finalizing = false\n\t\treturn value\n\t}\n\treturn draft[prop]\n}\n\nfunction get(state: ES5State, prop: string | number) {\n\tassertUnrevoked(state)\n\tconst value = peek(latest(state), prop)\n\tif (state.finalizing) return value\n\t// Create a draft if the value is unmodified.\n\tif (value === peek(state.base, prop) && isDraftable(value)) {\n\t\tprepareCopy(state)\n\t\t// @ts-ignore\n\t\treturn (state.copy![prop] = state.scope.immer.createProxy(value, state))\n\t}\n\treturn value\n}\n\nfunction set(state: ES5State, prop: string | number, value: any) {\n\tassertUnrevoked(state)\n\tstate.assigned[prop] = true\n\tif (!state.modified) {\n\t\tif (is(value, peek(latest(state), prop))) return\n\t\tmarkChangedES5(state)\n\t\tprepareCopy(state)\n\t}\n\t// @ts-ignore\n\tstate.copy![prop] = value\n}\n\nexport function markChangedES5(state: ImmerState) {\n\tif (!state.modified) {\n\t\tstate.modified = true\n\t\tif (state.parent) markChangedES5(state.parent)\n\t}\n}\n\nfunction prepareCopy(state: ES5State) {\n\tif (!state.copy) state.copy = clonePotentialDraft(state.base)\n}\n\nfunction clonePotentialDraft(base: Objectish) {\n\tconst state = base && (base as any)[DRAFT_STATE]\n\tif (state) {\n\t\tstate.finalizing = true\n\t\tconst draft = shallowCopy(state.draft, true)\n\t\tstate.finalizing = false\n\t\treturn draft\n\t}\n\treturn shallowCopy(base)\n}\n\n// property descriptors are recycled to make sure we don't create a get and set closure per property,\n// but share them all instead\nconst descriptors: {[prop: string]: PropertyDescriptor} = {}\n\nfunction proxyProperty(\n\tdraft: Drafted<any, ES5State>,\n\tprop: string | number,\n\tenumerable: boolean\n) {\n\tlet desc = descriptors[prop]\n\tif (desc) {\n\t\tdesc.enumerable = enumerable\n\t} else {\n\t\tdescriptors[prop] = desc = {\n\t\t\tconfigurable: true,\n\t\t\tenumerable,\n\t\t\tget(this: any) {\n\t\t\t\treturn get(this[DRAFT_STATE], prop)\n\t\t\t},\n\t\t\tset(this: any, value) {\n\t\t\t\tset(this[DRAFT_STATE], prop, value)\n\t\t\t}\n\t\t}\n\t}\n\tObject.defineProperty(draft, prop, desc)\n}\n\nexport function assertUnrevoked(state: ES5State | MapState | SetState) {\n\tif (state.revoked === true)\n\t\tthrow new Error(\n\t\t\t\"Cannot use a proxy that has been revoked. Did you pass an object from inside an immer function to an async process? \" +\n\t\t\t\tJSON.stringify(latest(state))\n\t\t)\n}\n\n// This looks expensive, but only proxies are visited, and only objects without known changes are scanned.\nfunction markChangesSweep(drafts: Drafted<any, ImmerState>[]) {\n\t// The natural order of drafts in the `scope` array is based on when they\n\t// were accessed. By processing drafts in reverse natural order, we have a\n\t// better chance of processing leaf nodes first. When a leaf node is known to\n\t// have changed, we can avoid any traversal of its ancestor nodes.\n\tfor (let i = drafts.length - 1; i >= 0; i--) {\n\t\tconst state = drafts[i][DRAFT_STATE]\n\t\tif (!state.modified) {\n\t\t\tswitch (state.type) {\n\t\t\t\tcase ProxyType.ES5Array:\n\t\t\t\t\tif (hasArrayChanges(state)) markChangedES5(state)\n\t\t\t\t\tbreak\n\t\t\t\tcase ProxyType.ES5Object:\n\t\t\t\t\tif (hasObjectChanges(state)) markChangedES5(state)\n\t\t\t\t\tbreak\n\t\t\t}\n\t\t}\n\t}\n}\n\nfunction markChangesRecursively(object: any) {\n\tif (!object || typeof object !== \"object\") return\n\tconst state = object[DRAFT_STATE]\n\tif (!state) return\n\tconst {base, draft, assigned, type} = state\n\tif (type === ProxyType.ES5Object) {\n\t\t// Look for added keys.\n\t\t// TODO: looks quite duplicate to hasObjectChanges,\n\t\t// probably there is a faster way to detect changes, as sweep + recurse seems to do some\n\t\t// unnecessary work.\n\t\t// also: probably we can store the information we detect here, to speed up tree finalization!\n\t\teach(draft, key => {\n\t\t\tif ((key as any) === DRAFT_STATE) return\n\t\t\t// The `undefined` check is a fast path for pre-existing keys.\n\t\t\tif (base[key] === undefined && !has(base, key)) {\n\t\t\t\tassigned[key] = true\n\t\t\t\tmarkChangedES5(state)\n\t\t\t} else if (!assigned[key]) {\n\t\t\t\t// Only untouched properties trigger recursion.\n\t\t\t\tmarkChangesRecursively(draft[key])\n\t\t\t}\n\t\t})\n\t\t// Look for removed keys.\n\t\teach(base, key => {\n\t\t\t// The `undefined` check is a fast path for pre-existing keys.\n\t\t\tif (draft[key] === undefined && !has(draft, key)) {\n\t\t\t\tassigned[key] = false\n\t\t\t\tmarkChangedES5(state)\n\t\t\t}\n\t\t})\n\t} else if (type === ProxyType.ES5Array) {\n\t\tif (hasArrayChanges(state)) {\n\t\t\tmarkChangedES5(state)\n\t\t\tassigned.length = true\n\t\t}\n\n\t\tif (draft.length < base.length) {\n\t\t\tfor (let i = draft.length; i < base.length; i++) assigned[i] = false\n\t\t} else {\n\t\t\tfor (let i = base.length; i < draft.length; i++) assigned[i] = true\n\t\t}\n\n\t\t// Minimum count is enough, the other parts has been processed.\n\t\tconst min = Math.min(draft.length, base.length)\n\n\t\tfor (let i = 0; i < min; i++) {\n\t\t\t// Only untouched indices trigger recursion.\n\t\t\tif (assigned[i] === undefined) markChangesRecursively(draft[i])\n\t\t}\n\t}\n}\n\nfunction hasObjectChanges(state: ES5ObjectState) {\n\tconst {base, draft} = state\n\n\t// Search for added keys and changed keys. Start at the back, because\n\t// non-numeric keys are ordered by time of definition on the object.\n\tconst keys = Object.keys(draft)\n\tfor (let i = keys.length - 1; i >= 0; i--) {\n\t\tconst key = keys[i]\n\t\tconst baseValue = base[key]\n\t\t// The `undefined` check is a fast path for pre-existing keys.\n\t\tif (baseValue === undefined && !has(base, key)) {\n\t\t\treturn true\n\t\t}\n\t\t// Once a base key is deleted, future changes go undetected, because its\n\t\t// descriptor is erased. This branch detects any missed changes.\n\t\telse {\n\t\t\tconst value = draft[key]\n\t\t\tconst state = value && value[DRAFT_STATE]\n\t\t\tif (state ? state.base !== baseValue : !is(value, baseValue)) {\n\t\t\t\treturn true\n\t\t\t}\n\t\t}\n\t}\n\n\t// At this point, no keys were added or changed.\n\t// Compare key count to determine if keys were deleted.\n\treturn keys.length !== Object.keys(base).length\n}\n\nfunction hasArrayChanges(state: ES5ArrayState) {\n\tconst {draft} = state\n\tif (draft.length !== state.base.length) return true\n\t// See #116\n\t// If we first shorten the length, our array interceptors will be removed.\n\t// If after that new items are added, result in the same original length,\n\t// those last items will have no intercepting property.\n\t// So if there is no own descriptor on the last position, we know that items were removed and added\n\t// N.B.: splice, unshift, etc only shift values around, but not prop descriptors, so we only have to check\n\t// the last one\n\tconst descriptor = Object.getOwnPropertyDescriptor(draft, draft.length - 1)\n\t// descriptor can be null, but only for newly created sparse arrays, eg. new Array(10)\n\tif (descriptor && !descriptor.get) return true\n\t// For all other cases, we don't have to compare, as they would have been picked up by the index setters\n\treturn false\n}\n","import {\n\t__extends,\n\tImmerBaseState,\n\tProxyType,\n\tAnyMap,\n\tDrafted,\n\tImmerState,\n\tDRAFT_STATE,\n\tImmerScope,\n\tlatest,\n\tassertUnrevoked,\n\tisDraftable,\n\titeratorSymbol\n} from \"./internal\"\n\nexport interface MapState extends ImmerBaseState {\n\ttype: ProxyType.Map\n\tcopy: AnyMap | undefined\n\tassigned: Map<any, boolean> | undefined\n\tbase: AnyMap\n\trevoked: boolean\n\tdraft: Drafted<AnyMap, MapState>\n}\n\nconst DraftMap = (function(_super) {\n\tif (!_super) {\n\t\t/* istanbul ignore next */\n\t\tthrow new Error(\"Map is not polyfilled\")\n\t}\n\t__extends(DraftMap, _super)\n\t// Create class manually, cause #502\n\tfunction DraftMap(this: any, target: AnyMap, parent?: ImmerState): any {\n\t\tthis[DRAFT_STATE] = {\n\t\t\ttype: ProxyType.Map,\n\t\t\tparent,\n\t\t\tscope: parent ? parent.scope : ImmerScope.current!,\n\t\t\tmodified: false,\n\t\t\tfinalized: false,\n\t\t\tcopy: undefined,\n\t\t\tassigned: undefined,\n\t\t\tbase: target,\n\t\t\tdraft: this as any,\n\t\t\tisManual: false,\n\t\t\trevoked: false\n\t\t}\n\t\treturn this\n\t}\n\tconst p = DraftMap.prototype\n\n\t// TODO: smaller build size if we create a util for Object.defineProperty\n\tObject.defineProperty(p, \"size\", {\n\t\tget: function() {\n\t\t\treturn latest(this[DRAFT_STATE]).size\n\t\t},\n\t\tenumerable: true,\n\t\tconfigurable: true\n\t})\n\n\tp.has = function(key: any): boolean {\n\t\treturn latest(this[DRAFT_STATE]).has(key)\n\t}\n\n\tp.set = function(key: any, value: any) {\n\t\tconst state = this[DRAFT_STATE]\n\t\tassertUnrevoked(state)\n\t\tif (latest(state).get(key) !== value) {\n\t\t\tprepareCopy(state)\n\t\t\tstate.scope.immer.markChanged(state)\n\t\t\tstate.assigned!.set(key, true)\n\t\t\tstate.copy!.set(key, value)\n\t\t\tstate.assigned!.set(key, true)\n\t\t}\n\t\treturn this\n\t}\n\n\tp.delete = function(key: any): boolean {\n\t\tif (!this.has(key)) {\n\t\t\treturn false\n\t\t}\n\n\t\tconst state = this[DRAFT_STATE]\n\t\tassertUnrevoked(state)\n\t\tprepareCopy(state)\n\t\tstate.scope.immer.markChanged(state)\n\t\tstate.assigned!.set(key, false)\n\t\tstate.copy!.delete(key)\n\t\treturn true\n\t}\n\n\tp.clear = function() {\n\t\tconst state = this[DRAFT_STATE]\n\t\tassertUnrevoked(state)\n\t\tprepareCopy(state)\n\t\tstate.scope.immer.markChanged(state)\n\t\tstate.assigned = new Map()\n\t\treturn state.copy!.clear()\n\t}\n\n\tp.forEach = function(\n\t\tcb: (value: any, key: any, self: any) => void,\n\t\tthisArg?: any\n\t) {\n\t\tconst state = this[DRAFT_STATE]\n\t\tlatest(state).forEach((_value: any, key: any, _map: any) => {\n\t\t\tcb.call(thisArg, this.get(key), key, this)\n\t\t})\n\t}\n\n\tp.get = function(key: any): any {\n\t\tconst state = this[DRAFT_STATE]\n\t\tassertUnrevoked(state)\n\t\tconst value = latest(state).get(key)\n\t\tif (state.finalized || !isDraftable(value)) {\n\t\t\treturn value\n\t\t}\n\t\tif (value !== state.base.get(key)) {\n\t\t\treturn value // either already drafted or reassigned\n\t\t}\n\t\t// despite what it looks, this creates a draft only once, see above condition\n\t\tconst draft = state.scope.immer.createProxy(value, state)\n\t\tprepareCopy(state)\n\t\tstate.copy!.set(key, draft)\n\t\treturn draft\n\t}\n\n\tp.keys = function(): IterableIterator<any> {\n\t\treturn latest(this[DRAFT_STATE]).keys()\n\t}\n\n\tp.values = function(): IterableIterator<any> {\n\t\tconst iterator = this.keys()\n\t\treturn {\n\t\t\t[iteratorSymbol]: () => this.values(),\n\t\t\tnext: () => {\n\t\t\t\tconst r = iterator.next()\n\t\t\t\t/* istanbul ignore next */\n\t\t\t\tif (r.done) return r\n\t\t\t\tconst value = this.get(r.value)\n\t\t\t\treturn {\n\t\t\t\t\tdone: false,\n\t\t\t\t\tvalue\n\t\t\t\t}\n\t\t\t}\n\t\t} as any\n\t}\n\n\tp.entries = function(): IterableIterator<[any, any]> {\n\t\tconst iterator = this.keys()\n\t\treturn {\n\t\t\t[iteratorSymbol]: () => this.entries(),\n\t\t\tnext: () => {\n\t\t\t\tconst r = iterator.next()\n\t\t\t\t/* istanbul ignore next */\n\t\t\t\tif (r.done) return r\n\t\t\t\tconst value = this.get(r.value)\n\t\t\t\treturn {\n\t\t\t\t\tdone: false,\n\t\t\t\t\tvalue: [r.value, value]\n\t\t\t\t}\n\t\t\t}\n\t\t} as any\n\t}\n\n\tp[iteratorSymbol] = function() {\n\t\treturn this.entries()\n\t}\n\n\treturn DraftMap\n})(Map)\n\nexport function proxyMap<T extends AnyMap>(\n\ttarget: T,\n\tparent?: ImmerState\n): T & {[DRAFT_STATE]: MapState} {\n\t// @ts-ignore\n\treturn new DraftMap(target, parent)\n}\n\nfunction prepareCopy(state: MapState) {\n\tif (!state.copy) {\n\t\tstate.assigned = new Map()\n\t\tstate.copy = new Map(state.base)\n\t}\n}\n","import {\n\t__extends,\n\tImmerBaseState,\n\tProxyType,\n\tAnySet,\n\tDrafted,\n\tImmerState,\n\tDRAFT_STATE,\n\tImmerScope,\n\tlatest,\n\tassertUnrevoked,\n\titeratorSymbol,\n\tisDraftable\n} from \"./internal\"\n\nexport interface SetState extends ImmerBaseState {\n\ttype: ProxyType.Set\n\tcopy: AnySet | undefined\n\tbase: AnySet\n\tdrafts: Map<any, Drafted> // maps the original value to the draft value in the new set\n\trevoked: boolean\n\tdraft: Drafted<AnySet, SetState>\n}\n\nconst DraftSet = (function(_super) {\n\tif (!_super) {\n\t\t/* istanbul ignore next */\n\t\tthrow new Error(\"Set is not polyfilled\")\n\t}\n\t__extends(DraftSet, _super)\n\t// Create class manually, cause #502\n\tfunction DraftSet(this: any, target: AnySet, parent?: ImmerState) {\n\t\tthis[DRAFT_STATE] = {\n\t\t\ttype: ProxyType.Set,\n\t\t\tparent,\n\t\t\tscope: parent ? parent.scope : ImmerScope.current!,\n\t\t\tmodified: false,\n\t\t\tfinalized: false,\n\t\t\tcopy: undefined,\n\t\t\tbase: target,\n\t\t\tdraft: this,\n\t\t\tdrafts: new Map(),\n\t\t\trevoked: false,\n\t\t\tisManual: false\n\t\t}\n\t\treturn this\n\t}\n\tconst p = DraftSet.prototype\n\n\tObject.defineProperty(p, \"size\", {\n\t\tget: function() {\n\t\t\treturn latest(this[DRAFT_STATE]).size\n\t\t},\n\t\tenumerable: true,\n\t\tconfigurable: true\n\t})\n\n\tp.has = function(value: any): boolean {\n\t\tconst state = this[DRAFT_STATE]\n\t\tassertUnrevoked(state)\n\t\t// bit of trickery here, to be able to recognize both the value, and the draft of its value\n\t\tif (!state.copy) {\n\t\t\treturn state.base.has(value)\n\t\t}\n\t\tif (state.copy.has(value)) return true\n\t\tif (state.drafts.has(value) && state.copy.has(state.drafts.get(value)))\n\t\t\treturn true\n\t\treturn false\n\t}\n\n\tp.add = function(value: any): any {\n\t\tconst state = this[DRAFT_STATE]\n\t\tassertUnrevoked(state)\n\t\tif (state.copy) {\n\t\t\tstate.copy.add(value)\n\t\t} else if (!state.base.has(value)) {\n\t\t\tprepareCopy(state)\n\t\t\tstate.scope.immer.markChanged(state)\n\t\t\tstate.copy!.add(value)\n\t\t}\n\t\treturn this\n\t}\n\n\tp.delete = function(value: any): any {\n\t\tif (!this.has(value)) {\n\t\t\treturn false\n\t\t}\n\n\t\tconst state = this[DRAFT_STATE]\n\t\tassertUnrevoked(state)\n\t\tprepareCopy(state)\n\t\tstate.scope.immer.markChanged(state)\n\t\treturn (\n\t\t\tstate.copy!.delete(value) ||\n\t\t\t(state.drafts.has(value)\n\t\t\t\t? state.copy!.delete(state.drafts.get(value))\n\t\t\t\t: /* istanbul ignore next */ false)\n\t\t)\n\t}\n\n\tp.clear = function() {\n\t\tconst state = this[DRAFT_STATE]\n\t\tassertUnrevoked(state)\n\t\tprepareCopy(state)\n\t\tstate.scope.immer.markChanged(state)\n\t\treturn state.copy!.clear()\n\t}\n\n\tp.values = function(): IterableIterator<any> {\n\t\tconst state = this[DRAFT_STATE]\n\t\tassertUnrevoked(state)\n\t\tprepareCopy(state)\n\t\treturn state.copy!.values()\n\t}\n\n\tp.entries = function entries(): IterableIterator<[any, any]> {\n\t\tconst state = this[DRAFT_STATE]\n\t\tassertUnrevoked(state)\n\t\tprepareCopy(state)\n\t\treturn state.copy!.entries()\n\t}\n\n\tp.keys = function(): IterableIterator<any> {\n\t\treturn this.values()\n\t}\n\n\tp[iteratorSymbol] = function() {\n\t\treturn this.values()\n\t}\n\n\tp.forEach = function forEach(cb: any, thisArg?: any) {\n\t\tconst iterator = this.values()\n\t\tlet result = iterator.next()\n\t\twhile (!result.done) {\n\t\t\tcb.call(thisArg, result.value, result.value, this)\n\t\t\tresult = iterator.next()\n\t\t}\n\t}\n\n\treturn DraftSet\n})(Set)\n\nexport function proxySet<T extends AnySet>(\n\ttarget: T,\n\tparent?: ImmerState\n): T & {[DRAFT_STATE]: SetState} {\n\t// @ts-ignore\n\treturn new DraftSet(target, parent)\n}\n\nfunction prepareCopy(state: SetState) {\n\tif (!state.copy) {\n\t\t// create drafts for all entries to preserve insertion order\n\t\tstate.copy = new Set()\n\t\tstate.base.forEach(value => {\n\t\t\tif (isDraftable(value)) {\n\t\t\t\tconst draft = state.scope.immer.createProxy(value, state)\n\t\t\t\tstate.drafts.set(value, draft)\n\t\t\t\tstate.copy!.add(draft)\n\t\t\t} else {\n\t\t\t\tstate.copy!.add(value)\n\t\t\t}\n\t\t})\n\t}\n}\n","/*! *****************************************************************************\r\nCopyright (c) Microsoft Corporation. All rights reserved.\r\nLicensed under the Apache License, Version 2.0 (the \"License\"); you may not use\r\nthis file except in compliance with the License. You may obtain a copy of the\r\nLicense at http://www.apache.org/licenses/LICENSE-2.0\r\n\r\nTHIS CODE IS PROVIDED ON AN *AS IS* BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\r\nKIND, EITHER EXPRESS OR IMPLIED, INCLUDING WITHOUT LIMITATION ANY IMPLIED\r\nWARRANTIES OR CONDITIONS OF TITLE, FITNESS FOR A PARTICULAR PURPOSE,\r\nMERCHANTABLITY OR NON-INFRINGEMENT.\r\n\r\nSee the Apache Version 2.0 License for specific language governing permissions\r\nand limitations under the License.\r\n***************************************************************************** */\r\n/* global Reflect, Promise */\r\n\r\nvar extendStatics = function(d, b) {\r\n    extendStatics = Object.setPrototypeOf ||\r\n        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\r\n        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\r\n    return extendStatics(d, b);\r\n};\r\n\r\nexport function __extends(d, b) {\r\n    extendStatics(d, b);\r\n    function __() { this.constructor = d; }\r\n    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\r\n}\r\n\r\nexport var __assign = function() {\r\n    __assign = Object.assign || function __assign(t) {\r\n        for (var s, i = 1, n = arguments.length; i < n; i++) {\r\n            s = arguments[i];\r\n            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p)) t[p] = s[p];\r\n        }\r\n        return t;\r\n    }\r\n    return __assign.apply(this, arguments);\r\n}\r\n\r\nexport function __rest(s, e) {\r\n    var t = {};\r\n    for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p) && e.indexOf(p) < 0)\r\n        t[p] = s[p];\r\n    if (s != null && typeof Object.getOwnPropertySymbols === \"function\")\r\n        for (var i = 0, p = Object.getOwnPropertySymbols(s); i < p.length; i++) {\r\n            if (e.indexOf(p[i]) < 0 && Object.prototype.propertyIsEnumerable.call(s, p[i]))\r\n                t[p[i]] = s[p[i]];\r\n        }\r\n    return t;\r\n}\r\n\r\nexport function __decorate(decorators, target, key, desc) {\r\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\r\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\r\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\r\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\r\n}\r\n\r\nexport function __param(paramIndex, decorator) {\r\n    return function (target, key) { decorator(target, key, paramIndex); }\r\n}\r\n\r\nexport function __metadata(metadataKey, metadataValue) {\r\n    if (typeof Reflect === \"object\" && typeof Reflect.metadata === \"function\") return Reflect.metadata(metadataKey, metadataValue);\r\n}\r\n\r\nexport function __awaiter(thisArg, _arguments, P, generator) {\r\n    return new (P || (P = Promise))(function (resolve, reject) {\r\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\r\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\r\n        function step(result) { result.done ? resolve(result.value) : new P(function (resolve) { resolve(result.value); }).then(fulfilled, rejected); }\r\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\r\n    });\r\n}\r\n\r\nexport function __generator(thisArg, body) {\r\n    var _ = { label: 0, sent: function() { if (t[0] & 1) throw t[1]; return t[1]; }, trys: [], ops: [] }, f, y, t, g;\r\n    return g = { next: verb(0), \"throw\": verb(1), \"return\": verb(2) }, typeof Symbol === \"function\" && (g[Symbol.iterator] = function() { return this; }), g;\r\n    function verb(n) { return function (v) { return step([n, v]); }; }\r\n    function step(op) {\r\n        if (f) throw new TypeError(\"Generator is already executing.\");\r\n        while (_) try {\r\n            if (f = 1, y && (t = op[0] & 2 ? y[\"return\"] : op[0] ? y[\"throw\"] || ((t = y[\"return\"]) && t.call(y), 0) : y.next) && !(t = t.call(y, op[1])).done) return t;\r\n            if (y = 0, t) op = [op[0] & 2, t.value];\r\n            switch (op[0]) {\r\n                case 0: case 1: t = op; break;\r\n                case 4: _.label++; return { value: op[1], done: false };\r\n                case 5: _.label++; y = op[1]; op = [0]; continue;\r\n                case 7: op = _.ops.pop(); _.trys.pop(); continue;\r\n                default:\r\n                    if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) { _ = 0; continue; }\r\n                    if (op[0] === 3 && (!t || (op[1] > t[0] && op[1] < t[3]))) { _.label = op[1]; break; }\r\n                    if (op[0] === 6 && _.label < t[1]) { _.label = t[1]; t = op; break; }\r\n                    if (t && _.label < t[2]) { _.label = t[2]; _.ops.push(op); break; }\r\n                    if (t[2]) _.ops.pop();\r\n                    _.trys.pop(); continue;\r\n            }\r\n            op = body.call(thisArg, _);\r\n        } catch (e) { op = [6, e]; y = 0; } finally { f = t = 0; }\r\n        if (op[0] & 5) throw op[1]; return { value: op[0] ? op[1] : void 0, done: true };\r\n    }\r\n}\r\n\r\nexport function __exportStar(m, exports) {\r\n    for (var p in m) if (!exports.hasOwnProperty(p)) exports[p] = m[p];\r\n}\r\n\r\nexport function __values(o) {\r\n    var m = typeof Symbol === \"function\" && o[Symbol.iterator], i = 0;\r\n    if (m) return m.call(o);\r\n    return {\r\n        next: function () {\r\n            if (o && i >= o.length) o = void 0;\r\n            return { value: o && o[i++], done: !o };\r\n        }\r\n    };\r\n}\r\n\r\nexport function __read(o, n) {\r\n    var m = typeof Symbol === \"function\" && o[Symbol.iterator];\r\n    if (!m) return o;\r\n    var i = m.call(o), r, ar = [], e;\r\n    try {\r\n        while ((n === void 0 || n-- > 0) && !(r = i.next()).done) ar.push(r.value);\r\n    }\r\n    catch (error) { e = { error: error }; }\r\n    finally {\r\n        try {\r\n            if (r && !r.done && (m = i[\"return\"])) m.call(i);\r\n        }\r\n        finally { if (e) throw e.error; }\r\n    }\r\n    return ar;\r\n}\r\n\r\nexport function __spread() {\r\n    for (var ar = [], i = 0; i < arguments.length; i++)\r\n        ar = ar.concat(__read(arguments[i]));\r\n    return ar;\r\n}\r\n\r\nexport function __spreadArrays() {\r\n    for (var s = 0, i = 0, il = arguments.length; i < il; i++) s += arguments[i].length;\r\n    for (var r = Array(s), k = 0, i = 0; i < il; i++)\r\n        for (var a = arguments[i], j = 0, jl = a.length; j < jl; j++, k++)\r\n            r[k] = a[j];\r\n    return r;\r\n};\r\n\r\nexport function __await(v) {\r\n    return this instanceof __await ? (this.v = v, this) : new __await(v);\r\n}\r\n\r\nexport function __asyncGenerator(thisArg, _arguments, generator) {\r\n    if (!Symbol.asyncIterator) throw new TypeError(\"Symbol.asyncIterator is not defined.\");\r\n    var g = generator.apply(thisArg, _arguments || []), i, q = [];\r\n    return i = {}, verb(\"next\"), verb(\"throw\"), verb(\"return\"), i[Symbol.asyncIterator] = function () { return this; }, i;\r\n    function verb(n) { if (g[n]) i[n] = function (v) { return new Promise(function (a, b) { q.push([n, v, a, b]) > 1 || resume(n, v); }); }; }\r\n    function resume(n, v) { try { step(g[n](v)); } catch (e) { settle(q[0][3], e); } }\r\n    function step(r) { r.value instanceof __await ? Promise.resolve(r.value.v).then(fulfill, reject) : settle(q[0][2], r); }\r\n    function fulfill(value) { resume(\"next\", value); }\r\n    function reject(value) { resume(\"throw\", value); }\r\n    function settle(f, v) { if (f(v), q.shift(), q.length) resume(q[0][0], q[0][1]); }\r\n}\r\n\r\nexport function __asyncDelegator(o) {\r\n    var i, p;\r\n    return i = {}, verb(\"next\"), verb(\"throw\", function (e) { throw e; }), verb(\"return\"), i[Symbol.iterator] = function () { return this; }, i;\r\n    function verb(n, f) { i[n] = o[n] ? function (v) { return (p = !p) ? { value: __await(o[n](v)), done: n === \"return\" } : f ? f(v) : v; } : f; }\r\n}\r\n\r\nexport function __asyncValues(o) {\r\n    if (!Symbol.asyncIterator) throw new TypeError(\"Symbol.asyncIterator is not defined.\");\r\n    var m = o[Symbol.asyncIterator], i;\r\n    return m ? m.call(o) : (o = typeof __values === \"function\" ? __values(o) : o[Symbol.iterator](), i = {}, verb(\"next\"), verb(\"throw\"), verb(\"return\"), i[Symbol.asyncIterator] = function () { return this; }, i);\r\n    function verb(n) { i[n] = o[n] && function (v) { return new Promise(function (resolve, reject) { v = o[n](v), settle(resolve, reject, v.done, v.value); }); }; }\r\n    function settle(resolve, reject, d, v) { Promise.resolve(v).then(function(v) { resolve({ value: v, done: d }); }, reject); }\r\n}\r\n\r\nexport function __makeTemplateObject(cooked, raw) {\r\n    if (Object.defineProperty) { Object.defineProperty(cooked, \"raw\", { value: raw }); } else { cooked.raw = raw; }\r\n    return cooked;\r\n};\r\n\r\nexport function __importStar(mod) {\r\n    if (mod && mod.__esModule) return mod;\r\n    var result = {};\r\n    if (mod != null) for (var k in mod) if (Object.hasOwnProperty.call(mod, k)) result[k] = mod[k];\r\n    result.default = mod;\r\n    return result;\r\n}\r\n\r\nexport function __importDefault(mod) {\r\n    return (mod && mod.__esModule) ? mod : { default: mod };\r\n}\r\n","import {\n\tcreateES5Proxy,\n\twillFinalizeES5,\n\tmarkChangedES5,\n\tIProduceWithPatches,\n\tIProduce,\n\tImmerState,\n\teach,\n\tDrafted,\n\tisDraftable,\n\tImmerScope,\n\tprocessResult,\n\tNOTHING,\n\tmaybeFreeze,\n\tdie,\n\tPatch,\n\tObjectish,\n\tDRAFT_STATE,\n\tDraft,\n\tPatchListener,\n\tisDraft,\n\tapplyPatches,\n\tisMap,\n\tproxyMap,\n\tisSet,\n\tproxySet,\n\tcreateProxy,\n\tmarkChanged\n} from \"./internal\"\n\n/* istanbul ignore next */\nfunction verifyMinified() {}\n\nconst configDefaults = {\n\tuseProxies:\n\t\ttypeof Proxy !== \"undefined\" &&\n\t\ttypeof Proxy.revocable !== \"undefined\" &&\n\t\ttypeof Reflect !== \"undefined\",\n\tautoFreeze:\n\t\ttypeof process !== \"undefined\"\n\t\t\t? process.env.NODE_ENV !== \"production\"\n\t\t\t: /* istanbul ignore next */\n\t\t\t  verifyMinified.name === \"verifyMinified\",\n\tonAssign: null,\n\tonDelete: null,\n\tonCopy: null\n} as const\n\ninterface ProducersFns {\n\tproduce: IProduce\n\tproduceWithPatches: IProduceWithPatches\n}\n\nexport class Immer implements ProducersFns {\n\tuseProxies: boolean = false\n\tautoFreeze: boolean = false\n\tonAssign?: (state: ImmerState, prop: string | number, value: unknown) => void\n\tonDelete?: (state: ImmerState, prop: string | number) => void\n\tonCopy?: (state: ImmerState) => void\n\n\tconstructor(config?: {\n\t\tuseProxies?: boolean\n\t\tautoFreeze?: boolean\n\t\tonAssign?: (\n\t\t\tstate: ImmerState,\n\t\t\tprop: string | number,\n\t\t\tvalue: unknown\n\t\t) => void\n\t\tonDelete?: (state: ImmerState, prop: string | number) => void\n\t\tonCopy?: (state: ImmerState) => void\n\t}) {\n\t\teach(configDefaults, (key, value) => {\n\t\t\t// @ts-ignore\n\t\t\tthis[key] = config?.[key] ?? value\n\t\t})\n\t\tthis.setUseProxies(this.useProxies)\n\t\tthis.produce = this.produce.bind(this)\n\t\tthis.produceWithPatches = this.produceWithPatches.bind(this)\n\t}\n\n\t/**\n\t * The `produce` function takes a value and a \"recipe function\" (whose\n\t * return value often depends on the base state). The recipe function is\n\t * free to mutate its first argument however it wants. All mutations are\n\t * only ever applied to a __copy__ of the base state.\n\t *\n\t * Pass only a function to create a \"curried producer\" which relieves you\n\t * from passing the recipe function every time.\n\t *\n\t * Only plain objects and arrays are made mutable. All other objects are\n\t * considered uncopyable.\n\t *\n\t * Note: This function is __bound__ to its `Immer` instance.\n\t *\n\t * @param {any} base - the initial state\n\t * @param {Function} producer - function that receives a proxy of the base state as first argument and which can be freely modified\n\t * @param {Function} patchListener - optional function that will be called with all the patches produced here\n\t * @returns {any} a new state, or the initial state if nothing was modified\n\t */\n\tproduce(base: any, recipe?: any, patchListener?: any) {\n\t\t// curried invocation\n\t\tif (typeof base === \"function\" && typeof recipe !== \"function\") {\n\t\t\tconst defaultBase = recipe\n\t\t\trecipe = base\n\n\t\t\tconst self = this\n\t\t\treturn function curriedProduce(\n\t\t\t\tthis: any,\n\t\t\t\tbase = defaultBase,\n\t\t\t\t...args: any[]\n\t\t\t) {\n\t\t\t\treturn self.produce(base, (draft: Drafted) => recipe.call(this, draft, ...args)) // prettier-ignore\n\t\t\t}\n\t\t}\n\n\t\t// prettier-ignore\n\t\t{\n\t\t\tif (typeof recipe !== \"function\") {\n\t\t\t\tthrow new Error(\"The first or second argument to `produce` must be a function\")\n\t\t\t}\n\t\t\tif (patchListener !== undefined && typeof patchListener !== \"function\") {\n\t\t\t\tthrow new Error(\"The third argument to `produce` must be a function or undefined\")\n\t\t\t}\n\t\t}\n\n\t\tlet result\n\n\t\t// Only plain objects, arrays, and \"immerable classes\" are drafted.\n\t\tif (isDraftable(base)) {\n\t\t\tconst scope = ImmerScope.enter(this)\n\t\t\tconst proxy = this.createProxy(base, undefined)\n\t\t\tlet hasError = true\n\t\t\ttry {\n\t\t\t\tresult = recipe(proxy)\n\t\t\t\thasError = false\n\t\t\t} finally {\n\t\t\t\t// finally instead of catch + rethrow better preserves original stack\n\t\t\t\tif (hasError) scope.revoke()\n\t\t\t\telse scope.leave()\n\t\t\t}\n\t\t\tif (typeof Promise !== \"undefined\" && result instanceof Promise) {\n\t\t\t\treturn result.then(\n\t\t\t\t\tresult => {\n\t\t\t\t\t\tscope.usePatches(patchListener)\n\t\t\t\t\t\treturn processResult(this, result, scope)\n\t\t\t\t\t},\n\t\t\t\t\terror => {\n\t\t\t\t\t\tscope.revoke()\n\t\t\t\t\t\tthrow error\n\t\t\t\t\t}\n\t\t\t\t)\n\t\t\t}\n\t\t\tscope.usePatches(patchListener)\n\t\t\treturn processResult(this, result, scope)\n\t\t} else {\n\t\t\tresult = recipe(base)\n\t\t\tif (result === NOTHING) return undefined\n\t\t\tif (result === undefined) result = base\n\t\t\tmaybeFreeze(this, result, true)\n\t\t\treturn result\n\t\t}\n\t}\n\n\tproduceWithPatches(arg1: any, arg2?: any, arg3?: any): any {\n\t\tif (typeof arg1 === \"function\") {\n\t\t\treturn (state: any, ...args: any[]) =>\n\t\t\t\tthis.produceWithPatches(state, (draft: any) => arg1(draft, ...args))\n\t\t}\n\t\t// non-curried form\n\t\t/* istanbul ignore next */\n\t\tif (arg3) die()\n\t\tlet patches: Patch[], inversePatches: Patch[]\n\t\tconst nextState = this.produce(arg1, arg2, (p: Patch[], ip: Patch[]) => {\n\t\t\tpatches = p\n\t\t\tinversePatches = ip\n\t\t})\n\t\treturn [nextState, patches!, inversePatches!]\n\t}\n\n\tcreateDraft<T extends Objectish>(base: T): Draft<T> {\n\t\tif (!isDraftable(base)) {\n\t\t\tthrow new Error(\"First argument to `createDraft` must be a plain object, an array, or an immerable object\") // prettier-ignore\n\t\t}\n\t\tconst scope = ImmerScope.enter(this)\n\t\tconst proxy = this.createProxy(base, undefined)\n\t\tproxy[DRAFT_STATE].isManual = true\n\t\tscope.leave()\n\t\treturn proxy as any\n\t}\n\n\tfinishDraft<D extends Draft<any>>(\n\t\tdraft: D,\n\t\tpatchListener?: PatchListener\n\t): D extends Draft<infer T> ? T : never {\n\t\tconst state: ImmerState = draft && draft[DRAFT_STATE]\n\t\tif (!state || !state.isManual) {\n\t\t\tthrow new Error(\"First argument to `finishDraft` must be a draft returned by `createDraft`\") // prettier-ignore\n\t\t}\n\t\tif (state.finalized) {\n\t\t\tthrow new Error(\"The given draft is already finalized\") // prettier-ignore\n\t\t}\n\t\tconst {scope} = state\n\t\tscope.usePatches(patchListener)\n\t\treturn processResult(this, undefined, scope)\n\t}\n\n\t/**\n\t * Pass true to automatically freeze all copies created by Immer.\n\t *\n\t * By default, auto-freezing is disabled in production.\n\t */\n\tsetAutoFreeze(value: boolean) {\n\t\tthis.autoFreeze = value\n\t}\n\n\t/**\n\t * Pass true to use the ES2015 `Proxy` class when creating drafts, which is\n\t * always faster than using ES5 proxies.\n\t *\n\t * By default, feature detection is used, so calling this is rarely necessary.\n\t */\n\tsetUseProxies(value: boolean) {\n\t\tthis.useProxies = value\n\t}\n\n\tapplyPatches(base: Objectish, patches: Patch[]) {\n\t\t// If a patch replaces the entire state, take that replacement as base\n\t\t// before applying patches\n\t\tlet i: number\n\t\tfor (i = patches.length - 1; i >= 0; i--) {\n\t\t\tconst patch = patches[i]\n\t\t\tif (patch.path.length === 0 && patch.op === \"replace\") {\n\t\t\t\tbase = patch.value\n\t\t\t\tbreak\n\t\t\t}\n\t\t}\n\n\t\tif (isDraft(base)) {\n\t\t\t// N.B: never hits if some patch a replacement, patches are never drafts\n\t\t\treturn applyPatches(base, patches)\n\t\t}\n\t\t// Otherwise, produce a copy of the base state.\n\t\treturn this.produce(base, (draft: Drafted) =>\n\t\t\tapplyPatches(draft, patches.slice(i + 1))\n\t\t)\n\t}\n\n\tcreateProxy<T extends Objectish>(\n\t\tvalue: T,\n\t\tparent?: ImmerState\n\t): Drafted<T, ImmerState> {\n\t\t// precondition: createProxy should be guarded by isDraftable, so we know we can safely draft\n\t\tconst draft: Drafted = isMap(value)\n\t\t\t? proxyMap(value, parent)\n\t\t\t: isSet(value)\n\t\t\t? proxySet(value, parent)\n\t\t\t: this.useProxies\n\t\t\t? createProxy(value, parent)\n\t\t\t: createES5Proxy(value, parent)\n\n\t\tconst scope = parent ? parent.scope : ImmerScope.current!\n\t\tscope.drafts.push(draft)\n\t\treturn draft\n\t}\n\n\twillFinalize(scope: ImmerScope, thing: any, isReplaced: boolean) {\n\t\tif (!this.useProxies) willFinalizeES5(scope, thing, isReplaced)\n\t}\n\n\tmarkChanged(state: ImmerState) {\n\t\tif (this.useProxies) {\n\t\t\tmarkChanged(state)\n\t\t} else {\n\t\t\tmarkChangedES5(state)\n\t\t}\n\t}\n}\n","import * as React from 'react';\nimport { createSvgIcon } from '@material-ui/core/utils';\n/**\n * @ignore - internal component.\n */\n\nexport default createSvgIcon( /*#__PURE__*/React.createElement(\"path\", {\n  d: \"M20,12A8,8 0 0,1 12,20A8,8 0 0,1 4,12A8,8 0 0,1 12,4C12.76,4 13.5,4.11 14.2, 4.31L15.77,2.74C14.61,2.26 13.34,2 12,2A10,10 0 0,0 2,12A10,10 0 0,0 12,22A10,10 0 0, 0 22,12M7.91,10.08L6.5,11.5L11,16L21,6L19.59,4.58L11,13.17L7.91,10.08Z\"\n}), 'SuccessOutlined');","import * as React from 'react';\nimport { createSvgIcon } from '@material-ui/core/utils';\n/**\n * @ignore - internal component.\n */\n\nexport default createSvgIcon( /*#__PURE__*/React.createElement(\"path\", {\n  d: \"M12 5.99L19.53 19H4.47L12 5.99M12 2L1 21h22L12 2zm1 14h-2v2h2v-2zm0-6h-2v4h2v-4z\"\n}), 'ReportProblemOutlined');","import * as React from 'react';\nimport { createSvgIcon } from '@material-ui/core/utils';\n/**\n * @ignore - internal component.\n */\n\nexport default createSvgIcon( /*#__PURE__*/React.createElement(\"path\", {\n  d: \"M11 15h2v2h-2zm0-8h2v6h-2zm.99-5C6.47 2 2 6.48 2 12s4.47 10 9.99 10C17.52 22 22 17.52 22 12S17.52 2 11.99 2zM12 20c-4.42 0-8-3.58-8-8s3.58-8 8-8 8 3.58 8 8-3.58 8-8 8z\"\n}), 'ErrorOutline');","import * as React from 'react';\nimport { createSvgIcon } from '@material-ui/core/utils';\n/**\n * @ignore - internal component.\n */\n\nexport default createSvgIcon( /*#__PURE__*/React.createElement(\"path\", {\n  d: \"M11,9H13V7H11M12,20C7.59,20 4,16.41 4,12C4,7.59 7.59,4 12,4C16.41,4 20,7.59 20, 12C20,16.41 16.41,20 12,20M12,2A10,10 0 0,0 2,12A10,10 0 0,0 12,22A10,10 0 0,0 22,12A10, 10 0 0,0 12,2M11,17H13V11H11V17Z\"\n}), 'InfoOutlined');","import * as React from 'react';\nimport { createSvgIcon } from '@material-ui/core/utils';\n/**\n * @ignore - internal component.\n */\n\nexport default createSvgIcon( /*#__PURE__*/React.createElement(\"path\", {\n  d: \"M19 6.41L17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z\"\n}), 'Close');","import _objectWithoutProperties from \"@babel/runtime/helpers/esm/objectWithoutProperties\";\nimport _extends from \"@babel/runtime/helpers/esm/extends\";\nimport * as React from 'react';\nimport PropTypes from 'prop-types';\nimport clsx from 'clsx';\nimport { withStyles, lighten, darken } from '@material-ui/core/styles';\nimport Paper from '@material-ui/core/Paper';\nimport SuccessOutlinedIcon from '../internal/svg-icons/SuccessOutlined';\nimport ReportProblemOutlinedIcon from '../internal/svg-icons/ReportProblemOutlined';\nimport ErrorOutlineIcon from '../internal/svg-icons/ErrorOutline';\nimport InfoOutlinedIcon from '../internal/svg-icons/InfoOutlined';\nimport CloseIcon from '../internal/svg-icons/Close';\nimport IconButton from '@material-ui/core/IconButton';\nimport { capitalize } from '@material-ui/core/utils';\nexport var styles = function styles(theme) {\n  var getColor = theme.palette.type === 'light' ? darken : lighten;\n  var getBackgroundColor = theme.palette.type === 'light' ? lighten : darken;\n  return {\n    /* Styles applied to the root element. */\n    root: _extends({}, theme.typography.body2, {\n      borderRadius: theme.shape.borderRadius,\n      backgroundColor: 'transparent',\n      display: 'flex',\n      padding: '6px 16px'\n    }),\n\n    /* Styles applied to the root element if `variant=\"standard\"` and `color=\"success\"`. */\n    standardSuccess: {\n      color: getColor(theme.palette.success.main, 0.6),\n      backgroundColor: getBackgroundColor(theme.palette.success.main, 0.9),\n      '& $icon': {\n        color: theme.palette.success.main\n      }\n    },\n\n    /* Styles applied to the root element if `variant=\"standard\"` and `color=\"info\"`. */\n    standardInfo: {\n      color: getColor(theme.palette.info.main, 0.6),\n      backgroundColor: getBackgroundColor(theme.palette.info.main, 0.9),\n      '& $icon': {\n        color: theme.palette.info.main\n      }\n    },\n\n    /* Styles applied to the root element if `variant=\"standard\"` and `color=\"warning\"`. */\n    standardWarning: {\n      color: getColor(theme.palette.warning.main, 0.6),\n      backgroundColor: getBackgroundColor(theme.palette.warning.main, 0.9),\n      '& $icon': {\n        color: theme.palette.warning.main\n      }\n    },\n\n    /* Styles applied to the root element if `variant=\"standard\"` and `color=\"error\"`. */\n    standardError: {\n      color: getColor(theme.palette.error.main, 0.6),\n      backgroundColor: getBackgroundColor(theme.palette.error.main, 0.9),\n      '& $icon': {\n        color: theme.palette.error.main\n      }\n    },\n\n    /* Styles applied to the root element if `variant=\"outlined\"` and `color=\"success\"`. */\n    outlinedSuccess: {\n      color: getColor(theme.palette.success.main, 0.6),\n      border: \"1px solid \".concat(theme.palette.success.main),\n      '& $icon': {\n        color: theme.palette.success.main\n      }\n    },\n\n    /* Styles applied to the root element if `variant=\"outlined\"` and `color=\"info\"`. */\n    outlinedInfo: {\n      color: getColor(theme.palette.info.main, 0.6),\n      border: \"1px solid \".concat(theme.palette.info.main),\n      '& $icon': {\n        color: theme.palette.info.main\n      }\n    },\n\n    /* Styles applied to the root element if `variant=\"outlined\"` and `color=\"warning\"`. */\n    outlinedWarning: {\n      color: getColor(theme.palette.warning.main, 0.6),\n      border: \"1px solid \".concat(theme.palette.warning.main),\n      '& $icon': {\n        color: theme.palette.warning.main\n      }\n    },\n\n    /* Styles applied to the root element if `variant=\"outlined\"` and `color=\"error\"`. */\n    outlinedError: {\n      color: getColor(theme.palette.error.main, 0.6),\n      border: \"1px solid \".concat(theme.palette.error.main),\n      '& $icon': {\n        color: theme.palette.error.main\n      }\n    },\n\n    /* Styles applied to the root element if `variant=\"filled\"` and `color=\"success\"`. */\n    filledSuccess: {\n      color: '#fff',\n      fontWeight: theme.typography.fontWeightMedium,\n      backgroundColor: theme.palette.success.main\n    },\n\n    /* Styles applied to the root element if `variant=\"filled\"` and `color=\"info\"`. */\n    filledInfo: {\n      color: '#fff',\n      fontWeight: theme.typography.fontWeightMedium,\n      backgroundColor: theme.palette.info.main\n    },\n\n    /* Styles applied to the root element if `variant=\"filled\"` and `color=\"warning\"`. */\n    filledWarning: {\n      color: '#fff',\n      fontWeight: theme.typography.fontWeightMedium,\n      backgroundColor: theme.palette.warning.main\n    },\n\n    /* Styles applied to the root element if `variant=\"filled\"` and `color=\"error\"`. */\n    filledError: {\n      color: '#fff',\n      fontWeight: theme.typography.fontWeightMedium,\n      backgroundColor: theme.palette.error.main\n    },\n\n    /* Styles applied to the icon wrapper element. */\n    icon: {\n      marginRight: 12,\n      padding: '7px 0',\n      display: 'flex',\n      fontSize: 22,\n      opacity: 0.9\n    },\n\n    /* Styles applied to the message wrapper element. */\n    message: {\n      padding: '8px 0'\n    },\n\n    /* Styles applied to the action wrapper element if `action` is provided. */\n    action: {\n      display: 'flex',\n      alignItems: 'center',\n      marginLeft: 'auto',\n      paddingLeft: 16,\n      marginRight: -8\n    }\n  };\n};\nvar defaultIconMapping = {\n  success: /*#__PURE__*/React.createElement(SuccessOutlinedIcon, {\n    fontSize: \"inherit\"\n  }),\n  warning: /*#__PURE__*/React.createElement(ReportProblemOutlinedIcon, {\n    fontSize: \"inherit\"\n  }),\n  error: /*#__PURE__*/React.createElement(ErrorOutlineIcon, {\n    fontSize: \"inherit\"\n  }),\n  info: /*#__PURE__*/React.createElement(InfoOutlinedIcon, {\n    fontSize: \"inherit\"\n  })\n};\n\nvar _ref = /*#__PURE__*/React.createElement(CloseIcon, {\n  fontSize: \"small\"\n});\n\nvar Alert = /*#__PURE__*/React.forwardRef(function Alert(props, ref) {\n  var action = props.action,\n      children = props.children,\n      classes = props.classes,\n      className = props.className,\n      _props$closeText = props.closeText,\n      closeText = _props$closeText === void 0 ? 'Close' : _props$closeText,\n      color = props.color,\n      icon = props.icon,\n      _props$iconMapping = props.iconMapping,\n      iconMapping = _props$iconMapping === void 0 ? defaultIconMapping : _props$iconMapping,\n      onClose = props.onClose,\n      _props$role = props.role,\n      role = _props$role === void 0 ? 'alert' : _props$role,\n      _props$severity = props.severity,\n      severity = _props$severity === void 0 ? 'success' : _props$severity,\n      _props$variant = props.variant,\n      variant = _props$variant === void 0 ? 'standard' : _props$variant,\n      other = _objectWithoutProperties(props, [\"action\", \"children\", \"classes\", \"className\", \"closeText\", \"color\", \"icon\", \"iconMapping\", \"onClose\", \"role\", \"severity\", \"variant\"]);\n\n  return /*#__PURE__*/React.createElement(Paper, _extends({\n    role: role,\n    square: true,\n    elevation: 0,\n    className: clsx(classes.root, classes[\"\".concat(variant).concat(capitalize(color || severity))], className),\n    ref: ref\n  }, other), icon !== false ? /*#__PURE__*/React.createElement(\"div\", {\n    className: classes.icon\n  }, icon || iconMapping[severity] || defaultIconMapping[severity]) : null, /*#__PURE__*/React.createElement(\"div\", {\n    className: classes.message\n  }, children), action != null ? /*#__PURE__*/React.createElement(\"div\", {\n    className: classes.action\n  }, action) : null, action == null && onClose ? /*#__PURE__*/React.createElement(\"div\", {\n    className: classes.action\n  }, /*#__PURE__*/React.createElement(IconButton, {\n    size: \"small\",\n    \"aria-label\": closeText,\n    title: closeText,\n    color: \"inherit\",\n    onClick: onClose\n  }, _ref)) : null);\n});\nprocess.env.NODE_ENV !== \"production\" ? Alert.propTypes = {\n  // ----------------------------- Warning --------------------------------\n  // | These PropTypes are generated from the TypeScript type definitions |\n  // |     To update them edit the d.ts file and run \"yarn proptypes\"     |\n  // ----------------------------------------------------------------------\n\n  /**\n   * The action to display. It renders after the message, at the end of the alert.\n   */\n  action: PropTypes.node,\n\n  /**\n   * The content of the component.\n   */\n  children: PropTypes.node,\n\n  /**\n   * Override or extend the styles applied to the component.\n   * See [CSS API](#css) below for more details.\n   */\n  classes: PropTypes.object,\n\n  /**\n   * @ignore\n   */\n  className: PropTypes.string,\n\n  /**\n   * Override the default label for the *close popup* icon button.\n   *\n   * For localization purposes, you can use the provided [translations](/guides/localization/).\n   */\n  closeText: PropTypes.string,\n\n  /**\n   * The main color for the alert. Unless provided, the value is taken from the `severity` prop.\n   */\n  color: PropTypes.oneOf(['error', 'info', 'success', 'warning']),\n\n  /**\n   * Override the icon displayed before the children.\n   * Unless provided, the icon is mapped to the value of the `severity` prop.\n   */\n  icon: PropTypes.node,\n\n  /**\n   * The component maps the `severity` prop to a range of different icons,\n   * for instance success to `<SuccessOutlined>`.\n   * If you wish to change this mapping, you can provide your own.\n   * Alternatively, you can use the `icon` prop to override the icon displayed.\n   */\n  iconMapping: PropTypes.shape({\n    error: PropTypes.node,\n    info: PropTypes.node,\n    success: PropTypes.node,\n    warning: PropTypes.node\n  }),\n\n  /**\n   * Callback fired when the component requests to be closed.\n   * When provided and no `action` prop is set, a close icon button is displayed that triggers the callback when clicked.\n   *\n   * @param {object} event The event source of the callback.\n   */\n  onClose: PropTypes.func,\n\n  /**\n   * The ARIA role attribute of the element.\n   */\n  role: PropTypes.string,\n\n  /**\n   * The severity of the alert. This defines the color and icon used.\n   */\n  severity: PropTypes.oneOf(['error', 'info', 'success', 'warning']),\n\n  /**\n   * The variant to use.\n   */\n  variant: PropTypes.oneOf(['filled', 'outlined', 'standard'])\n} : void 0;\nexport default withStyles(styles, {\n  name: 'MuiAlert'\n})(Alert);","import * as React from 'react';\nimport * as ReactDOM from 'react-dom';\nimport PropTypes from 'prop-types';\nimport ownerDocument from '../utils/ownerDocument';\nimport useForkRef from '../utils/useForkRef';\nimport useEventCallback from '../utils/useEventCallback';\nimport { elementAcceptingRef, exactProp } from '@material-ui/utils';\n\nfunction mapEventPropToEvent(eventProp) {\n  return eventProp.substring(2).toLowerCase();\n}\n\nfunction clickedRootScrollbar(event) {\n  return document.documentElement.clientWidth < event.clientX || document.documentElement.clientHeight < event.clientY;\n}\n/**\n * Listen for click events that occur somewhere in the document, outside of the element itself.\n * For instance, if you need to hide a menu when people click anywhere else on your page.\n */\n\n\nfunction ClickAwayListener(props) {\n  var children = props.children,\n      _props$disableReactTr = props.disableReactTree,\n      disableReactTree = _props$disableReactTr === void 0 ? false : _props$disableReactTr,\n      _props$mouseEvent = props.mouseEvent,\n      mouseEvent = _props$mouseEvent === void 0 ? 'onClick' : _props$mouseEvent,\n      onClickAway = props.onClickAway,\n      _props$touchEvent = props.touchEvent,\n      touchEvent = _props$touchEvent === void 0 ? 'onTouchEnd' : _props$touchEvent;\n  var movedRef = React.useRef(false);\n  var nodeRef = React.useRef(null);\n  var mountedRef = React.useRef(false);\n  var syntheticEventRef = React.useRef(false);\n  React.useEffect(function () {\n    mountedRef.current = true;\n    return function () {\n      mountedRef.current = false;\n    };\n  }, []); // can be removed once we drop support for non ref forwarding class components\n\n  var handleOwnRef = React.useCallback(function (instance) {\n    // #StrictMode ready\n    nodeRef.current = ReactDOM.findDOMNode(instance);\n  }, []);\n  var handleRef = useForkRef(children.ref, handleOwnRef); // The handler doesn't take event.defaultPrevented into account:\n  //\n  // event.preventDefault() is meant to stop default behaviours like\n  // clicking a checkbox to check it, hitting a button to submit a form,\n  // and hitting left arrow to move the cursor in a text input etc.\n  // Only special HTML elements have these default behaviors.\n\n  var handleClickAway = useEventCallback(function (event) {\n    // Given developers can stop the propagation of the synthetic event,\n    // we can only be confident with a positive value.\n    var insideReactTree = syntheticEventRef.current;\n    syntheticEventRef.current = false; // 1. IE 11 support, which trigger the handleClickAway even after the unbind\n    // 2. The child might render null.\n    // 3. Behave like a blur listener.\n\n    if (!mountedRef.current || !nodeRef.current || clickedRootScrollbar(event)) {\n      return;\n    } // Do not act if user performed touchmove\n\n\n    if (movedRef.current) {\n      movedRef.current = false;\n      return;\n    }\n\n    var insideDOM; // If not enough, can use https://github.com/DieterHolvoet/event-propagation-path/blob/master/propagationPath.js\n\n    if (event.composedPath) {\n      insideDOM = event.composedPath().indexOf(nodeRef.current) > -1;\n    } else {\n      // TODO v6 remove dead logic https://caniuse.com/#search=composedPath.\n      var doc = ownerDocument(nodeRef.current);\n      insideDOM = !doc.documentElement.contains(event.target) || nodeRef.current.contains(event.target);\n    }\n\n    if (!insideDOM && (disableReactTree || !insideReactTree)) {\n      onClickAway(event);\n    }\n  }); // Keep track of mouse/touch events that bubbled up through the portal.\n\n  var createHandleSynthetic = function createHandleSynthetic(handlerName) {\n    return function (event) {\n      syntheticEventRef.current = true;\n      var childrenPropsHandler = children.props[handlerName];\n\n      if (childrenPropsHandler) {\n        childrenPropsHandler(event);\n      }\n    };\n  };\n\n  var childrenProps = {\n    ref: handleRef\n  };\n\n  if (touchEvent !== false) {\n    childrenProps[touchEvent] = createHandleSynthetic(touchEvent);\n  }\n\n  React.useEffect(function () {\n    if (touchEvent !== false) {\n      var mappedTouchEvent = mapEventPropToEvent(touchEvent);\n      var doc = ownerDocument(nodeRef.current);\n\n      var handleTouchMove = function handleTouchMove() {\n        movedRef.current = true;\n      };\n\n      doc.addEventListener(mappedTouchEvent, handleClickAway);\n      doc.addEventListener('touchmove', handleTouchMove);\n      return function () {\n        doc.removeEventListener(mappedTouchEvent, handleClickAway);\n        doc.removeEventListener('touchmove', handleTouchMove);\n      };\n    }\n\n    return undefined;\n  }, [handleClickAway, touchEvent]);\n\n  if (mouseEvent !== false) {\n    childrenProps[mouseEvent] = createHandleSynthetic(mouseEvent);\n  }\n\n  React.useEffect(function () {\n    if (mouseEvent !== false) {\n      var mappedMouseEvent = mapEventPropToEvent(mouseEvent);\n      var doc = ownerDocument(nodeRef.current);\n      doc.addEventListener(mappedMouseEvent, handleClickAway);\n      return function () {\n        doc.removeEventListener(mappedMouseEvent, handleClickAway);\n      };\n    }\n\n    return undefined;\n  }, [handleClickAway, mouseEvent]);\n  return /*#__PURE__*/React.createElement(React.Fragment, null, /*#__PURE__*/React.cloneElement(children, childrenProps));\n}\n\nprocess.env.NODE_ENV !== \"production\" ? ClickAwayListener.propTypes = {\n  // ----------------------------- Warning --------------------------------\n  // | These PropTypes are generated from the TypeScript type definitions |\n  // |     To update them edit the d.ts file and run \"yarn proptypes\"     |\n  // ----------------------------------------------------------------------\n\n  /**\n   * The wrapped element.\n   */\n  children: elementAcceptingRef.isRequired,\n\n  /**\n   * If `true`, the React tree is ignored and only the DOM tree is considered.\n   * This prop changes how portaled elements are handled.\n   */\n  disableReactTree: PropTypes.bool,\n\n  /**\n   * The mouse event to listen to. You can disable the listener by providing `false`.\n   */\n  mouseEvent: PropTypes.oneOf(['onClick', 'onMouseDown', 'onMouseUp', false]),\n\n  /**\n   * Callback fired when a \"click away\" event is detected.\n   */\n  onClickAway: PropTypes.func.isRequired,\n\n  /**\n   * The touch event to listen to. You can disable the listener by providing `false`.\n   */\n  touchEvent: PropTypes.oneOf(['onTouchEnd', 'onTouchStart', false])\n} : void 0;\n\nif (process.env.NODE_ENV !== 'production') {\n  // eslint-disable-next-line\n  ClickAwayListener['propTypes' + ''] = exactProp(ClickAwayListener.propTypes);\n}\n\nexport default ClickAwayListener;","import _objectWithoutProperties from \"@babel/runtime/helpers/esm/objectWithoutProperties\";\nimport _defineProperty from \"@babel/runtime/helpers/esm/defineProperty\";\nimport _extends from \"@babel/runtime/helpers/esm/extends\";\nimport * as React from 'react';\nimport PropTypes from 'prop-types';\nimport clsx from 'clsx';\nimport withStyles from '../styles/withStyles';\nimport Paper from '../Paper';\nimport { emphasize } from '../styles/colorManipulator';\nexport var styles = function styles(theme) {\n  var emphasis = theme.palette.type === 'light' ? 0.8 : 0.98;\n  var backgroundColor = emphasize(theme.palette.background.default, emphasis);\n  return {\n    /* Styles applied to the root element. */\n    root: _extends({}, theme.typography.body2, _defineProperty({\n      color: theme.palette.getContrastText(backgroundColor),\n      backgroundColor: backgroundColor,\n      display: 'flex',\n      alignItems: 'center',\n      flexWrap: 'wrap',\n      padding: '6px 16px',\n      borderRadius: theme.shape.borderRadius,\n      flexGrow: 1\n    }, theme.breakpoints.up('sm'), {\n      flexGrow: 'initial',\n      minWidth: 288\n    })),\n\n    /* Styles applied to the message wrapper element. */\n    message: {\n      padding: '8px 0'\n    },\n\n    /* Styles applied to the action wrapper element if `action` is provided. */\n    action: {\n      display: 'flex',\n      alignItems: 'center',\n      marginLeft: 'auto',\n      paddingLeft: 16,\n      marginRight: -8\n    }\n  };\n};\nvar SnackbarContent = /*#__PURE__*/React.forwardRef(function SnackbarContent(props, ref) {\n  var action = props.action,\n      classes = props.classes,\n      className = props.className,\n      message = props.message,\n      _props$role = props.role,\n      role = _props$role === void 0 ? 'alert' : _props$role,\n      other = _objectWithoutProperties(props, [\"action\", \"classes\", \"className\", \"message\", \"role\"]);\n\n  return /*#__PURE__*/React.createElement(Paper, _extends({\n    role: role,\n    square: true,\n    elevation: 6,\n    className: clsx(classes.root, className),\n    ref: ref\n  }, other), /*#__PURE__*/React.createElement(\"div\", {\n    className: classes.message\n  }, message), action ? /*#__PURE__*/React.createElement(\"div\", {\n    className: classes.action\n  }, action) : null);\n});\nprocess.env.NODE_ENV !== \"production\" ? SnackbarContent.propTypes = {\n  // ----------------------------- Warning --------------------------------\n  // | These PropTypes are generated from the TypeScript type definitions |\n  // |     To update them edit the d.ts file and run \"yarn proptypes\"     |\n  // ----------------------------------------------------------------------\n\n  /**\n   * The action to display. It renders after the message, at the end of the snackbar.\n   */\n  action: PropTypes.node,\n\n  /**\n   * Override or extend the styles applied to the component.\n   * See [CSS API](#css) below for more details.\n   */\n  classes: PropTypes.object,\n\n  /**\n   * @ignore\n   */\n  className: PropTypes.string,\n\n  /**\n   * The message to display.\n   */\n  message: PropTypes.node,\n\n  /**\n   * The ARIA role attribute of the element.\n   */\n  role: PropTypes.string\n} : void 0;\nexport default withStyles(styles, {\n  name: 'MuiSnackbarContent'\n})(SnackbarContent);","import _objectWithoutProperties from \"@babel/runtime/helpers/esm/objectWithoutProperties\";\nimport _defineProperty from \"@babel/runtime/helpers/esm/defineProperty\";\nimport _extends from \"@babel/runtime/helpers/esm/extends\";\nimport * as React from 'react';\nimport PropTypes from 'prop-types';\nimport clsx from 'clsx';\nimport withStyles from '../styles/withStyles';\nimport { duration } from '../styles/transitions';\nimport ClickAwayListener from '../ClickAwayListener';\nimport useEventCallback from '../utils/useEventCallback';\nimport capitalize from '../utils/capitalize';\nimport createChainedFunction from '../utils/createChainedFunction';\nimport Grow from '../Grow';\nimport SnackbarContent from '../SnackbarContent';\nexport var styles = function styles(theme) {\n  var top1 = {\n    top: 8\n  };\n  var bottom1 = {\n    bottom: 8\n  };\n  var right = {\n    justifyContent: 'flex-end'\n  };\n  var left = {\n    justifyContent: 'flex-start'\n  };\n  var top3 = {\n    top: 24\n  };\n  var bottom3 = {\n    bottom: 24\n  };\n  var right3 = {\n    right: 24\n  };\n  var left3 = {\n    left: 24\n  };\n  var center = {\n    left: '50%',\n    right: 'auto',\n    transform: 'translateX(-50%)'\n  };\n  return {\n    /* Styles applied to the root element. */\n    root: {\n      zIndex: theme.zIndex.snackbar,\n      position: 'fixed',\n      display: 'flex',\n      left: 8,\n      right: 8,\n      justifyContent: 'center',\n      alignItems: 'center'\n    },\n\n    /* Styles applied to the root element if `anchorOrigin={{ 'top', 'center' }}`. */\n    anchorOriginTopCenter: _extends({}, top1, _defineProperty({}, theme.breakpoints.up('sm'), _extends({}, top3, center))),\n\n    /* Styles applied to the root element if `anchorOrigin={{ 'bottom', 'center' }}`. */\n    anchorOriginBottomCenter: _extends({}, bottom1, _defineProperty({}, theme.breakpoints.up('sm'), _extends({}, bottom3, center))),\n\n    /* Styles applied to the root element if `anchorOrigin={{ 'top', 'right' }}`. */\n    anchorOriginTopRight: _extends({}, top1, right, _defineProperty({}, theme.breakpoints.up('sm'), _extends({\n      left: 'auto'\n    }, top3, right3))),\n\n    /* Styles applied to the root element if `anchorOrigin={{ 'bottom', 'right' }}`. */\n    anchorOriginBottomRight: _extends({}, bottom1, right, _defineProperty({}, theme.breakpoints.up('sm'), _extends({\n      left: 'auto'\n    }, bottom3, right3))),\n\n    /* Styles applied to the root element if `anchorOrigin={{ 'top', 'left' }}`. */\n    anchorOriginTopLeft: _extends({}, top1, left, _defineProperty({}, theme.breakpoints.up('sm'), _extends({\n      right: 'auto'\n    }, top3, left3))),\n\n    /* Styles applied to the root element if `anchorOrigin={{ 'bottom', 'left' }}`. */\n    anchorOriginBottomLeft: _extends({}, bottom1, left, _defineProperty({}, theme.breakpoints.up('sm'), _extends({\n      right: 'auto'\n    }, bottom3, left3)))\n  };\n};\nvar Snackbar = /*#__PURE__*/React.forwardRef(function Snackbar(props, ref) {\n  var action = props.action,\n      _props$anchorOrigin = props.anchorOrigin;\n  _props$anchorOrigin = _props$anchorOrigin === void 0 ? {\n    vertical: 'bottom',\n    horizontal: 'center'\n  } : _props$anchorOrigin;\n\n  var vertical = _props$anchorOrigin.vertical,\n      horizontal = _props$anchorOrigin.horizontal,\n      _props$autoHideDurati = props.autoHideDuration,\n      autoHideDuration = _props$autoHideDurati === void 0 ? null : _props$autoHideDurati,\n      children = props.children,\n      classes = props.classes,\n      className = props.className,\n      ClickAwayListenerProps = props.ClickAwayListenerProps,\n      ContentProps = props.ContentProps,\n      _props$disableWindowB = props.disableWindowBlurListener,\n      disableWindowBlurListener = _props$disableWindowB === void 0 ? false : _props$disableWindowB,\n      message = props.message,\n      onClose = props.onClose,\n      onEnter = props.onEnter,\n      onEntered = props.onEntered,\n      onEntering = props.onEntering,\n      onExit = props.onExit,\n      onExited = props.onExited,\n      onExiting = props.onExiting,\n      onMouseEnter = props.onMouseEnter,\n      onMouseLeave = props.onMouseLeave,\n      open = props.open,\n      resumeHideDuration = props.resumeHideDuration,\n      _props$TransitionComp = props.TransitionComponent,\n      TransitionComponent = _props$TransitionComp === void 0 ? Grow : _props$TransitionComp,\n      _props$transitionDura = props.transitionDuration,\n      transitionDuration = _props$transitionDura === void 0 ? {\n    enter: duration.enteringScreen,\n    exit: duration.leavingScreen\n  } : _props$transitionDura,\n      TransitionProps = props.TransitionProps,\n      other = _objectWithoutProperties(props, [\"action\", \"anchorOrigin\", \"autoHideDuration\", \"children\", \"classes\", \"className\", \"ClickAwayListenerProps\", \"ContentProps\", \"disableWindowBlurListener\", \"message\", \"onClose\", \"onEnter\", \"onEntered\", \"onEntering\", \"onExit\", \"onExited\", \"onExiting\", \"onMouseEnter\", \"onMouseLeave\", \"open\", \"resumeHideDuration\", \"TransitionComponent\", \"transitionDuration\", \"TransitionProps\"]);\n\n  var timerAutoHide = React.useRef();\n\n  var _React$useState = React.useState(true),\n      exited = _React$useState[0],\n      setExited = _React$useState[1];\n\n  var handleClose = useEventCallback(function () {\n    if (onClose) {\n      onClose.apply(void 0, arguments);\n    }\n  });\n  var setAutoHideTimer = useEventCallback(function (autoHideDurationParam) {\n    if (!onClose || autoHideDurationParam == null) {\n      return;\n    }\n\n    clearTimeout(timerAutoHide.current);\n    timerAutoHide.current = setTimeout(function () {\n      handleClose(null, 'timeout');\n    }, autoHideDurationParam);\n  });\n  React.useEffect(function () {\n    if (open) {\n      setAutoHideTimer(autoHideDuration);\n    }\n\n    return function () {\n      clearTimeout(timerAutoHide.current);\n    };\n  }, [open, autoHideDuration, setAutoHideTimer]); // Pause the timer when the user is interacting with the Snackbar\n  // or when the user hide the window.\n\n  var handlePause = function handlePause() {\n    clearTimeout(timerAutoHide.current);\n  }; // Restart the timer when the user is no longer interacting with the Snackbar\n  // or when the window is shown back.\n\n\n  var handleResume = React.useCallback(function () {\n    if (autoHideDuration != null) {\n      setAutoHideTimer(resumeHideDuration != null ? resumeHideDuration : autoHideDuration * 0.5);\n    }\n  }, [autoHideDuration, resumeHideDuration, setAutoHideTimer]);\n\n  var handleMouseEnter = function handleMouseEnter(event) {\n    if (onMouseEnter) {\n      onMouseEnter(event);\n    }\n\n    handlePause();\n  };\n\n  var handleMouseLeave = function handleMouseLeave(event) {\n    if (onMouseLeave) {\n      onMouseLeave(event);\n    }\n\n    handleResume();\n  };\n\n  var handleClickAway = function handleClickAway(event) {\n    if (onClose) {\n      onClose(event, 'clickaway');\n    }\n  };\n\n  var handleExited = function handleExited() {\n    setExited(true);\n  };\n\n  var handleEnter = function handleEnter() {\n    setExited(false);\n  };\n\n  React.useEffect(function () {\n    if (!disableWindowBlurListener && open) {\n      window.addEventListener('focus', handleResume);\n      window.addEventListener('blur', handlePause);\n      return function () {\n        window.removeEventListener('focus', handleResume);\n        window.removeEventListener('blur', handlePause);\n      };\n    }\n\n    return undefined;\n  }, [disableWindowBlurListener, handleResume, open]); // So we only render active snackbars.\n\n  if (!open && exited) {\n    return null;\n  }\n\n  return /*#__PURE__*/React.createElement(ClickAwayListener, _extends({\n    onClickAway: handleClickAway\n  }, ClickAwayListenerProps), /*#__PURE__*/React.createElement(\"div\", _extends({\n    className: clsx(classes.root, classes[\"anchorOrigin\".concat(capitalize(vertical)).concat(capitalize(horizontal))], className),\n    onMouseEnter: handleMouseEnter,\n    onMouseLeave: handleMouseLeave,\n    ref: ref\n  }, other), /*#__PURE__*/React.createElement(TransitionComponent, _extends({\n    appear: true,\n    in: open,\n    onEnter: createChainedFunction(handleEnter, onEnter),\n    onEntered: onEntered,\n    onEntering: onEntering,\n    onExit: onExit,\n    onExited: createChainedFunction(handleExited, onExited),\n    onExiting: onExiting,\n    timeout: transitionDuration,\n    direction: vertical === 'top' ? 'down' : 'up'\n  }, TransitionProps), children || /*#__PURE__*/React.createElement(SnackbarContent, _extends({\n    message: message,\n    action: action\n  }, ContentProps)))));\n});\nprocess.env.NODE_ENV !== \"production\" ? Snackbar.propTypes = {\n  // ----------------------------- Warning --------------------------------\n  // | These PropTypes are generated from the TypeScript type definitions |\n  // |     To update them edit the d.ts file and run \"yarn proptypes\"     |\n  // ----------------------------------------------------------------------\n\n  /**\n   * The action to display. It renders after the message, at the end of the snackbar.\n   */\n  action: PropTypes.node,\n\n  /**\n   * The anchor of the `Snackbar`.\n   */\n  anchorOrigin: PropTypes.shape({\n    horizontal: PropTypes.oneOf(['center', 'left', 'right']).isRequired,\n    vertical: PropTypes.oneOf(['bottom', 'top']).isRequired\n  }),\n\n  /**\n   * The number of milliseconds to wait before automatically calling the\n   * `onClose` function. `onClose` should then set the state of the `open`\n   * prop to hide the Snackbar. This behavior is disabled by default with\n   * the `null` value.\n   */\n  autoHideDuration: PropTypes.number,\n\n  /**\n   * Replace the `SnackbarContent` component.\n   */\n  children: PropTypes.element,\n\n  /**\n   * Override or extend the styles applied to the component.\n   * See [CSS API](#css) below for more details.\n   */\n  classes: PropTypes.object,\n\n  /**\n   * @ignore\n   */\n  className: PropTypes.string,\n\n  /**\n   * Props applied to the `ClickAwayListener` element.\n   */\n  ClickAwayListenerProps: PropTypes.object,\n\n  /**\n   * Props applied to the [`SnackbarContent`](/api/snackbar-content/) element.\n   */\n  ContentProps: PropTypes.object,\n\n  /**\n   * If `true`, the `autoHideDuration` timer will expire even if the window is not focused.\n   */\n  disableWindowBlurListener: PropTypes.bool,\n\n  /**\n   * When displaying multiple consecutive Snackbars from a parent rendering a single\n   * <Snackbar/>, add the key prop to ensure independent treatment of each message.\n   * e.g. <Snackbar key={message} />, otherwise, the message may update-in-place and\n   * features such as autoHideDuration may be canceled.\n   */\n  key: PropTypes.any,\n\n  /**\n   * The message to display.\n   */\n  message: PropTypes.node,\n\n  /**\n   * Callback fired when the component requests to be closed.\n   * Typically `onClose` is used to set state in the parent component,\n   * which is used to control the `Snackbar` `open` prop.\n   * The `reason` parameter can optionally be used to control the response to `onClose`,\n   * for example ignoring `clickaway`.\n   *\n   * @param {object} event The event source of the callback.\n   * @param {string} reason Can be: `\"timeout\"` (`autoHideDuration` expired), `\"clickaway\"`.\n   */\n  onClose: PropTypes.func,\n\n  /**\n   * Callback fired before the transition is entering.\n   */\n  onEnter: PropTypes.func,\n\n  /**\n   * Callback fired when the transition has entered.\n   */\n  onEntered: PropTypes.func,\n\n  /**\n   * Callback fired when the transition is entering.\n   */\n  onEntering: PropTypes.func,\n\n  /**\n   * Callback fired before the transition is exiting.\n   */\n  onExit: PropTypes.func,\n\n  /**\n   * Callback fired when the transition has exited.\n   */\n  onExited: PropTypes.func,\n\n  /**\n   * Callback fired when the transition is exiting.\n   */\n  onExiting: PropTypes.func,\n\n  /**\n   * @ignore\n   */\n  onMouseEnter: PropTypes.func,\n\n  /**\n   * @ignore\n   */\n  onMouseLeave: PropTypes.func,\n\n  /**\n   * If `true`, `Snackbar` is open.\n   */\n  open: PropTypes.bool,\n\n  /**\n   * The number of milliseconds to wait before dismissing after user interaction.\n   * If `autoHideDuration` prop isn't specified, it does nothing.\n   * If `autoHideDuration` prop is specified but `resumeHideDuration` isn't,\n   * we default to `autoHideDuration / 2` ms.\n   */\n  resumeHideDuration: PropTypes.number,\n\n  /**\n   * The component used for the transition.\n   * [Follow this guide](/components/transitions/#transitioncomponent-prop) to learn more about the requirements for this component.\n   */\n  TransitionComponent: PropTypes.elementType,\n\n  /**\n   * The duration for the transition, in milliseconds.\n   * You may specify a single timeout for all transitions, or individually with an object.\n   */\n  transitionDuration: PropTypes.oneOfType([PropTypes.number, PropTypes.shape({\n    appear: PropTypes.number,\n    enter: PropTypes.number,\n    exit: PropTypes.number\n  })]),\n\n  /**\n   * Props applied to the [`Transition`](http://reactcommunity.org/react-transition-group/transition#Transition-props) element.\n   */\n  TransitionProps: PropTypes.object\n} : void 0;\nexport default withStyles(styles, {\n  flip: false,\n  name: 'MuiSnackbar'\n})(Snackbar);"],"sourceRoot":""}